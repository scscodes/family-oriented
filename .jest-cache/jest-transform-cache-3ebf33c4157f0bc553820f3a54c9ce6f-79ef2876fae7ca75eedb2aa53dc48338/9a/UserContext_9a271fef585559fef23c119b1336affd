111740886f87921cc58a08f4557feb55
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    UserProvider: function() {
        return UserProvider;
    },
    useAvatar: function() {
        return useAvatar;
    },
    useRoleGuard: function() {
        return useRoleGuard;
    },
    useUser: function() {
        return useUser;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _client = require("../lib/supabase/client");
const _logger = require("../utils/logger");
const _navigation = require("next/navigation");
const _material = require("@mui/material");
const _demoConfig = require("../utils/demoConfig");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const UserContext = /*#__PURE__*/ (0, _react.createContext)(undefined);
function UserProvider({ children }) {
    const [user, setUser] = (0, _react.useState)(null);
    const [userProfile, setUserProfile] = (0, _react.useState)(null);
    const [avatars, setAvatars] = (0, _react.useState)([]);
    const [currentAvatar, setCurrentAvatar] = (0, _react.useState)(null);
    const [error, setError] = (0, _react.useState)(null);
    const [roles, setRoles] = (0, _react.useState)([]);
    const [org, setOrg] = (0, _react.useState)(null);
    const router = (0, _navigation.useRouter)();
    const [demoMode, setDemoMode] = (0, _react.useState)(false);
    // View As state
    const [viewAsRole, setViewAsRole] = (0, _react.useState)(null);
    const [viewAsAvatar, setViewAsAvatar] = (0, _react.useState)(null);
    // Consolidated loading state
    const [loadingState, setLoadingState] = (0, _react.useState)({
        user: true,
        roles: true,
        avatars: true,
        isReady: false
    });
    const supabase = (0, _client.createClient)();
    // Helper to update loading state
    const updateLoadingState = (0, _react.useCallback)((updates)=>{
        setLoadingState((prev)=>{
            const newState = {
                ...prev,
                ...updates
            };
            // Calculate if everything is ready for role-based rendering
            // Only user and roles are required for isReady - avatars can still be loading
            newState.isReady = !newState.user && !newState.roles;
            // Debug logging for loading state changes
            console.log('UserContext: Loading state updated:', newState);
            return newState;
        });
    }, []);
    // Load user profile from database
    const loadUserProfile = (0, _react.useCallback)(async (userId)=>{
        try {
            _logger.logger.debug('ðŸ” Loading user profile for ID:', userId);
            const { data, error } = await supabase.from('users').select('*').eq('id', userId).single();
            _logger.logger.debug('ðŸ“Š User profile query result:', {
                data,
                error
            });
            if (error) throw error;
            setUserProfile(data);
            _logger.logger.debug('âœ… User profile loaded successfully');
        } catch (err) {
            _logger.logger.error('âŒ Error loading user profile:', err);
            throw err; // Re-throw to trigger fallback in loadDemoUser
        }
    }, [
        supabase
    ]);
    // Load avatars for the current user
    const loadAvatars = (0, _react.useCallback)(async (userId)=>{
        try {
            console.log('UserContext: Loading avatars for user:', userId);
            updateLoadingState({
                avatars: true
            });
            const { data, error } = await supabase.from('avatars').select('*').eq('user_id', userId).order('created_at', {
                ascending: true
            });
            if (error) throw error;
            console.log('UserContext: Avatars loaded successfully:', data?.length || 0);
            setAvatars(data || []);
            // Set first avatar as current if none selected and we have avatars
            if (data && data.length > 0) {
                setCurrentAvatar((prev)=>prev || data[0]);
            }
        } catch (err) {
            _logger.logger.error('Error loading avatars:', err);
            console.log('UserContext: Avatar loading failed:', err);
            setError('Failed to load avatars');
            setAvatars([]);
        } finally{
            console.log('UserContext: Avatar loading completed');
            updateLoadingState({
                avatars: false
            });
        }
    }, [
        supabase,
        updateLoadingState
    ]);
    // Fetch roles and org info
    const fetchRolesAndOrg = (0, _react.useCallback)(async (userId)=>{
        try {
            updateLoadingState({
                roles: true
            });
            // Fetch user profile from public.users
            const { data: userProfileData, error: userProfileError } = await supabase.from('users').select('id, org_id').eq('id', userId).single();
            if (userProfileError) throw userProfileError;
            const orgId = userProfileData?.org_id;
            // Fetch org info and subscription plan
            let orgInfo = null;
            if (orgId) {
                const { data: orgData, error: orgError } = await supabase.from('organizations').select('id, name, subscription_plan_id').eq('id', orgId).single();
                if (orgError) throw orgError;
                let subscriptionPlan = null;
                if (orgData?.subscription_plan_id) {
                    const { data: planData, error: planError } = await supabase.from('subscription_plans').select('*').eq('id', orgData.subscription_plan_id).single();
                    if (planError) throw planError;
                    subscriptionPlan = planData;
                }
                orgInfo = {
                    id: orgData.id,
                    name: orgData.name,
                    subscriptionPlan
                };
            }
            setOrg(orgInfo);
            // Fetch user roles from user_policies -> permission_policies
            const { data: userPolicies, error: userPoliciesError } = await supabase.from('user_policies').select('policy_id, permission_policies(id, policy_name, description)').eq('user_id', userId);
            if (userPoliciesError) throw userPoliciesError;
            const userRoles = (userPolicies || []).map((up)=>({
                    id: up.permission_policies.id,
                    name: up.permission_policies.policy_name,
                    description: up.permission_policies.description
                }));
            setRoles(userRoles);
        } catch (err) {
            _logger.logger.error('Error fetching roles/org info:', err);
            setOrg(null);
            setRoles([]);
            setError('Failed to load organization or roles.');
        } finally{
            updateLoadingState({
                roles: false
            });
        }
    }, [
        supabase,
        updateLoadingState
    ]);
    // Enhanced demo user/org/roles fallback
    const loadDemoUserContext = (0, _react.useCallback)(async ()=>{
        try {
            updateLoadingState({
                user: true,
                roles: true,
                avatars: true
            });
            setDemoMode(true);
            // Try to load demo user/org/roles from DB, fallback to hardcoded
            try {
                // Try to find a demo user in the users table
                const { data: demoUsers } = await supabase.from('users').select('*').ilike('email', '%demo%');
                const demoUser = demoUsers && demoUsers.length > 0 ? demoUsers[0] : null;
                // Try to find a demo org
                let demoOrg = null;
                let demoPlan = null;
                if (demoUser && demoUser.org_id) {
                    const { data: orgData } = await supabase.from('organizations').select('*').eq('id', demoUser.org_id).single();
                    demoOrg = orgData;
                    if (orgData && orgData.subscription_plan_id) {
                        const { data: planData } = await supabase.from('subscription_plans').select('*').eq('id', orgData.subscription_plan_id).single();
                        demoPlan = planData;
                    }
                }
                // Try to find demo roles
                let demoRoles = [];
                if (demoUser) {
                    const { data: userPolicies } = await supabase.from('user_policies').select('policy_id, permission_policies(id, policy_name, description)').eq('user_id', demoUser.id);
                    demoRoles = (userPolicies || []).map((up)=>({
                            id: up.permission_policies.id,
                            name: up.permission_policies.policy_name,
                            description: up.permission_policies.description
                        }));
                }
                // Set context state from database
                if (demoUser) {
                    // Convert database user to Supabase User format
                    const supabaseUser = {
                        ...demoUser,
                        app_metadata: {},
                        user_metadata: {},
                        aud: 'authenticated'
                    };
                    setUser(supabaseUser);
                    setUserProfile(demoUser);
                    // Always ensure demo org with subscription plan exists
                    const ensuredDemoOrg = demoOrg && demoPlan ? {
                        id: demoOrg.id,
                        name: demoOrg.name,
                        subscriptionPlan: demoPlan
                    } : (()=>{
                        // Use configurable demo organization for database users too
                        const demoConfig = (0, _demoConfig.getDemoConfig)();
                        const subscriptionPlan = (0, _demoConfig.createDemoSubscriptionPlan)(demoConfig);
                        return {
                            id: `${demoUser.id}-org`,
                            name: demoConfig.orgName,
                            subscriptionPlan
                        };
                    })();
                    console.log('Demo org being set for database user:', ensuredDemoOrg);
                    setOrg(ensuredDemoOrg);
                    setRoles(demoRoles.length > 0 ? demoRoles : [
                        {
                            id: '1',
                            name: 'account_owner',
                            description: 'Full administrative access'
                        },
                        {
                            id: '2',
                            name: 'org_admin',
                            description: 'Organization management'
                        }
                    ]);
                    // Load demo avatars
                    await loadAvatars(demoUser.id);
                    return;
                }
            } catch (dbError) {
                _logger.logger.warn('Database demo user not found, using hardcoded fallback:', dbError);
                console.log('Demo mode fallback triggered:', dbError);
            }
            // Fallback to configurable demo context
            console.log('UserContext: Creating demo user from configuration');
            // Get demo configuration (can be controlled via environment variables or localStorage)
            const demoConfig = (0, _demoConfig.getDemoConfig)();
            console.log('Demo configuration loaded:', demoConfig);
            // Create demo user
            const demoUser = {
                id: demoConfig.id,
                email: demoConfig.email,
                name: demoConfig.name
            };
            setUser(demoUser);
            setUserProfile({
                id: demoConfig.id,
                email: demoConfig.email,
                name: demoConfig.name,
                org_id: `${demoConfig.id}-org`
            });
            // Create demo organization with appropriate subscription plan
            const subscriptionPlan = (0, _demoConfig.createDemoSubscriptionPlan)(demoConfig);
            const demoOrg = {
                id: `${demoConfig.id}-org`,
                name: demoConfig.orgName,
                subscriptionPlan
            };
            _logger.logger.info(`Setting demo org for ${demoConfig.tier} tier:`, demoOrg);
            setOrg(demoOrg);
            console.log('Demo org set:', demoOrg);
            // Create demo roles based on configuration
            const demoRoles = (0, _demoConfig.createDemoRoles)(demoConfig);
            setRoles(demoRoles);
            console.log('Demo roles set:', demoRoles);
            // Create demo avatars based on configuration
            const demoAvatars = (0, _demoConfig.createDemoAvatars)(demoConfig);
            setAvatars(demoAvatars);
            if (demoAvatars.length > 0) {
                setCurrentAvatar(demoAvatars[0]);
            }
            console.log(`Demo avatars created: ${demoAvatars.length}`);
        } catch (err) {
            _logger.logger.error('Error in demo user context:', err);
            setError('Failed to initialize demo mode');
        } finally{
            // Complete all loading states for demo mode
            console.log('Demo mode initialization complete, updating loading states');
            updateLoadingState({
                user: false,
                roles: false,
                avatars: false
            });
        }
    }, [
        supabase,
        loadAvatars,
        updateLoadingState
    ]);
    // Main user loading effect
    (0, _react.useEffect)(()=>{
        const loadUser = async ()=>{
            try {
                updateLoadingState({
                    user: true
                });
                setError(null);
                const { data: { session } } = await supabase.auth.getSession();
                if (session?.user) {
                    // Real user authentication
                    setUser(session.user);
                    updateLoadingState({
                        user: false
                    });
                    await loadUserProfile(session.user.id);
                    // Load roles and avatars in parallel
                    await Promise.all([
                        fetchRolesAndOrg(session.user.id),
                        loadAvatars(session.user.id)
                    ]);
                } else {
                    // No session - load demo mode for development
                    _logger.logger.info('No user session found, loading demo mode');
                    console.log('UserContext: Starting demo mode load');
                    await loadDemoUserContext();
                    console.log('UserContext: Demo mode load completed');
                }
            } catch (err) {
                _logger.logger.error('Error loading user:', err);
                setError('Failed to load user context.');
                updateLoadingState({
                    user: false,
                    roles: false,
                    avatars: false
                });
            }
        };
        loadUser();
        // Listen for auth changes
        const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session)=>{
            if (event === 'SIGNED_IN' && session?.user) {
                setUser(session.user);
                updateLoadingState({
                    user: false
                });
                await loadUserProfile(session.user.id);
                // Load roles and avatars in parallel
                await Promise.all([
                    fetchRolesAndOrg(session.user.id),
                    loadAvatars(session.user.id)
                ]);
            } else if (event === 'SIGNED_OUT') {
                setUser(null);
                setUserProfile(null);
                setAvatars([]);
                setCurrentAvatar(null);
                setRoles([]);
                setOrg(null);
                // Load demo user for continued development
                await loadDemoUserContext();
            }
        });
        return ()=>{
            subscription.unsubscribe();
        };
    }, [
        loadUserProfile,
        loadDemoUserContext,
        supabase.auth,
        loadAvatars,
        fetchRolesAndOrg,
        updateLoadingState
    ]);
    // Utility functions
    const hasRole = (0, _react.useCallback)((roleName)=>{
        // Only return true if we're ready and actually have the role
        return loadingState.isReady && roles.some((r)=>r.name === roleName);
    }, [
        roles,
        loadingState.isReady
    ]);
    const canAccess = (0, _react.useCallback)((feature)=>{
        // Only return true if we're ready and have access
        if (!loadingState.isReady || !org?.subscriptionPlan) return false;
        const features = org.subscriptionPlan.features_included || {};
        return features[feature] === true;
    }, [
        org,
        loadingState.isReady
    ]);
    const getTierLimit = (0, _react.useCallback)((feature)=>{
        return org?.subscriptionPlan?.[`${feature}_limit`];
    }, [
        org
    ]);
    // Create a new avatar with subscription limit checking
    const createAvatar = async (name)=>{
        if (!user) {
            setError('Must be logged in to create avatar');
            return null;
        }
        // Check subscription limits before creating avatar
        const currentAvatarsCount = avatars.length;
        if (org?.subscriptionPlan) {
            const avatarLimit = org.subscriptionPlan.avatar_limit || 5;
            if (currentAvatarsCount >= avatarLimit) {
                const tierName = org.subscriptionPlan.tier || 'current plan';
                setError(`Avatar limit reached (${currentAvatarsCount}/${avatarLimit}). Upgrade your ${tierName} to create more avatars.`);
                return null;
            }
        }
        try {
            setError(null);
            const { data, error } = await supabase.from('avatars').insert({
                user_id: user.id,
                org_id: org?.id || null,
                name: name.trim(),
                theme_settings: {},
                game_preferences: {}
            }).select().single();
            if (error) throw error;
            // Refresh avatars list
            await loadAvatars(user.id);
            _logger.logger.info('Avatar created successfully:', {
                avatarId: data.id,
                avatarName: data.name,
                currentCount: currentAvatarsCount + 1,
                tier: org?.subscriptionPlan?.tier
            });
            return data;
        } catch (err) {
            _logger.logger.error('Error creating avatar:', err);
            setError(err instanceof Error ? err.message : 'Failed to create avatar');
            return null;
        }
    };
    // Refresh avatars from database
    const refreshAvatars = async ()=>{
        if (user) {
            await loadAvatars(user.id);
        }
    };
    // Sign out the current user
    const signOut = async ()=>{
        try {
            const { error } = await supabase.auth.signOut();
            if (error) throw error;
        } catch (err) {
            _logger.logger.error('Error signing out:', err);
            setError('Failed to sign out');
        }
    };
    // View As functionality
    const isViewAs = viewAsRole !== null || viewAsAvatar !== null;
    const resetViewAs = ()=>{
        setViewAsRole(null);
        setViewAsAvatar(null);
    };
    const contextValue = {
        user,
        userProfile,
        avatars,
        currentAvatar,
        loading: !loadingState.isReady,
        error,
        setCurrentAvatar,
        createAvatar,
        refreshAvatars,
        signOut,
        roles,
        org,
        hasRole,
        canAccess,
        getTierLimit,
        viewAsRole,
        viewAsAvatar,
        isViewAs,
        setViewAsRole,
        setViewAsAvatar,
        resetViewAs,
        loadingState
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)(UserContext.Provider, {
        value: contextValue,
        children: [
            demoMode && /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Box, {
                sx: {
                    bgcolor: 'warning.main',
                    color: 'black',
                    p: 1,
                    textAlign: 'center'
                },
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("b", {
                        children: "Demo Mode:"
                    }),
                    " You are using a demo user context. Features may be simulated."
                ]
            }),
            children
        ]
    });
}
function useUser() {
    const context = (0, _react.useContext)(UserContext);
    if (context === undefined) {
        throw new Error('useUser must be used within a UserProvider');
    }
    return context;
}
function useAvatar() {
    const { currentAvatar, avatars, setCurrentAvatar, createAvatar } = useUser();
    return {
        currentAvatar,
        avatars,
        setCurrentAvatar,
        createAvatar
    };
}
function useRoleGuard() {
    const { hasRole, loadingState, roles } = useUser();
    const isReady = loadingState.isReady;
    const guardedHasRole = (0, _react.useCallback)((roleName)=>{
        return isReady && hasRole(roleName);
    }, [
        isReady,
        hasRole
    ]);
    return {
        hasRole: guardedHasRole,
        isReady,
        roles: isReady ? roles : []
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0c1xcZmFtaWx5LW9yaWVudGVkXFxzcmNcXGNvbnRleHRcXFVzZXJDb250ZXh0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcblxyXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCwgUmVhY3ROb2RlLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2UvY2xpZW50JztcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcbmltcG9ydCB0eXBlIHsgRGF0YWJhc2UgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9kYXRhYmFzZS50eXBlcyc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvdXRpbHMvbG9nZ2VyJztcclxuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJztcclxuaW1wb3J0IHsgQm94IH0gZnJvbSAnQG11aS9tYXRlcmlhbCc7XHJcbmltcG9ydCB7IFxyXG4gIGdldERlbW9Db25maWcsIFxyXG4gIGNyZWF0ZURlbW9TdWJzY3JpcHRpb25QbGFuLCBcclxuICBjcmVhdGVEZW1vQXZhdGFycywgXHJcbiAgY3JlYXRlRGVtb1JvbGVzIFxyXG59IGZyb20gJ0AvdXRpbHMvZGVtb0NvbmZpZyc7XHJcblxyXG4vLyBUeXBlc1xyXG50eXBlIEF2YXRhciA9IERhdGFiYXNlWydwdWJsaWMnXVsnVGFibGVzJ11bJ2F2YXRhcnMnXVsnUm93J107XHJcbnR5cGUgVXNlclByb2ZpbGUgPSBEYXRhYmFzZVsncHVibGljJ11bJ1RhYmxlcyddWyd1c2VycyddWydSb3cnXTtcclxuXHJcbi8qKlxyXG4gKiBFeHRlbmRlZCB1c2VyIGNvbnRleHQgdHlwZSBmb3Igcm9sZXMgYW5kIHN1YnNjcmlwdGlvbiB0aWVyXHJcbiAqL1xyXG5pbnRlcmZhY2UgUm9sZSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdWJzY3JpcHRpb25QbGFuIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICB0aWVyOiBzdHJpbmc7XHJcbiAgYXZhdGFyX2xpbWl0OiBudW1iZXI7XHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICBmZWF0dXJlc19pbmNsdWRlZDogYW55O1xyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgW2tleTogc3RyaW5nXTogYW55O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgT3JnSW5mbyB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgc3Vic2NyaXB0aW9uUGxhbjogU3Vic2NyaXB0aW9uUGxhbiB8IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25zb2xpZGF0ZWQgbG9hZGluZyBzdGF0ZSBmb3IgYmV0dGVyIFVYXHJcbiAqL1xyXG5pbnRlcmZhY2UgTG9hZGluZ1N0YXRlIHtcclxuICB1c2VyOiBib29sZWFuO1xyXG4gIHJvbGVzOiBib29sZWFuO1xyXG4gIGF2YXRhcnM6IGJvb2xlYW47XHJcbiAgLy8gSGVscGVyIHRvIGNoZWNrIGlmIGV2ZXJ5dGhpbmcgaXMgcmVhZHkgZm9yIHJvbGUtYmFzZWQgcmVuZGVyaW5nXHJcbiAgaXNSZWFkeTogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEV4dGVuZGVkIHVzZXIgY29udGV4dCB0eXBlIGZvciByb2xlcyBhbmQgc3Vic2NyaXB0aW9uIHRpZXIsIHdpdGggVmlldyBBcyBzdXBwb3J0XHJcbiAqL1xyXG5pbnRlcmZhY2UgRXh0ZW5kZWRVc2VyQ29udGV4dFR5cGUgZXh0ZW5kcyBVc2VyQ29udGV4dFR5cGUge1xyXG4gIHJvbGVzOiBSb2xlW107XHJcbiAgb3JnOiBPcmdJbmZvIHwgbnVsbDtcclxuICBoYXNSb2xlOiAocm9sZU5hbWU6IHN0cmluZykgPT4gYm9vbGVhbjtcclxuICBjYW5BY2Nlc3M6IChmZWF0dXJlOiBzdHJpbmcpID0+IGJvb2xlYW47XHJcbiAgZ2V0VGllckxpbWl0OiAoZmVhdHVyZTogc3RyaW5nKSA9PiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcbiAgLy8gVmlldyBBcyBzdGF0ZSBhbmQgbWV0aG9kc1xyXG4gIHZpZXdBc1JvbGU6IHN0cmluZyB8IG51bGw7XHJcbiAgdmlld0FzQXZhdGFyOiBBdmF0YXIgfCBudWxsO1xyXG4gIGlzVmlld0FzOiBib29sZWFuO1xyXG4gIHNldFZpZXdBc1JvbGU6IChyb2xlOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkO1xyXG4gIHNldFZpZXdBc0F2YXRhcjogKGF2YXRhcjogQXZhdGFyIHwgbnVsbCkgPT4gdm9pZDtcclxuICByZXNldFZpZXdBczogKCkgPT4gdm9pZDtcclxuICAvLyBFbmhhbmNlZCBsb2FkaW5nIHN0YXRlXHJcbiAgbG9hZGluZ1N0YXRlOiBMb2FkaW5nU3RhdGU7XHJcbn1cclxuXHJcbmludGVyZmFjZSBVc2VyQ29udGV4dFR5cGUge1xyXG4gIHVzZXI6IFVzZXIgfCBudWxsO1xyXG4gIHVzZXJQcm9maWxlOiBVc2VyUHJvZmlsZSB8IG51bGw7XHJcbiAgYXZhdGFyczogQXZhdGFyW107XHJcbiAgY3VycmVudEF2YXRhcjogQXZhdGFyIHwgbnVsbDtcclxuICBsb2FkaW5nOiBib29sZWFuO1xyXG4gIGVycm9yOiBzdHJpbmcgfCBudWxsO1xyXG4gIFxyXG4gIC8vIEFjdGlvbnNcclxuICBzZXRDdXJyZW50QXZhdGFyOiAoYXZhdGFyOiBBdmF0YXIgfCBudWxsKSA9PiB2b2lkO1xyXG4gIGNyZWF0ZUF2YXRhcjogKG5hbWU6IHN0cmluZykgPT4gUHJvbWlzZTxBdmF0YXIgfCBudWxsPjtcclxuICByZWZyZXNoQXZhdGFyczogKCkgPT4gUHJvbWlzZTx2b2lkPjtcclxuICBzaWduT3V0OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG59XHJcblxyXG5jb25zdCBVc2VyQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8VXNlckNvbnRleHRUeXBlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xyXG5cclxuLyoqXHJcbiAqIFVzZXIgcHJvdmlkZXIgdGhhdCBtYW5hZ2VzIGF1dGhlbnRpY2F0aW9uIHN0YXRlIGFuZCBhdmF0YXIgY29udGV4dFxyXG4gKiBJbnRlZ3JhdGVzIHdpdGggU3VwYWJhc2UgZm9yIHBlcnNpc3RlbnQgdXNlciBhbmQgYXZhdGFyIG1hbmFnZW1lbnRcclxuICogXHJcbiAqIEVuaGFuY2VkIHdpdGg6XHJcbiAqIC0gQ29uc29saWRhdGVkIGxvYWRpbmcgc3RhdGVzXHJcbiAqIC0gUHJvcGVyIGRlbW8gbW9kZSBzdXBwb3J0XHJcbiAqIC0gRWxpbWluYXRpb24gb2YgZmxhc2hpbmcgVUkgZWxlbWVudHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBVc2VyUHJvdmlkZXIoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdE5vZGUgfSkge1xyXG4gIGNvbnN0IFt1c2VyLCBzZXRVc2VyXSA9IHVzZVN0YXRlPFVzZXIgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbdXNlclByb2ZpbGUsIHNldFVzZXJQcm9maWxlXSA9IHVzZVN0YXRlPFVzZXJQcm9maWxlIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgW2F2YXRhcnMsIHNldEF2YXRhcnNdID0gdXNlU3RhdGU8QXZhdGFyW10+KFtdKTtcclxuICBjb25zdCBbY3VycmVudEF2YXRhciwgc2V0Q3VycmVudEF2YXRhcl0gPSB1c2VTdGF0ZTxBdmF0YXIgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtyb2xlcywgc2V0Um9sZXNdID0gdXNlU3RhdGU8Um9sZVtdPihbXSk7XHJcbiAgY29uc3QgW29yZywgc2V0T3JnXSA9IHVzZVN0YXRlPE9yZ0luZm8gfCBudWxsPihudWxsKTtcclxuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcclxuICBjb25zdCBbZGVtb01vZGUsIHNldERlbW9Nb2RlXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcclxuICBcclxuICAvLyBWaWV3IEFzIHN0YXRlXHJcbiAgY29uc3QgW3ZpZXdBc1JvbGUsIHNldFZpZXdBc1JvbGVdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgW3ZpZXdBc0F2YXRhciwgc2V0Vmlld0FzQXZhdGFyXSA9IHVzZVN0YXRlPEF2YXRhciB8IG51bGw+KG51bGwpO1xyXG5cclxuICAvLyBDb25zb2xpZGF0ZWQgbG9hZGluZyBzdGF0ZVxyXG4gIGNvbnN0IFtsb2FkaW5nU3RhdGUsIHNldExvYWRpbmdTdGF0ZV0gPSB1c2VTdGF0ZTxMb2FkaW5nU3RhdGU+KHtcclxuICAgIHVzZXI6IHRydWUsXHJcbiAgICByb2xlczogdHJ1ZSxcclxuICAgIGF2YXRhcnM6IHRydWUsXHJcbiAgICBpc1JlYWR5OiBmYWxzZVxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xyXG5cclxuICAvLyBIZWxwZXIgdG8gdXBkYXRlIGxvYWRpbmcgc3RhdGVcclxuICBjb25zdCB1cGRhdGVMb2FkaW5nU3RhdGUgPSB1c2VDYWxsYmFjaygodXBkYXRlczogUGFydGlhbDxMb2FkaW5nU3RhdGU+KSA9PiB7XHJcbiAgICBzZXRMb2FkaW5nU3RhdGUocHJldiA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0geyAuLi5wcmV2LCAuLi51cGRhdGVzIH07XHJcbiAgICAgIC8vIENhbGN1bGF0ZSBpZiBldmVyeXRoaW5nIGlzIHJlYWR5IGZvciByb2xlLWJhc2VkIHJlbmRlcmluZ1xyXG4gICAgICAvLyBPbmx5IHVzZXIgYW5kIHJvbGVzIGFyZSByZXF1aXJlZCBmb3IgaXNSZWFkeSAtIGF2YXRhcnMgY2FuIHN0aWxsIGJlIGxvYWRpbmdcclxuICAgICAgbmV3U3RhdGUuaXNSZWFkeSA9ICFuZXdTdGF0ZS51c2VyICYmICFuZXdTdGF0ZS5yb2xlcztcclxuICAgICAgXHJcbiAgICAgIC8vIERlYnVnIGxvZ2dpbmcgZm9yIGxvYWRpbmcgc3RhdGUgY2hhbmdlc1xyXG4gICAgICBjb25zb2xlLmxvZygnVXNlckNvbnRleHQ6IExvYWRpbmcgc3RhdGUgdXBkYXRlZDonLCBuZXdTdGF0ZSk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gbmV3U3RhdGU7XHJcbiAgICB9KTtcclxuICB9LCBbXSk7XHJcblxyXG4gIC8vIExvYWQgdXNlciBwcm9maWxlIGZyb20gZGF0YWJhc2VcclxuICBjb25zdCBsb2FkVXNlclByb2ZpbGUgPSB1c2VDYWxsYmFjayhhc3luYyAodXNlcklkOiBzdHJpbmcpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxvZ2dlci5kZWJ1Zygn8J+UjSBMb2FkaW5nIHVzZXIgcHJvZmlsZSBmb3IgSUQ6JywgdXNlcklkKTtcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgndXNlcnMnKVxyXG4gICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgIC5lcSgnaWQnLCB1c2VySWQpXHJcbiAgICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgICAgbG9nZ2VyLmRlYnVnKCfwn5OKIFVzZXIgcHJvZmlsZSBxdWVyeSByZXN1bHQ6JywgeyBkYXRhLCBlcnJvciB9KTtcclxuICAgICAgXHJcbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICAgIHNldFVzZXJQcm9maWxlKGRhdGEpO1xyXG4gICAgICBsb2dnZXIuZGVidWcoJ+KchSBVc2VyIHByb2ZpbGUgbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcign4p2MIEVycm9yIGxvYWRpbmcgdXNlciBwcm9maWxlOicsIGVycik7XHJcbiAgICAgIHRocm93IGVycjsgLy8gUmUtdGhyb3cgdG8gdHJpZ2dlciBmYWxsYmFjayBpbiBsb2FkRGVtb1VzZXJcclxuICAgIH1cclxuICB9LCBbc3VwYWJhc2VdKTtcclxuXHJcbiAgLy8gTG9hZCBhdmF0YXJzIGZvciB0aGUgY3VycmVudCB1c2VyXHJcbiAgY29uc3QgbG9hZEF2YXRhcnMgPSB1c2VDYWxsYmFjayhhc3luYyAodXNlcklkOiBzdHJpbmcpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyQ29udGV4dDogTG9hZGluZyBhdmF0YXJzIGZvciB1c2VyOicsIHVzZXJJZCk7XHJcbiAgICAgIHVwZGF0ZUxvYWRpbmdTdGF0ZSh7IGF2YXRhcnM6IHRydWUgfSk7XHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2F2YXRhcnMnKVxyXG4gICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZClcclxuICAgICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KTtcclxuXHJcbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnVXNlckNvbnRleHQ6IEF2YXRhcnMgbG9hZGVkIHN1Y2Nlc3NmdWxseTonLCBkYXRhPy5sZW5ndGggfHwgMCk7XHJcbiAgICAgIHNldEF2YXRhcnMoZGF0YSB8fCBbXSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTZXQgZmlyc3QgYXZhdGFyIGFzIGN1cnJlbnQgaWYgbm9uZSBzZWxlY3RlZCBhbmQgd2UgaGF2ZSBhdmF0YXJzXHJcbiAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHNldEN1cnJlbnRBdmF0YXIocHJldiA9PiBwcmV2IHx8IGRhdGFbMF0pO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBsb2FkaW5nIGF2YXRhcnM6JywgZXJyKTtcclxuICAgICAgY29uc29sZS5sb2coJ1VzZXJDb250ZXh0OiBBdmF0YXIgbG9hZGluZyBmYWlsZWQ6JywgZXJyKTtcclxuICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGF2YXRhcnMnKTtcclxuICAgICAgc2V0QXZhdGFycyhbXSk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBjb25zb2xlLmxvZygnVXNlckNvbnRleHQ6IEF2YXRhciBsb2FkaW5nIGNvbXBsZXRlZCcpO1xyXG4gICAgICB1cGRhdGVMb2FkaW5nU3RhdGUoeyBhdmF0YXJzOiBmYWxzZSB9KTtcclxuICAgIH1cclxuICB9LCBbc3VwYWJhc2UsIHVwZGF0ZUxvYWRpbmdTdGF0ZV0pO1xyXG5cclxuICAvLyBGZXRjaCByb2xlcyBhbmQgb3JnIGluZm9cclxuICBjb25zdCBmZXRjaFJvbGVzQW5kT3JnID0gdXNlQ2FsbGJhY2soYXN5bmMgKHVzZXJJZDogc3RyaW5nKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICB1cGRhdGVMb2FkaW5nU3RhdGUoeyByb2xlczogdHJ1ZSB9KTtcclxuICAgICAgXHJcbiAgICAgIC8vIEZldGNoIHVzZXIgcHJvZmlsZSBmcm9tIHB1YmxpYy51c2Vyc1xyXG4gICAgICBjb25zdCB7IGRhdGE6IHVzZXJQcm9maWxlRGF0YSwgZXJyb3I6IHVzZXJQcm9maWxlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3VzZXJzJylcclxuICAgICAgICAuc2VsZWN0KCdpZCwgb3JnX2lkJylcclxuICAgICAgICAuZXEoJ2lkJywgdXNlcklkKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgaWYgKHVzZXJQcm9maWxlRXJyb3IpIHRocm93IHVzZXJQcm9maWxlRXJyb3I7XHJcbiAgICAgIGNvbnN0IG9yZ0lkID0gdXNlclByb2ZpbGVEYXRhPy5vcmdfaWQ7XHJcbiAgICAgIFxyXG4gICAgICAvLyBGZXRjaCBvcmcgaW5mbyBhbmQgc3Vic2NyaXB0aW9uIHBsYW5cclxuICAgICAgbGV0IG9yZ0luZm86IE9yZ0luZm8gfCBudWxsID0gbnVsbDtcclxuICAgICAgaWYgKG9yZ0lkKSB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBvcmdEYXRhLCBlcnJvcjogb3JnRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnb3JnYW5pemF0aW9ucycpXHJcbiAgICAgICAgICAuc2VsZWN0KCdpZCwgbmFtZSwgc3Vic2NyaXB0aW9uX3BsYW5faWQnKVxyXG4gICAgICAgICAgLmVxKCdpZCcsIG9yZ0lkKVxyXG4gICAgICAgICAgLnNpbmdsZSgpO1xyXG4gICAgICAgIGlmIChvcmdFcnJvcikgdGhyb3cgb3JnRXJyb3I7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHN1YnNjcmlwdGlvblBsYW46IFN1YnNjcmlwdGlvblBsYW4gfCBudWxsID0gbnVsbDtcclxuICAgICAgICBpZiAob3JnRGF0YT8uc3Vic2NyaXB0aW9uX3BsYW5faWQpIHtcclxuICAgICAgICAgIGNvbnN0IHsgZGF0YTogcGxhbkRhdGEsIGVycm9yOiBwbGFuRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgIC5mcm9tKCdzdWJzY3JpcHRpb25fcGxhbnMnKVxyXG4gICAgICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAgICAgLmVxKCdpZCcsIG9yZ0RhdGEuc3Vic2NyaXB0aW9uX3BsYW5faWQpXHJcbiAgICAgICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICAgIGlmIChwbGFuRXJyb3IpIHRocm93IHBsYW5FcnJvcjtcclxuICAgICAgICAgIHN1YnNjcmlwdGlvblBsYW4gPSBwbGFuRGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgb3JnSW5mbyA9IHtcclxuICAgICAgICAgIGlkOiBvcmdEYXRhLmlkLFxyXG4gICAgICAgICAgbmFtZTogb3JnRGF0YS5uYW1lLFxyXG4gICAgICAgICAgc3Vic2NyaXB0aW9uUGxhbixcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIHNldE9yZyhvcmdJbmZvKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEZldGNoIHVzZXIgcm9sZXMgZnJvbSB1c2VyX3BvbGljaWVzIC0+IHBlcm1pc3Npb25fcG9saWNpZXNcclxuICAgICAgY29uc3QgeyBkYXRhOiB1c2VyUG9saWNpZXMsIGVycm9yOiB1c2VyUG9saWNpZXNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgndXNlcl9wb2xpY2llcycpXHJcbiAgICAgICAgLnNlbGVjdCgncG9saWN5X2lkLCBwZXJtaXNzaW9uX3BvbGljaWVzKGlkLCBwb2xpY3lfbmFtZSwgZGVzY3JpcHRpb24pJylcclxuICAgICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpO1xyXG4gICAgICBpZiAodXNlclBvbGljaWVzRXJyb3IpIHRocm93IHVzZXJQb2xpY2llc0Vycm9yO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgdXNlclJvbGVzOiBSb2xlW10gPSAodXNlclBvbGljaWVzIHx8IFtdKS5tYXAoKHVwOiBhbnkpID0+ICh7XHJcbiAgICAgICAgaWQ6IHVwLnBlcm1pc3Npb25fcG9saWNpZXMuaWQsXHJcbiAgICAgICAgbmFtZTogdXAucGVybWlzc2lvbl9wb2xpY2llcy5wb2xpY3lfbmFtZSxcclxuICAgICAgICBkZXNjcmlwdGlvbjogdXAucGVybWlzc2lvbl9wb2xpY2llcy5kZXNjcmlwdGlvbixcclxuICAgICAgfSkpO1xyXG4gICAgICBzZXRSb2xlcyh1c2VyUm9sZXMpO1xyXG4gICAgICBcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHJvbGVzL29yZyBpbmZvOicsIGVycik7XHJcbiAgICAgIHNldE9yZyhudWxsKTtcclxuICAgICAgc2V0Um9sZXMoW10pO1xyXG4gICAgICBzZXRFcnJvcignRmFpbGVkIHRvIGxvYWQgb3JnYW5pemF0aW9uIG9yIHJvbGVzLicpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgdXBkYXRlTG9hZGluZ1N0YXRlKHsgcm9sZXM6IGZhbHNlIH0pO1xyXG4gICAgfVxyXG4gIH0sIFtzdXBhYmFzZSwgdXBkYXRlTG9hZGluZ1N0YXRlXSk7XHJcblxyXG4gIC8vIEVuaGFuY2VkIGRlbW8gdXNlci9vcmcvcm9sZXMgZmFsbGJhY2tcclxuICBjb25zdCBsb2FkRGVtb1VzZXJDb250ZXh0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdXBkYXRlTG9hZGluZ1N0YXRlKHsgdXNlcjogdHJ1ZSwgcm9sZXM6IHRydWUsIGF2YXRhcnM6IHRydWUgfSk7XHJcbiAgICAgIHNldERlbW9Nb2RlKHRydWUpO1xyXG4gICAgICBcclxuICAgICAgLy8gVHJ5IHRvIGxvYWQgZGVtbyB1c2VyL29yZy9yb2xlcyBmcm9tIERCLCBmYWxsYmFjayB0byBoYXJkY29kZWRcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBUcnkgdG8gZmluZCBhIGRlbW8gdXNlciBpbiB0aGUgdXNlcnMgdGFibGVcclxuICAgICAgICBjb25zdCB7IGRhdGE6IGRlbW9Vc2VycyB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCd1c2VycycpXHJcbiAgICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAgIC5pbGlrZSgnZW1haWwnLCAnJWRlbW8lJyk7XHJcbiAgICAgICAgY29uc3QgZGVtb1VzZXIgPSBkZW1vVXNlcnMgJiYgZGVtb1VzZXJzLmxlbmd0aCA+IDAgPyBkZW1vVXNlcnNbMF0gOiBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRyeSB0byBmaW5kIGEgZGVtbyBvcmdcclxuICAgICAgICBsZXQgZGVtb09yZyA9IG51bGw7XHJcbiAgICAgICAgbGV0IGRlbW9QbGFuID0gbnVsbDtcclxuICAgICAgICBpZiAoZGVtb1VzZXIgJiYgZGVtb1VzZXIub3JnX2lkKSB7XHJcbiAgICAgICAgICBjb25zdCB7IGRhdGE6IG9yZ0RhdGEgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgIC5mcm9tKCdvcmdhbml6YXRpb25zJylcclxuICAgICAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgICAgIC5lcSgnaWQnLCBkZW1vVXNlci5vcmdfaWQpXHJcbiAgICAgICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICAgIGRlbW9PcmcgPSBvcmdEYXRhO1xyXG4gICAgICAgICAgaWYgKG9yZ0RhdGEgJiYgb3JnRGF0YS5zdWJzY3JpcHRpb25fcGxhbl9pZCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IHBsYW5EYXRhIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgICAgIC5mcm9tKCdzdWJzY3JpcHRpb25fcGxhbnMnKVxyXG4gICAgICAgICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgICAgICAgIC5lcSgnaWQnLCBvcmdEYXRhLnN1YnNjcmlwdGlvbl9wbGFuX2lkKVxyXG4gICAgICAgICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICAgICAgZGVtb1BsYW4gPSBwbGFuRGF0YTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVHJ5IHRvIGZpbmQgZGVtbyByb2xlc1xyXG4gICAgICAgIGxldCBkZW1vUm9sZXM6IFJvbGVbXSA9IFtdO1xyXG4gICAgICAgIGlmIChkZW1vVXNlcikge1xyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiB1c2VyUG9saWNpZXMgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgIC5mcm9tKCd1c2VyX3BvbGljaWVzJylcclxuICAgICAgICAgICAgLnNlbGVjdCgncG9saWN5X2lkLCBwZXJtaXNzaW9uX3BvbGljaWVzKGlkLCBwb2xpY3lfbmFtZSwgZGVzY3JpcHRpb24pJylcclxuICAgICAgICAgICAgLmVxKCd1c2VyX2lkJywgZGVtb1VzZXIuaWQpO1xyXG4gICAgICAgICAgZGVtb1JvbGVzID0gKHVzZXJQb2xpY2llcyB8fCBbXSkubWFwKCh1cDogYW55KSA9PiAoe1xyXG4gICAgICAgICAgICBpZDogdXAucGVybWlzc2lvbl9wb2xpY2llcy5pZCxcclxuICAgICAgICAgICAgbmFtZTogdXAucGVybWlzc2lvbl9wb2xpY2llcy5wb2xpY3lfbmFtZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHVwLnBlcm1pc3Npb25fcG9saWNpZXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNldCBjb250ZXh0IHN0YXRlIGZyb20gZGF0YWJhc2VcclxuICAgICAgICBpZiAoZGVtb1VzZXIpIHtcclxuICAgICAgICAgIC8vIENvbnZlcnQgZGF0YWJhc2UgdXNlciB0byBTdXBhYmFzZSBVc2VyIGZvcm1hdFxyXG4gICAgICAgICAgY29uc3Qgc3VwYWJhc2VVc2VyID0ge1xyXG4gICAgICAgICAgICAuLi5kZW1vVXNlcixcclxuICAgICAgICAgICAgYXBwX21ldGFkYXRhOiB7fSxcclxuICAgICAgICAgICAgdXNlcl9tZXRhZGF0YToge30sXHJcbiAgICAgICAgICAgIGF1ZDogJ2F1dGhlbnRpY2F0ZWQnXHJcbiAgICAgICAgICB9IGFzIGFueTtcclxuICAgICAgICAgIHNldFVzZXIoc3VwYWJhc2VVc2VyKTtcclxuICAgICAgICAgIHNldFVzZXJQcm9maWxlKGRlbW9Vc2VyKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQWx3YXlzIGVuc3VyZSBkZW1vIG9yZyB3aXRoIHN1YnNjcmlwdGlvbiBwbGFuIGV4aXN0c1xyXG4gICAgICAgICAgY29uc3QgZW5zdXJlZERlbW9PcmcgPSBkZW1vT3JnICYmIGRlbW9QbGFuID8gXHJcbiAgICAgICAgICAgIHsgaWQ6IGRlbW9PcmcuaWQsIG5hbWU6IGRlbW9PcmcubmFtZSwgc3Vic2NyaXB0aW9uUGxhbjogZGVtb1BsYW4gfSA6XHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgLy8gVXNlIGNvbmZpZ3VyYWJsZSBkZW1vIG9yZ2FuaXphdGlvbiBmb3IgZGF0YWJhc2UgdXNlcnMgdG9vXHJcbiAgICAgICAgICAgICAgY29uc3QgZGVtb0NvbmZpZyA9IGdldERlbW9Db25maWcoKTtcclxuICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25QbGFuID0gY3JlYXRlRGVtb1N1YnNjcmlwdGlvblBsYW4oZGVtb0NvbmZpZyk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGlkOiBgJHtkZW1vVXNlci5pZH0tb3JnYCwgXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBkZW1vQ29uZmlnLm9yZ05hbWUsIFxyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uUGxhbiBcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnRGVtbyBvcmcgYmVpbmcgc2V0IGZvciBkYXRhYmFzZSB1c2VyOicsIGVuc3VyZWREZW1vT3JnKTtcclxuICAgICAgICAgIHNldE9yZyhlbnN1cmVkRGVtb09yZyk7XHJcbiAgICAgICAgICBzZXRSb2xlcyhkZW1vUm9sZXMubGVuZ3RoID4gMCA/IGRlbW9Sb2xlcyA6IFtcclxuICAgICAgICAgICAgeyBpZDogJzEnLCBuYW1lOiAnYWNjb3VudF9vd25lcicsIGRlc2NyaXB0aW9uOiAnRnVsbCBhZG1pbmlzdHJhdGl2ZSBhY2Nlc3MnIH0sXHJcbiAgICAgICAgICAgIHsgaWQ6ICcyJywgbmFtZTogJ29yZ19hZG1pbicsIGRlc2NyaXB0aW9uOiAnT3JnYW5pemF0aW9uIG1hbmFnZW1lbnQnIH1cclxuICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgLy8gTG9hZCBkZW1vIGF2YXRhcnNcclxuICAgICAgICAgIGF3YWl0IGxvYWRBdmF0YXJzKGRlbW9Vc2VyLmlkKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcclxuICAgICAgICBsb2dnZXIud2FybignRGF0YWJhc2UgZGVtbyB1c2VyIG5vdCBmb3VuZCwgdXNpbmcgaGFyZGNvZGVkIGZhbGxiYWNrOicsIGRiRXJyb3IpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdEZW1vIG1vZGUgZmFsbGJhY2sgdHJpZ2dlcmVkOicsIGRiRXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBGYWxsYmFjayB0byBjb25maWd1cmFibGUgZGVtbyBjb250ZXh0XHJcbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyQ29udGV4dDogQ3JlYXRpbmcgZGVtbyB1c2VyIGZyb20gY29uZmlndXJhdGlvbicpO1xyXG4gICAgICBcclxuICAgICAgLy8gR2V0IGRlbW8gY29uZmlndXJhdGlvbiAoY2FuIGJlIGNvbnRyb2xsZWQgdmlhIGVudmlyb25tZW50IHZhcmlhYmxlcyBvciBsb2NhbFN0b3JhZ2UpXHJcbiAgICAgIGNvbnN0IGRlbW9Db25maWcgPSBnZXREZW1vQ29uZmlnKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdEZW1vIGNvbmZpZ3VyYXRpb24gbG9hZGVkOicsIGRlbW9Db25maWcpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ3JlYXRlIGRlbW8gdXNlclxyXG4gICAgICBjb25zdCBkZW1vVXNlciA9IHsgaWQ6IGRlbW9Db25maWcuaWQsIGVtYWlsOiBkZW1vQ29uZmlnLmVtYWlsLCBuYW1lOiBkZW1vQ29uZmlnLm5hbWUgfSBhcyBhbnk7XHJcbiAgICAgIHNldFVzZXIoZGVtb1VzZXIpO1xyXG4gICAgICBzZXRVc2VyUHJvZmlsZSh7IFxyXG4gICAgICAgIGlkOiBkZW1vQ29uZmlnLmlkLCBcclxuICAgICAgICBlbWFpbDogZGVtb0NvbmZpZy5lbWFpbCwgXHJcbiAgICAgICAgbmFtZTogZGVtb0NvbmZpZy5uYW1lLFxyXG4gICAgICAgIG9yZ19pZDogYCR7ZGVtb0NvbmZpZy5pZH0tb3JnYCBcclxuICAgICAgfSBhcyBhbnkpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ3JlYXRlIGRlbW8gb3JnYW5pemF0aW9uIHdpdGggYXBwcm9wcmlhdGUgc3Vic2NyaXB0aW9uIHBsYW5cclxuICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uUGxhbiA9IGNyZWF0ZURlbW9TdWJzY3JpcHRpb25QbGFuKGRlbW9Db25maWcpO1xyXG4gICAgICBjb25zdCBkZW1vT3JnID0geyBcclxuICAgICAgICBpZDogYCR7ZGVtb0NvbmZpZy5pZH0tb3JnYCwgXHJcbiAgICAgICAgbmFtZTogZGVtb0NvbmZpZy5vcmdOYW1lLCBcclxuICAgICAgICBzdWJzY3JpcHRpb25QbGFuIFxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgbG9nZ2VyLmluZm8oYFNldHRpbmcgZGVtbyBvcmcgZm9yICR7ZGVtb0NvbmZpZy50aWVyfSB0aWVyOmAsIGRlbW9PcmcpO1xyXG4gICAgICBzZXRPcmcoZGVtb09yZyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdEZW1vIG9yZyBzZXQ6JywgZGVtb09yZyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDcmVhdGUgZGVtbyByb2xlcyBiYXNlZCBvbiBjb25maWd1cmF0aW9uXHJcbiAgICAgIGNvbnN0IGRlbW9Sb2xlcyA9IGNyZWF0ZURlbW9Sb2xlcyhkZW1vQ29uZmlnKTtcclxuICAgICAgc2V0Um9sZXMoZGVtb1JvbGVzKTtcclxuICAgICAgY29uc29sZS5sb2coJ0RlbW8gcm9sZXMgc2V0OicsIGRlbW9Sb2xlcyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDcmVhdGUgZGVtbyBhdmF0YXJzIGJhc2VkIG9uIGNvbmZpZ3VyYXRpb25cclxuICAgICAgY29uc3QgZGVtb0F2YXRhcnMgPSBjcmVhdGVEZW1vQXZhdGFycyhkZW1vQ29uZmlnKTtcclxuICAgICAgc2V0QXZhdGFycyhkZW1vQXZhdGFycyk7XHJcbiAgICAgIGlmIChkZW1vQXZhdGFycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgc2V0Q3VycmVudEF2YXRhcihkZW1vQXZhdGFyc1swXSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc29sZS5sb2coYERlbW8gYXZhdGFycyBjcmVhdGVkOiAke2RlbW9BdmF0YXJzLmxlbmd0aH1gKTtcclxuICAgICAgXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBpbiBkZW1vIHVzZXIgY29udGV4dDonLCBlcnIpO1xyXG4gICAgICBzZXRFcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgZGVtbyBtb2RlJyk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICAvLyBDb21wbGV0ZSBhbGwgbG9hZGluZyBzdGF0ZXMgZm9yIGRlbW8gbW9kZVxyXG4gICAgICBjb25zb2xlLmxvZygnRGVtbyBtb2RlIGluaXRpYWxpemF0aW9uIGNvbXBsZXRlLCB1cGRhdGluZyBsb2FkaW5nIHN0YXRlcycpO1xyXG4gICAgICB1cGRhdGVMb2FkaW5nU3RhdGUoeyB1c2VyOiBmYWxzZSwgcm9sZXM6IGZhbHNlLCBhdmF0YXJzOiBmYWxzZSB9KTtcclxuICAgIH1cclxuICB9LCBbc3VwYWJhc2UsIGxvYWRBdmF0YXJzLCB1cGRhdGVMb2FkaW5nU3RhdGVdKTtcclxuXHJcbiAgLy8gTWFpbiB1c2VyIGxvYWRpbmcgZWZmZWN0XHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGxvYWRVc2VyID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHVwZGF0ZUxvYWRpbmdTdGF0ZSh7IHVzZXI6IHRydWUgfSk7XHJcbiAgICAgICAgc2V0RXJyb3IobnVsbCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiB7IHNlc3Npb24gfSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XHJcbiAgICAgICAgaWYgKHNlc3Npb24/LnVzZXIpIHtcclxuICAgICAgICAgIC8vIFJlYWwgdXNlciBhdXRoZW50aWNhdGlvblxyXG4gICAgICAgICAgc2V0VXNlcihzZXNzaW9uLnVzZXIpO1xyXG4gICAgICAgICAgdXBkYXRlTG9hZGluZ1N0YXRlKHsgdXNlcjogZmFsc2UgfSk7XHJcbiAgICAgICAgICBhd2FpdCBsb2FkVXNlclByb2ZpbGUoc2Vzc2lvbi51c2VyLmlkKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gTG9hZCByb2xlcyBhbmQgYXZhdGFycyBpbiBwYXJhbGxlbFxyXG4gICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICBmZXRjaFJvbGVzQW5kT3JnKHNlc3Npb24udXNlci5pZCksXHJcbiAgICAgICAgICAgIGxvYWRBdmF0YXJzKHNlc3Npb24udXNlci5pZClcclxuICAgICAgICAgIF0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBObyBzZXNzaW9uIC0gbG9hZCBkZW1vIG1vZGUgZm9yIGRldmVsb3BtZW50XHJcbiAgICAgICAgICBsb2dnZXIuaW5mbygnTm8gdXNlciBzZXNzaW9uIGZvdW5kLCBsb2FkaW5nIGRlbW8gbW9kZScpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1VzZXJDb250ZXh0OiBTdGFydGluZyBkZW1vIG1vZGUgbG9hZCcpO1xyXG4gICAgICAgICAgYXdhaXQgbG9hZERlbW9Vc2VyQ29udGV4dCgpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1VzZXJDb250ZXh0OiBEZW1vIG1vZGUgbG9hZCBjb21wbGV0ZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgbG9hZGluZyB1c2VyOicsIGVycik7XHJcbiAgICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHVzZXIgY29udGV4dC4nKTtcclxuICAgICAgICB1cGRhdGVMb2FkaW5nU3RhdGUoeyB1c2VyOiBmYWxzZSwgcm9sZXM6IGZhbHNlLCBhdmF0YXJzOiBmYWxzZSB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgbG9hZFVzZXIoKTtcclxuXHJcbiAgICAvLyBMaXN0ZW4gZm9yIGF1dGggY2hhbmdlc1xyXG4gICAgY29uc3QgeyBkYXRhOiB7IHN1YnNjcmlwdGlvbiB9IH0gPSBzdXBhYmFzZS5hdXRoLm9uQXV0aFN0YXRlQ2hhbmdlKGFzeW5jIChldmVudCwgc2Vzc2lvbikgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQgPT09ICdTSUdORURfSU4nICYmIHNlc3Npb24/LnVzZXIpIHtcclxuICAgICAgICBzZXRVc2VyKHNlc3Npb24udXNlcik7XHJcbiAgICAgICAgdXBkYXRlTG9hZGluZ1N0YXRlKHsgdXNlcjogZmFsc2UgfSk7XHJcbiAgICAgICAgYXdhaXQgbG9hZFVzZXJQcm9maWxlKHNlc3Npb24udXNlci5pZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTG9hZCByb2xlcyBhbmQgYXZhdGFycyBpbiBwYXJhbGxlbFxyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgIGZldGNoUm9sZXNBbmRPcmcoc2Vzc2lvbi51c2VyLmlkKSxcclxuICAgICAgICAgIGxvYWRBdmF0YXJzKHNlc3Npb24udXNlci5pZClcclxuICAgICAgICBdKTtcclxuICAgICAgfSBlbHNlIGlmIChldmVudCA9PT0gJ1NJR05FRF9PVVQnKSB7XHJcbiAgICAgICAgc2V0VXNlcihudWxsKTtcclxuICAgICAgICBzZXRVc2VyUHJvZmlsZShudWxsKTtcclxuICAgICAgICBzZXRBdmF0YXJzKFtdKTtcclxuICAgICAgICBzZXRDdXJyZW50QXZhdGFyKG51bGwpO1xyXG4gICAgICAgIHNldFJvbGVzKFtdKTtcclxuICAgICAgICBzZXRPcmcobnVsbCk7XHJcbiAgICAgICAgLy8gTG9hZCBkZW1vIHVzZXIgZm9yIGNvbnRpbnVlZCBkZXZlbG9wbWVudFxyXG4gICAgICAgIGF3YWl0IGxvYWREZW1vVXNlckNvbnRleHQoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICB9O1xyXG4gIH0sIFtsb2FkVXNlclByb2ZpbGUsIGxvYWREZW1vVXNlckNvbnRleHQsIHN1cGFiYXNlLmF1dGgsIGxvYWRBdmF0YXJzLCBmZXRjaFJvbGVzQW5kT3JnLCB1cGRhdGVMb2FkaW5nU3RhdGVdKTtcclxuXHJcbiAgLy8gVXRpbGl0eSBmdW5jdGlvbnNcclxuICBjb25zdCBoYXNSb2xlID0gdXNlQ2FsbGJhY2soKHJvbGVOYW1lOiBzdHJpbmcpID0+IHtcclxuICAgIC8vIE9ubHkgcmV0dXJuIHRydWUgaWYgd2UncmUgcmVhZHkgYW5kIGFjdHVhbGx5IGhhdmUgdGhlIHJvbGVcclxuICAgIHJldHVybiBsb2FkaW5nU3RhdGUuaXNSZWFkeSAmJiByb2xlcy5zb21lKHIgPT4gci5uYW1lID09PSByb2xlTmFtZSk7XHJcbiAgfSwgW3JvbGVzLCBsb2FkaW5nU3RhdGUuaXNSZWFkeV0pO1xyXG4gIFxyXG4gIGNvbnN0IGNhbkFjY2VzcyA9IHVzZUNhbGxiYWNrKChmZWF0dXJlOiBzdHJpbmcpID0+IHtcclxuICAgIC8vIE9ubHkgcmV0dXJuIHRydWUgaWYgd2UncmUgcmVhZHkgYW5kIGhhdmUgYWNjZXNzXHJcbiAgICBpZiAoIWxvYWRpbmdTdGF0ZS5pc1JlYWR5IHx8ICFvcmc/LnN1YnNjcmlwdGlvblBsYW4pIHJldHVybiBmYWxzZTtcclxuICAgIGNvbnN0IGZlYXR1cmVzID0gb3JnLnN1YnNjcmlwdGlvblBsYW4uZmVhdHVyZXNfaW5jbHVkZWQgfHwge307XHJcbiAgICByZXR1cm4gZmVhdHVyZXNbZmVhdHVyZV0gPT09IHRydWU7XHJcbiAgfSwgW29yZywgbG9hZGluZ1N0YXRlLmlzUmVhZHldKTtcclxuICBcclxuICBjb25zdCBnZXRUaWVyTGltaXQgPSB1c2VDYWxsYmFjaygoZmVhdHVyZTogc3RyaW5nKSA9PiB7XHJcbiAgICByZXR1cm4gb3JnPy5zdWJzY3JpcHRpb25QbGFuPy5bYCR7ZmVhdHVyZX1fbGltaXRgXTtcclxuICB9LCBbb3JnXSk7XHJcblxyXG4gIC8vIENyZWF0ZSBhIG5ldyBhdmF0YXIgd2l0aCBzdWJzY3JpcHRpb24gbGltaXQgY2hlY2tpbmdcclxuICBjb25zdCBjcmVhdGVBdmF0YXIgPSBhc3luYyAobmFtZTogc3RyaW5nKTogUHJvbWlzZTxBdmF0YXIgfCBudWxsPiA9PiB7XHJcbiAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgc2V0RXJyb3IoJ011c3QgYmUgbG9nZ2VkIGluIHRvIGNyZWF0ZSBhdmF0YXInKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgc3Vic2NyaXB0aW9uIGxpbWl0cyBiZWZvcmUgY3JlYXRpbmcgYXZhdGFyXHJcbiAgICBjb25zdCBjdXJyZW50QXZhdGFyc0NvdW50ID0gYXZhdGFycy5sZW5ndGg7XHJcbiAgICBpZiAob3JnPy5zdWJzY3JpcHRpb25QbGFuKSB7XHJcbiAgICAgIGNvbnN0IGF2YXRhckxpbWl0ID0gb3JnLnN1YnNjcmlwdGlvblBsYW4uYXZhdGFyX2xpbWl0IHx8IDU7XHJcbiAgICAgIGlmIChjdXJyZW50QXZhdGFyc0NvdW50ID49IGF2YXRhckxpbWl0KSB7XHJcbiAgICAgICAgY29uc3QgdGllck5hbWUgPSBvcmcuc3Vic2NyaXB0aW9uUGxhbi50aWVyIHx8ICdjdXJyZW50IHBsYW4nO1xyXG4gICAgICAgIHNldEVycm9yKGBBdmF0YXIgbGltaXQgcmVhY2hlZCAoJHtjdXJyZW50QXZhdGFyc0NvdW50fS8ke2F2YXRhckxpbWl0fSkuIFVwZ3JhZGUgeW91ciAke3RpZXJOYW1lfSB0byBjcmVhdGUgbW9yZSBhdmF0YXJzLmApO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgc2V0RXJyb3IobnVsbCk7XHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2F2YXRhcnMnKVxyXG4gICAgICAgIC5pbnNlcnQoe1xyXG4gICAgICAgICAgdXNlcl9pZDogdXNlci5pZCxcclxuICAgICAgICAgIG9yZ19pZDogb3JnPy5pZCB8fCBudWxsLFxyXG4gICAgICAgICAgbmFtZTogbmFtZS50cmltKCksXHJcbiAgICAgICAgICB0aGVtZV9zZXR0aW5nczoge30sXHJcbiAgICAgICAgICBnYW1lX3ByZWZlcmVuY2VzOiB7fVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnNlbGVjdCgpXHJcbiAgICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgICAgXHJcbiAgICAgIC8vIFJlZnJlc2ggYXZhdGFycyBsaXN0XHJcbiAgICAgIGF3YWl0IGxvYWRBdmF0YXJzKHVzZXIuaWQpO1xyXG4gICAgICBcclxuICAgICAgbG9nZ2VyLmluZm8oJ0F2YXRhciBjcmVhdGVkIHN1Y2Nlc3NmdWxseTonLCB7XHJcbiAgICAgICAgYXZhdGFySWQ6IGRhdGEuaWQsXHJcbiAgICAgICAgYXZhdGFyTmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGN1cnJlbnRDb3VudDogY3VycmVudEF2YXRhcnNDb3VudCArIDEsXHJcbiAgICAgICAgdGllcjogb3JnPy5zdWJzY3JpcHRpb25QbGFuPy50aWVyXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBjcmVhdGluZyBhdmF0YXI6JywgZXJyKTtcclxuICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gY3JlYXRlIGF2YXRhcicpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBSZWZyZXNoIGF2YXRhcnMgZnJvbSBkYXRhYmFzZVxyXG4gIGNvbnN0IHJlZnJlc2hBdmF0YXJzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKHVzZXIpIHtcclxuICAgICAgYXdhaXQgbG9hZEF2YXRhcnModXNlci5pZCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gU2lnbiBvdXQgdGhlIGN1cnJlbnQgdXNlclxyXG4gIGNvbnN0IHNpZ25PdXQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25PdXQoKTtcclxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHNpZ25pbmcgb3V0OicsIGVycik7XHJcbiAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gc2lnbiBvdXQnKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBWaWV3IEFzIGZ1bmN0aW9uYWxpdHlcclxuICBjb25zdCBpc1ZpZXdBcyA9IHZpZXdBc1JvbGUgIT09IG51bGwgfHwgdmlld0FzQXZhdGFyICE9PSBudWxsO1xyXG4gIGNvbnN0IHJlc2V0Vmlld0FzID0gKCkgPT4ge1xyXG4gICAgc2V0Vmlld0FzUm9sZShudWxsKTtcclxuICAgIHNldFZpZXdBc0F2YXRhcihudWxsKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBjb250ZXh0VmFsdWU6IEV4dGVuZGVkVXNlckNvbnRleHRUeXBlID0ge1xyXG4gICAgdXNlcixcclxuICAgIHVzZXJQcm9maWxlLFxyXG4gICAgYXZhdGFycyxcclxuICAgIGN1cnJlbnRBdmF0YXIsXHJcbiAgICBsb2FkaW5nOiAhbG9hZGluZ1N0YXRlLmlzUmVhZHksIC8vIFNpbXBsaWZpZWQgbG9hZGluZyBzdGF0ZSBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxyXG4gICAgZXJyb3IsXHJcbiAgICBzZXRDdXJyZW50QXZhdGFyLFxyXG4gICAgY3JlYXRlQXZhdGFyLFxyXG4gICAgcmVmcmVzaEF2YXRhcnMsXHJcbiAgICBzaWduT3V0LFxyXG4gICAgcm9sZXMsXHJcbiAgICBvcmcsXHJcbiAgICBoYXNSb2xlLFxyXG4gICAgY2FuQWNjZXNzLFxyXG4gICAgZ2V0VGllckxpbWl0LFxyXG4gICAgdmlld0FzUm9sZSxcclxuICAgIHZpZXdBc0F2YXRhcixcclxuICAgIGlzVmlld0FzLFxyXG4gICAgc2V0Vmlld0FzUm9sZSxcclxuICAgIHNldFZpZXdBc0F2YXRhcixcclxuICAgIHJlc2V0Vmlld0FzLFxyXG4gICAgbG9hZGluZ1N0YXRlLCAvLyBOZXc6IGRldGFpbGVkIGxvYWRpbmcgc3RhdGVcclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFVzZXJDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjb250ZXh0VmFsdWV9PlxyXG4gICAgICB7ZGVtb01vZGUgJiYgKFxyXG4gICAgICAgIDxCb3ggc3g9e3sgYmdjb2xvcjogJ3dhcm5pbmcubWFpbicsIGNvbG9yOiAnYmxhY2snLCBwOiAxLCB0ZXh0QWxpZ246ICdjZW50ZXInIH19PlxyXG4gICAgICAgICAgPGI+RGVtbyBNb2RlOjwvYj4gWW91IGFyZSB1c2luZyBhIGRlbW8gdXNlciBjb250ZXh0LiBGZWF0dXJlcyBtYXkgYmUgc2ltdWxhdGVkLlxyXG4gICAgICAgIDwvQm94PlxyXG4gICAgICApfVxyXG4gICAgICB7Y2hpbGRyZW59XHJcbiAgICA8L1VzZXJDb250ZXh0LlByb3ZpZGVyPlxyXG4gICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIb29rIHRvIGFjY2VzcyB1c2VyIGNvbnRleHRcclxuICogUHJvdmlkZXMgdXNlciBhdXRoZW50aWNhdGlvbiBzdGF0ZSBhbmQgYXZhdGFyIG1hbmFnZW1lbnRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VVc2VyKCk6IEV4dGVuZGVkVXNlckNvbnRleHRUeXBlIHtcclxuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChVc2VyQ29udGV4dCk7XHJcbiAgaWYgKGNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VVc2VyIG11c3QgYmUgdXNlZCB3aXRoaW4gYSBVc2VyUHJvdmlkZXInKTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbnRleHQgYXMgRXh0ZW5kZWRVc2VyQ29udGV4dFR5cGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIb29rIHNwZWNpZmljYWxseSBmb3IgYXZhdGFyIGNvbnRleHRcclxuICogQ29udmVuaWVuY2UgaG9vayBmb3IgY29tcG9uZW50cyB0aGF0IG9ubHkgbmVlZCBhdmF0YXIgaW5mb3JtYXRpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VBdmF0YXIoKSB7XHJcbiAgY29uc3QgeyBjdXJyZW50QXZhdGFyLCBhdmF0YXJzLCBzZXRDdXJyZW50QXZhdGFyLCBjcmVhdGVBdmF0YXIgfSA9IHVzZVVzZXIoKTtcclxuICByZXR1cm4ge1xyXG4gICAgY3VycmVudEF2YXRhcixcclxuICAgIGF2YXRhcnMsXHJcbiAgICBzZXRDdXJyZW50QXZhdGFyLFxyXG4gICAgY3JlYXRlQXZhdGFyXHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhvb2sgZm9yIHJvbGUtYmFzZWQgcmVuZGVyaW5nIHdpdGggbG9hZGluZyBzYWZldHlcclxuICogT25seSByZXR1cm5zIHRydWUgZm9yIHJvbGVzIHdoZW4gdGhlIHVzZXIgY29udGV4dCBpcyBmdWxseSBsb2FkZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VSb2xlR3VhcmQoKSB7XHJcbiAgY29uc3QgeyBoYXNSb2xlLCBsb2FkaW5nU3RhdGUsIHJvbGVzIH0gPSB1c2VVc2VyKCk7XHJcbiAgXHJcbiAgY29uc3QgaXNSZWFkeSA9IGxvYWRpbmdTdGF0ZS5pc1JlYWR5O1xyXG4gIFxyXG4gIGNvbnN0IGd1YXJkZWRIYXNSb2xlID0gdXNlQ2FsbGJhY2soKHJvbGVOYW1lOiBzdHJpbmcpID0+IHtcclxuICAgIHJldHVybiBpc1JlYWR5ICYmIGhhc1JvbGUocm9sZU5hbWUpO1xyXG4gIH0sIFtpc1JlYWR5LCBoYXNSb2xlXSk7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGhhc1JvbGU6IGd1YXJkZWRIYXNSb2xlLFxyXG4gICAgaXNSZWFkeSxcclxuICAgIHJvbGVzOiBpc1JlYWR5ID8gcm9sZXMgOiBbXVxyXG4gIH07XHJcbn0gIl0sIm5hbWVzIjpbIlVzZXJQcm92aWRlciIsInVzZUF2YXRhciIsInVzZVJvbGVHdWFyZCIsInVzZVVzZXIiLCJVc2VyQ29udGV4dCIsImNyZWF0ZUNvbnRleHQiLCJ1bmRlZmluZWQiLCJjaGlsZHJlbiIsInVzZXIiLCJzZXRVc2VyIiwidXNlU3RhdGUiLCJ1c2VyUHJvZmlsZSIsInNldFVzZXJQcm9maWxlIiwiYXZhdGFycyIsInNldEF2YXRhcnMiLCJjdXJyZW50QXZhdGFyIiwic2V0Q3VycmVudEF2YXRhciIsImVycm9yIiwic2V0RXJyb3IiLCJyb2xlcyIsInNldFJvbGVzIiwib3JnIiwic2V0T3JnIiwicm91dGVyIiwidXNlUm91dGVyIiwiZGVtb01vZGUiLCJzZXREZW1vTW9kZSIsInZpZXdBc1JvbGUiLCJzZXRWaWV3QXNSb2xlIiwidmlld0FzQXZhdGFyIiwic2V0Vmlld0FzQXZhdGFyIiwibG9hZGluZ1N0YXRlIiwic2V0TG9hZGluZ1N0YXRlIiwiaXNSZWFkeSIsInN1cGFiYXNlIiwiY3JlYXRlQ2xpZW50IiwidXBkYXRlTG9hZGluZ1N0YXRlIiwidXNlQ2FsbGJhY2siLCJ1cGRhdGVzIiwicHJldiIsIm5ld1N0YXRlIiwiY29uc29sZSIsImxvZyIsImxvYWRVc2VyUHJvZmlsZSIsInVzZXJJZCIsImxvZ2dlciIsImRlYnVnIiwiZGF0YSIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsImVyciIsImxvYWRBdmF0YXJzIiwib3JkZXIiLCJhc2NlbmRpbmciLCJsZW5ndGgiLCJmZXRjaFJvbGVzQW5kT3JnIiwidXNlclByb2ZpbGVEYXRhIiwidXNlclByb2ZpbGVFcnJvciIsIm9yZ0lkIiwib3JnX2lkIiwib3JnSW5mbyIsIm9yZ0RhdGEiLCJvcmdFcnJvciIsInN1YnNjcmlwdGlvblBsYW4iLCJzdWJzY3JpcHRpb25fcGxhbl9pZCIsInBsYW5EYXRhIiwicGxhbkVycm9yIiwiaWQiLCJuYW1lIiwidXNlclBvbGljaWVzIiwidXNlclBvbGljaWVzRXJyb3IiLCJ1c2VyUm9sZXMiLCJtYXAiLCJ1cCIsInBlcm1pc3Npb25fcG9saWNpZXMiLCJwb2xpY3lfbmFtZSIsImRlc2NyaXB0aW9uIiwibG9hZERlbW9Vc2VyQ29udGV4dCIsImRlbW9Vc2VycyIsImlsaWtlIiwiZGVtb1VzZXIiLCJkZW1vT3JnIiwiZGVtb1BsYW4iLCJkZW1vUm9sZXMiLCJzdXBhYmFzZVVzZXIiLCJhcHBfbWV0YWRhdGEiLCJ1c2VyX21ldGFkYXRhIiwiYXVkIiwiZW5zdXJlZERlbW9PcmciLCJkZW1vQ29uZmlnIiwiZ2V0RGVtb0NvbmZpZyIsImNyZWF0ZURlbW9TdWJzY3JpcHRpb25QbGFuIiwib3JnTmFtZSIsImRiRXJyb3IiLCJ3YXJuIiwiZW1haWwiLCJpbmZvIiwidGllciIsImNyZWF0ZURlbW9Sb2xlcyIsImRlbW9BdmF0YXJzIiwiY3JlYXRlRGVtb0F2YXRhcnMiLCJ1c2VFZmZlY3QiLCJsb2FkVXNlciIsInNlc3Npb24iLCJhdXRoIiwiZ2V0U2Vzc2lvbiIsIlByb21pc2UiLCJhbGwiLCJzdWJzY3JpcHRpb24iLCJvbkF1dGhTdGF0ZUNoYW5nZSIsImV2ZW50IiwidW5zdWJzY3JpYmUiLCJoYXNSb2xlIiwicm9sZU5hbWUiLCJzb21lIiwiciIsImNhbkFjY2VzcyIsImZlYXR1cmUiLCJmZWF0dXJlcyIsImZlYXR1cmVzX2luY2x1ZGVkIiwiZ2V0VGllckxpbWl0IiwiY3JlYXRlQXZhdGFyIiwiY3VycmVudEF2YXRhcnNDb3VudCIsImF2YXRhckxpbWl0IiwiYXZhdGFyX2xpbWl0IiwidGllck5hbWUiLCJpbnNlcnQiLCJ1c2VyX2lkIiwidHJpbSIsInRoZW1lX3NldHRpbmdzIiwiZ2FtZV9wcmVmZXJlbmNlcyIsImF2YXRhcklkIiwiYXZhdGFyTmFtZSIsImN1cnJlbnRDb3VudCIsIkVycm9yIiwibWVzc2FnZSIsInJlZnJlc2hBdmF0YXJzIiwic2lnbk91dCIsImlzVmlld0FzIiwicmVzZXRWaWV3QXMiLCJjb250ZXh0VmFsdWUiLCJsb2FkaW5nIiwiUHJvdmlkZXIiLCJ2YWx1ZSIsIkJveCIsInN4IiwiYmdjb2xvciIsImNvbG9yIiwicCIsInRleHRBbGlnbiIsImIiLCJjb250ZXh0IiwidXNlQ29udGV4dCIsImd1YXJkZWRIYXNSb2xlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O0lBdUdnQkEsWUFBWTtlQUFaQTs7SUFnZ0JBQyxTQUFTO2VBQVRBOztJQWNBQyxZQUFZO2VBQVpBOztJQTFCQUMsT0FBTztlQUFQQTs7OzsrREF6bEI4RTt3QkFDakU7d0JBR047NEJBQ0c7MEJBQ047NEJBTWI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQThFUCxNQUFNQyw0QkFBY0MsSUFBQUEsb0JBQWEsRUFBOEJDO0FBV3hELFNBQVNOLGFBQWEsRUFBRU8sUUFBUSxFQUEyQjtJQUNoRSxNQUFNLENBQUNDLE1BQU1DLFFBQVEsR0FBR0MsSUFBQUEsZUFBUSxFQUFjO0lBQzlDLE1BQU0sQ0FBQ0MsYUFBYUMsZUFBZSxHQUFHRixJQUFBQSxlQUFRLEVBQXFCO0lBQ25FLE1BQU0sQ0FBQ0csU0FBU0MsV0FBVyxHQUFHSixJQUFBQSxlQUFRLEVBQVcsRUFBRTtJQUNuRCxNQUFNLENBQUNLLGVBQWVDLGlCQUFp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