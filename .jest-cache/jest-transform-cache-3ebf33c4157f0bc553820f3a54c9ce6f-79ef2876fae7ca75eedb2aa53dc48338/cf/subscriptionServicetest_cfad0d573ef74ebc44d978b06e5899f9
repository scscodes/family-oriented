36514beea50c7242a895460a08e7e594
/**
 * Tests for enhanced SubscriptionService
 * Validates tier transitions, usage limits, and plan comparisons
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _subscriptionService = require("../subscriptionService");
// Mock subscription plans for testing
const mockPersonalPlan = {
    id: 'personal',
    tier: 'personal',
    avatar_limit: 3,
    active: true,
    created_at: '2025-01-01',
    addon_discount_percent: null,
    base_price: 9.99,
    basic_themes_included: true,
    custom_branding_included: false,
    data_retention_months: 12,
    priority_support: false,
    sessions_limit: 100
};
const mockProfessionalPlan = {
    id: 'professional',
    tier: 'professional',
    avatar_limit: 10,
    active: true,
    created_at: '2025-01-01',
    addon_discount_percent: 10,
    base_price: 19.99,
    basic_themes_included: true,
    custom_branding_included: true,
    data_retention_months: 24,
    priority_support: true,
    sessions_limit: 500
};
const mockUsageData = {
    avatarsCount: 2,
    collectionsCount: 5,
    sessionsThisMonth: 25,
    dataRetentionMonths: 12
};
describe('SubscriptionService Enhanced Features', ()=>{
    describe('Tier Transition Analysis', ()=>{
        test('should analyze upgrade from personal to professional', ()=>{
            const analysis = _subscriptionService.SubscriptionService.analyzeTierTransition('personal', 'professional', mockUsageData);
            expect(analysis.isUpgrade).toBe(true);
            expect(analysis.canTransition).toBe(true);
            expect(analysis.costImpact.monthlyDifference).toBeGreaterThan(0);
            expect(analysis.featureChanges.gained.length).toBeGreaterThan(0);
            expect(analysis.warnings).toHaveLength(0);
        });
        test('should identify downgrade risks', ()=>{
            const highUsageData = {
                avatarsCount: 8,
                collectionsCount: 15,
                sessionsThisMonth: 200,
                dataRetentionMonths: 24
            };
            const analysis = _subscriptionService.SubscriptionService.analyzeTierTransition('professional', 'personal', highUsageData);
            expect(analysis.isUpgrade).toBe(false);
            expect(analysis.canTransition).toBe(false);
            expect(analysis.warnings.length).toBeGreaterThan(0);
            expect(analysis.featureChanges.lost.length).toBeGreaterThan(0);
        });
        test('should calculate proration correctly', ()=>{
            const analysis = _subscriptionService.SubscriptionService.analyzeTierTransition('personal', 'professional', mockUsageData);
            expect(analysis.costImpact.prorationAmount).toBeDefined();
            expect(analysis.costImpact.prorationDescription).toContain('billing cycle');
        });
    });
    describe('Plan Comparison', ()=>{
        test('should generate comprehensive plan comparison', ()=>{
            const comparison = _subscriptionService.SubscriptionService.getPlanComparison();
            expect(comparison.personal).toBeDefined();
            expect(comparison.professional).toBeDefined();
            expect(comparison.enterprise).toBeDefined();
            // Check that professional has more features than personal
            expect(comparison.professional.features.length).toBeGreaterThan(comparison.personal.features.length);
            // Check price progression
            expect(comparison.professional.price).toBeGreaterThan(comparison.personal.price);
            expect(comparison.enterprise.price).toBeGreaterThan(comparison.professional.price);
        });
    });
    describe('Available Transitions', ()=>{
        test('should return correct upgrade/downgrade options for personal tier', ()=>{
            const transitions = _subscriptionService.SubscriptionService.getAvailableTransitions('personal');
            expect(transitions.upgrades).toContain('professional');
            expect(transitions.upgrades).toContain('enterprise');
            expect(transitions.downgrades).toHaveLength(0);
        });
        test('should return correct options for professional tier', ()=>{
            const transitions = _subscriptionService.SubscriptionService.getAvailableTransitions('professional');
            expect(transitions.upgrades).toContain('enterprise');
            expect(transitions.downgrades).toContain('personal');
        });
        test('should return only downgrades for enterprise tier', ()=>{
            const transitions = _subscriptionService.SubscriptionService.getAvailableTransitions('enterprise');
            expect(transitions.upgrades).toHaveLength(0);
            expect(transitions.downgrades).toContain('professional');
            expect(transitions.downgrades).toContain('personal');
        });
    });
    describe('Usage Validation', ()=>{
        test('should allow avatar creation within limits', ()=>{
            const result = _subscriptionService.SubscriptionService.canCreateAvatar(mockPersonalPlan, 2);
            expect(result.allowed).toBe(true);
            expect(result.reason).toBeUndefined();
        });
        test('should block avatar creation at limit', ()=>{
            const result = _subscriptionService.SubscriptionService.canCreateAvatar(mockPersonalPlan, 3);
            expect(result.allowed).toBe(false);
            expect(result.reason).toContain('limit');
            expect(result.upgradeRequired).toBe('professional');
        });
        test('should validate tier transitions against usage', ()=>{
            const highUsageData = {
                avatarsCount: 5,
                collectionsCount: 15,
                sessionsThisMonth: 200,
                dataRetentionMonths: 24
            };
            const validation = _subscriptionService.SubscriptionService.validateTierTransition('professional', 'personal', highUsageData);
            expect(validation.valid).toBe(false);
            expect(validation.reasons.length).toBeGreaterThan(0);
        });
    });
    describe('Feature Access Control', ()=>{
        test('should grant analytics access for professional plan', ()=>{
            const result = _subscriptionService.SubscriptionService.canAccessFeature(mockProfessionalPlan, 'analytics');
            expect(result.allowed).toBe(true);
        });
        test('should deny user management for personal plan', ()=>{
            const result = _subscriptionService.SubscriptionService.canAccessFeature(mockPersonalPlan, 'user_management');
            expect(result.allowed).toBe(false);
            expect(result.upgradeRequired).toBe('professional');
        });
        test('should return correct available features for each tier', ()=>{
            const personalFeatures = _subscriptionService.SubscriptionService.getAvailableFeatures(mockPersonalPlan);
            const professionalFeatures = _subscriptionService.SubscriptionService.getAvailableFeatures(mockProfessionalPlan);
            expect(personalFeatures).not.toContain('user_management');
            expect(professionalFeatures).toContain('user_management');
            expect(professionalFeatures).toContain('analytics');
        });
    });
    describe('Error Handling', ()=>{
        test('should handle invalid tier transitions gracefully', ()=>{
            expect(()=>{
                _subscriptionService.SubscriptionService.analyzeTierTransition('invalid', 'professional', mockUsageData);
            }).not.toThrow();
        });
        test('should handle null subscription plans', ()=>{
            const result = _subscriptionService.SubscriptionService.canAccessFeature(null, 'analytics');
            expect(result.allowed).toBe(false);
            expect(result.reason).toContain('subscription plan');
        });
    });
    describe('Usage Summary', ()=>{
        test('should generate complete usage summary', ()=>{
            const summary = _subscriptionService.SubscriptionService.getUsageSummary(mockPersonalPlan, mockUsageData);
            expect(summary.avatars).toBeDefined();
            expect(summary.collections_per_avatar).toBeDefined();
            expect(summary.sessions_per_month).toBeDefined();
            expect(summary.data_retention_months).toBeDefined();
            // Should show green status for within limits
            expect(summary.avatars.allowed).toBe(true);
        });
        test('should identify over-limit usage in summary', ()=>{
            const overLimitUsage = {
                avatarsCount: 5,
                collectionsCount: 25,
                sessionsThisMonth: 150,
                dataRetentionMonths: 18
            };
            const summary = _subscriptionService.SubscriptionService.getUsageSummary(mockPersonalPlan, overLimitUsage);
            // Should show red status for over limits
            expect(summary.avatars.allowed).toBe(false);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0c1xcZmFtaWx5LW9yaWVudGVkXFxzcmNcXHV0aWxzXFxfX3Rlc3RzX19cXHN1YnNjcmlwdGlvblNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGVzdHMgZm9yIGVuaGFuY2VkIFN1YnNjcmlwdGlvblNlcnZpY2VcclxuICogVmFsaWRhdGVzIHRpZXIgdHJhbnNpdGlvbnMsIHVzYWdlIGxpbWl0cywgYW5kIHBsYW4gY29tcGFyaXNvbnNcclxuICovXHJcblxyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb25TZXJ2aWNlLCB0eXBlIFN1YnNjcmlwdGlvblRpZXIsIHR5cGUgVXNhZ2VEYXRhIH0gZnJvbSAnLi4vc3Vic2NyaXB0aW9uU2VydmljZSc7XHJcblxyXG4vLyBNb2NrIHN1YnNjcmlwdGlvbiBwbGFucyBmb3IgdGVzdGluZ1xyXG5jb25zdCBtb2NrUGVyc29uYWxQbGFuID0ge1xyXG4gIGlkOiAncGVyc29uYWwnLFxyXG4gIHRpZXI6ICdwZXJzb25hbCcsXHJcbiAgYXZhdGFyX2xpbWl0OiAzLFxyXG4gIGFjdGl2ZTogdHJ1ZSxcclxuICBjcmVhdGVkX2F0OiAnMjAyNS0wMS0wMScsXHJcbiAgYWRkb25fZGlzY291bnRfcGVyY2VudDogbnVsbCxcclxuICBiYXNlX3ByaWNlOiA5Ljk5LFxyXG4gIGJhc2ljX3RoZW1lc19pbmNsdWRlZDogdHJ1ZSxcclxuICBjdXN0b21fYnJhbmRpbmdfaW5jbHVkZWQ6IGZhbHNlLFxyXG4gIGRhdGFfcmV0ZW50aW9uX21vbnRoczogMTIsXHJcbiAgcHJpb3JpdHlfc3VwcG9ydDogZmFsc2UsXHJcbiAgc2Vzc2lvbnNfbGltaXQ6IDEwMFxyXG59O1xyXG5cclxuY29uc3QgbW9ja1Byb2Zlc3Npb25hbFBsYW4gPSB7XHJcbiAgaWQ6ICdwcm9mZXNzaW9uYWwnLFxyXG4gIHRpZXI6ICdwcm9mZXNzaW9uYWwnLFxyXG4gIGF2YXRhcl9saW1pdDogMTAsXHJcbiAgYWN0aXZlOiB0cnVlLFxyXG4gIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTAxJyxcclxuICBhZGRvbl9kaXNjb3VudF9wZXJjZW50OiAxMCxcclxuICBiYXNlX3ByaWNlOiAxOS45OSxcclxuICBiYXNpY190aGVtZXNfaW5jbHVkZWQ6IHRydWUsXHJcbiAgY3VzdG9tX2JyYW5kaW5nX2luY2x1ZGVkOiB0cnVlLFxyXG4gIGRhdGFfcmV0ZW50aW9uX21vbnRoczogMjQsXHJcbiAgcHJpb3JpdHlfc3VwcG9ydDogdHJ1ZSxcclxuICBzZXNzaW9uc19saW1pdDogNTAwXHJcbn07XHJcblxyXG5jb25zdCBtb2NrVXNhZ2VEYXRhOiBVc2FnZURhdGEgPSB7XHJcbiAgYXZhdGFyc0NvdW50OiAyLFxyXG4gIGNvbGxlY3Rpb25zQ291bnQ6IDUsXHJcbiAgc2Vzc2lvbnNUaGlzTW9udGg6IDI1LFxyXG4gIGRhdGFSZXRlbnRpb25Nb250aHM6IDEyXHJcbn07XHJcblxyXG5kZXNjcmliZSgnU3Vic2NyaXB0aW9uU2VydmljZSBFbmhhbmNlZCBGZWF0dXJlcycsICgpID0+IHtcclxuICBcclxuICBkZXNjcmliZSgnVGllciBUcmFuc2l0aW9uIEFuYWx5c2lzJywgKCkgPT4ge1xyXG4gICAgdGVzdCgnc2hvdWxkIGFuYWx5emUgdXBncmFkZSBmcm9tIHBlcnNvbmFsIHRvIHByb2Zlc3Npb25hbCcsICgpID0+IHtcclxuICAgICAgY29uc3QgYW5hbHlzaXMgPSBTdWJzY3JpcHRpb25TZXJ2aWNlLmFuYWx5emVUaWVyVHJhbnNpdGlvbihcclxuICAgICAgICAncGVyc29uYWwnLFxyXG4gICAgICAgICdwcm9mZXNzaW9uYWwnLFxyXG4gICAgICAgIG1vY2tVc2FnZURhdGFcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChhbmFseXNpcy5pc1VwZ3JhZGUpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChhbmFseXNpcy5jYW5UcmFuc2l0aW9uKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QoYW5hbHlzaXMuY29zdEltcGFjdC5tb250aGx5RGlmZmVyZW5jZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICBleHBlY3QoYW5hbHlzaXMuZmVhdHVyZUNoYW5nZXMuZ2FpbmVkLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICBleHBlY3QoYW5hbHlzaXMud2FybmluZ3MpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCBpZGVudGlmeSBkb3duZ3JhZGUgcmlza3MnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGhpZ2hVc2FnZURhdGE6IFVzYWdlRGF0YSA9IHtcclxuICAgICAgICBhdmF0YXJzQ291bnQ6IDgsXHJcbiAgICAgICAgY29sbGVjdGlvbnNDb3VudDogMTUsXHJcbiAgICAgICAgc2Vzc2lvbnNUaGlzTW9udGg6IDIwMCxcclxuICAgICAgICBkYXRhUmV0ZW50aW9uTW9udGhzOiAyNFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgYW5hbHlzaXMgPSBTdWJzY3JpcHRpb25TZXJ2aWNlLmFuYWx5emVUaWVyVHJhbnNpdGlvbihcclxuICAgICAgICAncHJvZmVzc2lvbmFsJyxcclxuICAgICAgICAncGVyc29uYWwnLFxyXG4gICAgICAgIGhpZ2hVc2FnZURhdGFcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChhbmFseXNpcy5pc1VwZ3JhZGUpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QoYW5hbHlzaXMuY2FuVHJhbnNpdGlvbikudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChhbmFseXNpcy53YXJuaW5ncy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KGFuYWx5c2lzLmZlYXR1cmVDaGFuZ2VzLmxvc3QubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdzaG91bGQgY2FsY3VsYXRlIHByb3JhdGlvbiBjb3JyZWN0bHknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGFuYWx5c2lzID0gU3Vic2NyaXB0aW9uU2VydmljZS5hbmFseXplVGllclRyYW5zaXRpb24oXHJcbiAgICAgICAgJ3BlcnNvbmFsJyxcclxuICAgICAgICAncHJvZmVzc2lvbmFsJyxcclxuICAgICAgICBtb2NrVXNhZ2VEYXRhXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBleHBlY3QoYW5hbHlzaXMuY29zdEltcGFjdC5wcm9yYXRpb25BbW91bnQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChhbmFseXNpcy5jb3N0SW1wYWN0LnByb3JhdGlvbkRlc2NyaXB0aW9uKS50b0NvbnRhaW4oJ2JpbGxpbmcgY3ljbGUnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUGxhbiBDb21wYXJpc29uJywgKCkgPT4ge1xyXG4gICAgdGVzdCgnc2hvdWxkIGdlbmVyYXRlIGNvbXByZWhlbnNpdmUgcGxhbiBjb21wYXJpc29uJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb21wYXJpc29uID0gU3Vic2NyaXB0aW9uU2VydmljZS5nZXRQbGFuQ29tcGFyaXNvbigpO1xyXG5cclxuICAgICAgZXhwZWN0KGNvbXBhcmlzb24ucGVyc29uYWwpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChjb21wYXJpc29uLnByb2Zlc3Npb25hbCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KGNvbXBhcmlzb24uZW50ZXJwcmlzZSkudG9CZURlZmluZWQoKTtcclxuXHJcbiAgICAgIC8vIENoZWNrIHRoYXQgcHJvZmVzc2lvbmFsIGhhcyBtb3JlIGZlYXR1cmVzIHRoYW4gcGVyc29uYWxcclxuICAgICAgZXhwZWN0KGNvbXBhcmlzb24ucHJvZmVzc2lvbmFsLmZlYXR1cmVzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKFxyXG4gICAgICAgIGNvbXBhcmlzb24ucGVyc29uYWwuZmVhdHVyZXMubGVuZ3RoXHJcbiAgICAgICk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBwcmljZSBwcm9ncmVzc2lvblxyXG4gICAgICBleHBlY3QoY29tcGFyaXNvbi5wcm9mZXNzaW9uYWwucHJpY2UpLnRvQmVHcmVhdGVyVGhhbihjb21wYXJpc29uLnBlcnNvbmFsLnByaWNlKTtcclxuICAgICAgZXhwZWN0KGNvbXBhcmlzb24uZW50ZXJwcmlzZS5wcmljZSkudG9CZUdyZWF0ZXJUaGFuKGNvbXBhcmlzb24ucHJvZmVzc2lvbmFsLnByaWNlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQXZhaWxhYmxlIFRyYW5zaXRpb25zJywgKCkgPT4ge1xyXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBjb3JyZWN0IHVwZ3JhZGUvZG93bmdyYWRlIG9wdGlvbnMgZm9yIHBlcnNvbmFsIHRpZXInLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRyYW5zaXRpb25zID0gU3Vic2NyaXB0aW9uU2VydmljZS5nZXRBdmFpbGFibGVUcmFuc2l0aW9ucygncGVyc29uYWwnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdCh0cmFuc2l0aW9ucy51cGdyYWRlcykudG9Db250YWluKCdwcm9mZXNzaW9uYWwnKTtcclxuICAgICAgZXhwZWN0KHRyYW5zaXRpb25zLnVwZ3JhZGVzKS50b0NvbnRhaW4oJ2VudGVycHJpc2UnKTtcclxuICAgICAgZXhwZWN0KHRyYW5zaXRpb25zLmRvd25ncmFkZXMpLnRvSGF2ZUxlbmd0aCgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gY29ycmVjdCBvcHRpb25zIGZvciBwcm9mZXNzaW9uYWwgdGllcicsICgpID0+IHtcclxuICAgICAgY29uc3QgdHJhbnNpdGlvbnMgPSBTdWJzY3JpcHRpb25TZXJ2aWNlLmdldEF2YWlsYWJsZVRyYW5zaXRpb25zKCdwcm9mZXNzaW9uYWwnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdCh0cmFuc2l0aW9ucy51cGdyYWRlcykudG9Db250YWluKCdlbnRlcnByaXNlJyk7XHJcbiAgICAgIGV4cGVjdCh0cmFuc2l0aW9ucy5kb3duZ3JhZGVzKS50b0NvbnRhaW4oJ3BlcnNvbmFsJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIG9ubHkgZG93bmdyYWRlcyBmb3IgZW50ZXJwcmlzZSB0aWVyJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0cmFuc2l0aW9ucyA9IFN1YnNjcmlwdGlvblNlcnZpY2UuZ2V0QXZhaWxhYmxlVHJhbnNpdGlvbnMoJ2VudGVycHJpc2UnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdCh0cmFuc2l0aW9ucy51cGdyYWRlcykudG9IYXZlTGVuZ3RoKDApO1xyXG4gICAgICBleHBlY3QodHJhbnNpdGlvbnMuZG93bmdyYWRlcykudG9Db250YWluKCdwcm9mZXNzaW9uYWwnKTtcclxuICAgICAgZXhwZWN0KHRyYW5zaXRpb25zLmRvd25ncmFkZXMpLnRvQ29udGFpbigncGVyc29uYWwnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnVXNhZ2UgVmFsaWRhdGlvbicsICgpID0+IHtcclxuICAgIHRlc3QoJ3Nob3VsZCBhbGxvdyBhdmF0YXIgY3JlYXRpb24gd2l0aGluIGxpbWl0cycsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gU3Vic2NyaXB0aW9uU2VydmljZS5jYW5DcmVhdGVBdmF0YXIobW9ja1BlcnNvbmFsUGxhbiwgMik7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LmFsbG93ZWQpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQucmVhc29uKS50b0JlVW5kZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdzaG91bGQgYmxvY2sgYXZhdGFyIGNyZWF0aW9uIGF0IGxpbWl0JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBTdWJzY3JpcHRpb25TZXJ2aWNlLmNhbkNyZWF0ZUF2YXRhcihtb2NrUGVyc29uYWxQbGFuLCAzKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuYWxsb3dlZCkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQucmVhc29uKS50b0NvbnRhaW4oJ2xpbWl0Jyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQudXBncmFkZVJlcXVpcmVkKS50b0JlKCdwcm9mZXNzaW9uYWwnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSB0aWVyIHRyYW5zaXRpb25zIGFnYWluc3QgdXNhZ2UnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGhpZ2hVc2FnZURhdGE6IFVzYWdlRGF0YSA9IHtcclxuICAgICAgICBhdmF0YXJzQ291bnQ6IDUsXHJcbiAgICAgICAgY29sbGVjdGlvbnNDb3VudDogMTUsXHJcbiAgICAgICAgc2Vzc2lvbnNUaGlzTW9udGg6IDIwMCxcclxuICAgICAgICBkYXRhUmV0ZW50aW9uTW9udGhzOiAyNFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IFN1YnNjcmlwdGlvblNlcnZpY2UudmFsaWRhdGVUaWVyVHJhbnNpdGlvbihcclxuICAgICAgICAncHJvZmVzc2lvbmFsJyxcclxuICAgICAgICAncGVyc29uYWwnLFxyXG4gICAgICAgIGhpZ2hVc2FnZURhdGFcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLnZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KHZhbGlkYXRpb24ucmVhc29ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRmVhdHVyZSBBY2Nlc3MgQ29udHJvbCcsICgpID0+IHtcclxuICAgIHRlc3QoJ3Nob3VsZCBncmFudCBhbmFseXRpY3MgYWNjZXNzIGZvciBwcm9mZXNzaW9uYWwgcGxhbicsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gU3Vic2NyaXB0aW9uU2VydmljZS5jYW5BY2Nlc3NGZWF0dXJlKG1vY2tQcm9mZXNzaW9uYWxQbGFuLCAnYW5hbHl0aWNzJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LmFsbG93ZWQpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdzaG91bGQgZGVueSB1c2VyIG1hbmFnZW1lbnQgZm9yIHBlcnNvbmFsIHBsYW4nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFN1YnNjcmlwdGlvblNlcnZpY2UuY2FuQWNjZXNzRmVhdHVyZShtb2NrUGVyc29uYWxQbGFuLCAndXNlcl9tYW5hZ2VtZW50Jyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LmFsbG93ZWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnVwZ3JhZGVSZXF1aXJlZCkudG9CZSgncHJvZmVzc2lvbmFsJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGNvcnJlY3QgYXZhaWxhYmxlIGZlYXR1cmVzIGZvciBlYWNoIHRpZXInLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBlcnNvbmFsRmVhdHVyZXMgPSBTdWJzY3JpcHRpb25TZXJ2aWNlLmdldEF2YWlsYWJsZUZlYXR1cmVzKG1vY2tQZXJzb25hbFBsYW4pO1xyXG4gICAgICBjb25zdCBwcm9mZXNzaW9uYWxGZWF0dXJlcyA9IFN1YnNjcmlwdGlvblNlcnZpY2UuZ2V0QXZhaWxhYmxlRmVhdHVyZXMobW9ja1Byb2Zlc3Npb25hbFBsYW4pO1xyXG5cclxuICAgICAgZXhwZWN0KHBlcnNvbmFsRmVhdHVyZXMpLm5vdC50b0NvbnRhaW4oJ3VzZXJfbWFuYWdlbWVudCcpO1xyXG4gICAgICBleHBlY3QocHJvZmVzc2lvbmFsRmVhdHVyZXMpLnRvQ29udGFpbigndXNlcl9tYW5hZ2VtZW50Jyk7XHJcbiAgICAgIGV4cGVjdChwcm9mZXNzaW9uYWxGZWF0dXJlcykudG9Db250YWluKCdhbmFseXRpY3MnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgdGllciB0cmFuc2l0aW9ucyBncmFjZWZ1bGx5JywgKCkgPT4ge1xyXG4gICAgICBleHBlY3QoKCkgPT4ge1xyXG4gICAgICAgIFN1YnNjcmlwdGlvblNlcnZpY2UuYW5hbHl6ZVRpZXJUcmFuc2l0aW9uKFxyXG4gICAgICAgICAgJ2ludmFsaWQnIGFzIFN1YnNjcmlwdGlvblRpZXIsXHJcbiAgICAgICAgICAncHJvZmVzc2lvbmFsJyxcclxuICAgICAgICAgIG1vY2tVc2FnZURhdGFcclxuICAgICAgICApO1xyXG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBudWxsIHN1YnNjcmlwdGlvbiBwbGFucycsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gU3Vic2NyaXB0aW9uU2VydmljZS5jYW5BY2Nlc3NGZWF0dXJlKG51bGwsICdhbmFseXRpY3MnKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuYWxsb3dlZCkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQucmVhc29uKS50b0NvbnRhaW4oJ3N1YnNjcmlwdGlvbiBwbGFuJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1VzYWdlIFN1bW1hcnknLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdzaG91bGQgZ2VuZXJhdGUgY29tcGxldGUgdXNhZ2Ugc3VtbWFyeScsICgpID0+IHtcclxuICAgICAgY29uc3Qgc3VtbWFyeSA9IFN1YnNjcmlwdGlvblNlcnZpY2UuZ2V0VXNhZ2VTdW1tYXJ5KG1vY2tQZXJzb25hbFBsYW4sIG1vY2tVc2FnZURhdGEpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHN1bW1hcnkuYXZhdGFycykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHN1bW1hcnkuY29sbGVjdGlvbnNfcGVyX2F2YXRhcikudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHN1bW1hcnkuc2Vzc2lvbnNfcGVyX21vbnRoKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3Qoc3VtbWFyeS5kYXRhX3JldGVudGlvbl9tb250aHMpLnRvQmVEZWZpbmVkKCk7XHJcblxyXG4gICAgICAvLyBTaG91bGQgc2hvdyBncmVlbiBzdGF0dXMgZm9yIHdpdGhpbiBsaW1pdHNcclxuICAgICAgZXhwZWN0KHN1bW1hcnkuYXZhdGFycy5hbGxvd2VkKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIGlkZW50aWZ5IG92ZXItbGltaXQgdXNhZ2UgaW4gc3VtbWFyeScsICgpID0+IHtcclxuICAgICAgY29uc3Qgb3ZlckxpbWl0VXNhZ2U6IFVzYWdlRGF0YSA9IHtcclxuICAgICAgICBhdmF0YXJzQ291bnQ6IDUsXHJcbiAgICAgICAgY29sbGVjdGlvbnNDb3VudDogMjUsXHJcbiAgICAgICAgc2Vzc2lvbnNUaGlzTW9udGg6IDE1MCxcclxuICAgICAgICBkYXRhUmV0ZW50aW9uTW9udGhzOiAxOFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3Qgc3VtbWFyeSA9IFN1YnNjcmlwdGlvblNlcnZpY2UuZ2V0VXNhZ2VTdW1tYXJ5KG1vY2tQZXJzb25hbFBsYW4sIG92ZXJMaW1pdFVzYWdlKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFNob3VsZCBzaG93IHJlZCBzdGF0dXMgZm9yIG92ZXIgbGltaXRzXHJcbiAgICAgIGV4cGVjdChzdW1tYXJ5LmF2YXRhcnMuYWxsb3dlZCkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7ICJdLCJuYW1lcyI6WyJtb2NrUGVyc29uYWxQbGFuIiwiaWQiLCJ0aWVyIiwiYXZhdGFyX2xpbWl0IiwiYWN0aXZlIiwiY3JlYXRlZF9hdCIsImFkZG9uX2Rpc2NvdW50X3BlcmNlbnQiLCJiYXNlX3ByaWNlIiwiYmFzaWNfdGhlbWVzX2luY2x1ZGVkIiwiY3VzdG9tX2JyYW5kaW5nX2luY2x1ZGVkIiwiZGF0YV9yZXRlbnRpb25fbW9udGhzIiwicHJpb3JpdHlfc3VwcG9ydCIsInNlc3Npb25zX2xpbWl0IiwibW9ja1Byb2Zlc3Npb25hbFBsYW4iLCJtb2NrVXNhZ2VEYXRhIiwiYXZhdGFyc0NvdW50IiwiY29sbGVjdGlvbnNDb3VudCIsInNlc3Npb25zVGhpc01vbnRoIiwiZGF0YVJldGVudGlvbk1vbnRocyIsImRlc2NyaWJlIiwidGVzdCIsImFuYWx5c2lzIiwiU3Vic2NyaXB0aW9uU2VydmljZSIsImFuYWx5emVUaWVyVHJhbnNpdGlvbiIsImV4cGVjdCIsImlzVXBncmFkZSIsInRvQmUiLCJjYW5UcmFuc2l0aW9uIiwiY29zdEltcGFjdCIsIm1vbnRobHlEaWZmZXJlbmNlIiwidG9CZUdyZWF0ZXJUaGFuIiwiZmVhdHVyZUNoYW5nZXMiLCJnYWluZWQiLCJsZW5ndGgiLCJ3YXJuaW5ncyIsInRvSGF2ZUxlbmd0aCIsImhpZ2hVc2FnZURhdGEiLCJsb3N0IiwicHJvcmF0aW9uQW1vdW50IiwidG9CZURlZmluZWQiLCJwcm9yYXRpb25EZXNjcmlwdGlvbiIsInRvQ29udGFpbiIsImNvbXBhcmlzb24iLCJnZXRQbGFuQ29tcGFyaXNvbiIsInBlcnNvbmFsIiwicHJvZmVzc2lvbmFsIiwiZW50ZXJwcmlzZSIsImZlYXR1cmVzIiwicHJpY2UiLCJ0cmFuc2l0aW9ucyIsImdldEF2YWlsYWJsZVRyYW5zaXRpb25zIiwidXBncmFkZXMiLCJkb3duZ3JhZGVzIiwicmVzdWx0IiwiY2FuQ3JlYXRlQXZhdGFyIiwiYWxsb3dlZCIsInJlYXNvbiIsInRvQmVVbmRlZmluZWQiLCJ1cGdyYWRlUmVxdWlyZWQiLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGVUaWVyVHJhbnNpdGlvbiIsInZhbGlkIiwicmVhc29ucyIsImNhbkFjY2Vzc0ZlYXR1cmUiLCJwZXJzb25hbEZlYXR1cmVzIiwiZ2V0QXZhaWxhYmxlRmVhdHVyZXMiLCJwcm9mZXNzaW9uYWxGZWF0dXJlcyIsIm5vdCIsInRvVGhyb3ciLCJzdW1tYXJ5IiwiZ2V0VXNhZ2VTdW1tYXJ5IiwiYXZhdGFycyIsImNvbGxlY3Rpb25zX3Blcl9hdmF0YXIiLCJzZXNzaW9uc19wZXJfbW9udGgiLCJvdmVyTGltaXRVc2FnZSJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDOzs7O3FDQUUwRTtBQUUzRSxzQ0FBc0M7QUFDdEMsTUFBTUEsbUJBQW1CO0lBQ3ZCQyxJQUFJO0lBQ0pDLE1BQU07SUFDTkMsY0FBYztJQUNkQyxRQUFRO0lBQ1JDLFlBQVk7SUFDWkMsd0JBQXdCO0lBQ3hCQyxZQUFZO0lBQ1pDLHVCQUF1QjtJQUN2QkMsMEJBQTBCO0lBQzFCQyx1QkFBdUI7SUFDdkJDLGtCQUFrQjtJQUNsQkMsZ0JBQWdCO0FBQ2xCO0FBRUEsTUFBTUMsdUJBQXVCO0lBQzNCWixJQUFJO0lBQ0pDLE1BQU07SUFDTkMsY0FBYztJQUNkQyxRQUFRO0lBQ1JDLFlBQVk7SUFDWkMsd0JBQXdCO0lBQ3hCQyxZQUFZO0lBQ1pDLHVCQUF1QjtJQUN2QkMsMEJBQTBCO0lBQzFCQyx1QkFBdUI7SUFDdkJDLGtCQUFrQjtJQUNsQkMsZ0JBQWdCO0FBQ2xCO0FBRUEsTUFBTUUsZ0JBQTJCO0lBQy9CQyxjQUFjO0lBQ2RDLGtCQUFrQjtJQUNsQkMsbUJBQW1CO0lBQ25CQyxxQkFBcUI7QUFDdkI7QUFFQUMsU0FBUyx5Q0FBeUM7SUFFaERBLFNBQVMsNEJBQTRCO1FBQ25DQyxLQUFLLHdEQUF3RDtZQUMzRCxNQUFNQyxXQUFXQyx3Q0FBbUIsQ0FBQ0MscUJBQXFCLENBQ3hELFlBQ0EsZ0JBQ0FUO1lBR0ZVLE9BQU9ILFNBQVNJLFNBQVMsRUFBRUMsSUFBSSxDQUFDO1lBQ2hDRixPQUFPSCxTQUFTTSxhQUFhLEVBQUVELElBQUksQ0FBQztZQUNwQ0YsT0FBT0gsU0FBU08sVUFBVSxDQUFDQyxp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