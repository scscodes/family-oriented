514072f51bc16187202a67fbe490df63
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    UserProvider: function() {
        return UserProvider;
    },
    useAvatar: function() {
        return useAvatar;
    },
    useRoleGuard: function() {
        return useRoleGuard;
    },
    useUser: function() {
        return useUser;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _client = require("../lib/supabase/client");
const _logger = require("../utils/logger");
const _demoConfig = require("../utils/demoConfig");
const _DemoContext = require("./DemoContext");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const UserContext = /*#__PURE__*/ (0, _react.createContext)(undefined);
function UserProvider({ children }) {
    const [user, setUser] = (0, _react.useState)(null);
    const [userProfile, setUserProfile] = (0, _react.useState)(null);
    const [avatars, setAvatars] = (0, _react.useState)([]);
    const [currentAvatar, setCurrentAvatar] = (0, _react.useState)(null);
    const [error, setError] = (0, _react.useState)(null);
    const [roles, setRoles] = (0, _react.useState)([]);
    const [org, setOrg] = (0, _react.useState)(null);
    const [demoMode, setDemoMode] = (0, _react.useState)(false);
    // View As state
    const [viewAsRole, setViewAsRole] = (0, _react.useState)(null);
    const [viewAsAvatar, setViewAsAvatar] = (0, _react.useState)(null);
    // Use individual boolean states instead of object to prevent re-render loops
    const [userLoading, setUserLoading] = (0, _react.useState)(true);
    const [rolesLoading, setRolesLoading] = (0, _react.useState)(true);
    const [avatarsLoading, setAvatarsLoading] = (0, _react.useState)(true);
    const [isInitialized, setIsInitialized] = (0, _react.useState)(false);
    // Get demo context for smooth transitions
    let demoContext = null;
    try {
        demoContext = (0, _DemoContext.useDemo)();
    } catch  {
    // Not in demo mode or provider not available
    }
    // Create stable loading state object using individual primitives
    const loadingState = (0, _react.useMemo)(()=>({
            user: userLoading,
            roles: rolesLoading,
            avatars: avatarsLoading,
            isReady: isInitialized && !userLoading && !rolesLoading
        }), [
        userLoading,
        rolesLoading,
        avatarsLoading,
        isInitialized
    ]);
    const supabase = (0, _client.createClient)();
    // Use ref to track initialization to prevent multiple calls
    const initializationRef = (0, _react.useRef)(false);
    // Load user profile from database
    const loadUserProfile = (0, _react.useCallback)(async (userId)=>{
        try {
            _logger.logger.debug('🔍 Loading user profile for ID:', userId);
            const { data, error } = await supabase.from('users').select('*').eq('id', userId).single();
            _logger.logger.debug('📊 User profile query result:', {
                data,
                error
            });
            if (error) throw error;
            setUserProfile(data);
            _logger.logger.debug('✅ User profile loaded successfully');
        } catch (err) {
            _logger.logger.error('❌ Error loading user profile:', err);
            throw err; // Re-throw to trigger fallback in loadDemoUser
        }
    }, [
        supabase
    ]);
    // Load avatars for the current user
    const loadAvatars = (0, _react.useCallback)(async (userId)=>{
        try {
            console.log('UserContext: Loading avatars for user:', userId);
            setAvatarsLoading(true);
            const { data, error } = await supabase.from('avatars').select('*').eq('user_id', userId).order('created_at', {
                ascending: true
            });
            if (error) throw error;
            console.log('UserContext: Avatars loaded successfully:', data?.length || 0);
            setAvatars(data || []);
            // Set first avatar as current if none selected and we have avatars
            if (data && data.length > 0) {
                setCurrentAvatar((prev)=>prev || data[0]);
            }
        } catch (err) {
            _logger.logger.error('Error loading avatars:', err);
            console.log('UserContext: Avatar loading failed:', err);
            setError('Failed to load avatars');
            setAvatars([]);
        } finally{
            console.log('UserContext: Avatar loading completed');
            setAvatarsLoading(false);
        }
    }, [
        supabase
    ]);
    // Fetch roles and org info
    const fetchRolesAndOrg = (0, _react.useCallback)(async (userId)=>{
        try {
            setRolesLoading(true);
            // Fetch user profile from public.users
            const { data: userProfileData, error: userProfileError } = await supabase.from('users').select('id, org_id').eq('id', userId).single();
            if (userProfileError) throw userProfileError;
            const orgId = userProfileData?.org_id;
            // Fetch org info and subscription plan
            let orgInfo = null;
            if (orgId) {
                const { data: orgData, error: orgError } = await supabase.from('organizations').select('id, name, subscription_plan_id').eq('id', orgId).single();
                if (orgError) throw orgError;
                let subscriptionPlan = null;
                if (orgData?.subscription_plan_id) {
                    const { data: planData, error: planError } = await supabase.from('subscription_plans').select('*').eq('id', orgData.subscription_plan_id).single();
                    if (planError) throw planError;
                    subscriptionPlan = planData;
                }
                orgInfo = {
                    id: orgData.id,
                    name: orgData.name,
                    subscriptionPlan
                };
            }
            setOrg(orgInfo);
            // Fetch user roles from user_policies -> permission_policies
            const { data: userPolicies, error: userPoliciesError } = await supabase.from('user_policies').select('policy_id, permission_policies(id, policy_name, description)').eq('user_id', userId);
            if (userPoliciesError) throw userPoliciesError;
            const userRoles = (userPolicies || []).map((up)=>({
                    id: up.permission_policies.id,
                    name: up.permission_policies.policy_name,
                    description: up.permission_policies.description || undefined
                }));
            setRoles(userRoles);
        } catch (err) {
            _logger.logger.error('Error fetching roles/org info:', err);
            setOrg(null);
            setRoles([]);
            setError('Failed to load organization or roles.');
        } finally{
            setRolesLoading(false);
        }
    }, [
        supabase
    ]);
    // Enhanced demo user/org/roles fallback
    const loadDemoUserContext = (0, _react.useCallback)(async ()=>{
        // Get demo configuration from DemoContext if available, otherwise fallback
        const demoConfig = demoContext?.currentConfig || (0, _demoConfig.getDemoConfig)();
        console.log('Demo configuration loaded:', demoConfig);
        try {
            setUserLoading(true);
            setRolesLoading(true);
            setAvatarsLoading(true);
            setDemoMode(true);
            // Try to load demo user/org/roles from DB, fallback to hardcoded
            try {
                // Try to find a demo user in the users table
                const { data: demoUsers } = await supabase.from('users').select('*').ilike('email', '%demo%');
                const demoUser = demoUsers && demoUsers.length > 0 ? demoUsers[0] : null;
                // Try to find a demo org
                let demoOrg = null;
                let demoPlan = null;
                if (demoUser && demoUser.org_id) {
                    const { data: orgData } = await supabase.from('organizations').select('*').eq('id', demoUser.org_id).single();
                    demoOrg = orgData;
                    if (orgData && orgData.subscription_plan_id) {
                        const { data: planData } = await supabase.from('subscription_plans').select('*').eq('id', orgData.subscription_plan_id).single();
                        demoPlan = planData;
                    }
                }
                // Try to find demo roles
                let demoRoles = [];
                if (demoUser) {
                    const { data: userPolicies } = await supabase.from('user_policies').select('policy_id, permission_policies(id, policy_name, description)').eq('user_id', demoUser.id);
                    demoRoles = (userPolicies || []).map((up)=>({
                            id: up.permission_policies.id,
                            name: up.permission_policies.policy_name,
                            description: up.permission_policies.description || undefined
                        }));
                }
                // Set context state from database
                if (demoUser) {
                    // Convert database user to Supabase User format
                    const supabaseUser = {
                        ...demoUser,
                        app_metadata: {},
                        user_metadata: {},
                        aud: 'authenticated'
                    };
                    setUser(supabaseUser);
                    setUserProfile({
                        id: demoConfig.id,
                        email: demoConfig.email,
                        first_name: demoConfig.name?.split(' ')[0] || null,
                        last_name: demoConfig.name?.split(' ').slice(1).join(' ') || null,
                        org_id: `${demoConfig.id}-org`,
                        account_type: 'demo',
                        created_at: new Date().toISOString(),
                        updated_at: new Date().toISOString(),
                        last_login: new Date().toISOString(),
                        phone: null,
                        timezone: null,
                        locale: 'en'
                    });
                    // Always ensure demo org with subscription plan exists
                    const ensuredDemoOrg = demoOrg && demoPlan ? {
                        id: demoOrg.id,
                        name: demoOrg.name,
                        subscriptionPlan: demoPlan
                    } : (()=>{
                        // Use configurable demo organization for database users too
                        const demoConfig = (0, _demoConfig.getDemoConfig)();
                        const subscriptionPlan = (0, _demoConfig.createDemoSubscriptionPlan)(demoConfig);
                        return {
                            id: `${demoUser.id}-org`,
                            name: demoConfig.orgName,
                            subscriptionPlan
                        };
                    })();
                    console.log('Demo org being set for database user:', ensuredDemoOrg);
                    setOrg(ensuredDemoOrg);
                    setRoles(demoRoles.length > 0 ? demoRoles : [
                        {
                            id: '1',
                            name: 'account_owner',
                            description: 'Full administrative access'
                        },
                        {
                            id: '2',
                            name: 'org_admin',
                            description: 'Organization management'
                        }
                    ]);
                    // Load demo avatars
                    await loadAvatars(demoUser.id);
                    return;
                }
            } catch (dbError) {
                _logger.logger.warn('Database demo user not found, using hardcoded fallback:', dbError);
                console.log('Demo mode fallback triggered:', dbError);
            }
            // Fallback to configurable demo context
            console.log('UserContext: Creating demo user from configuration');
            // Create demo user
            const demoUser = {
                id: demoConfig.id,
                email: demoConfig.email,
                name: demoConfig.name,
                app_metadata: {},
                user_metadata: {},
                aud: 'authenticated',
                created_at: new Date().toISOString()
            };
            setUser(demoUser);
            setUserProfile({
                id: demoConfig.id,
                email: demoConfig.email,
                first_name: demoConfig.name?.split(' ')[0] || null,
                last_name: demoConfig.name?.split(' ').slice(1).join(' ') || null,
                org_id: `${demoConfig.id}-org`,
                account_type: 'demo',
                created_at: new Date().toISOString(),
                updated_at: new Date().toISOString(),
                last_login: new Date().toISOString(),
                phone: null,
                timezone: null,
                locale: 'en'
            });
            // Create demo organization with appropriate subscription plan
            const subscriptionPlan = (0, _demoConfig.createDemoSubscriptionPlan)(demoConfig);
            const demoOrg = {
                id: `${demoConfig.id}-org`,
                name: demoConfig.orgName,
                subscriptionPlan
            };
            _logger.logger.info(`Setting demo org for ${demoConfig.tier} tier:`, demoOrg);
            setOrg(demoOrg);
            console.log('Demo org set:', demoOrg);
            // Create demo roles based on configuration
            const demoRoles = (0, _demoConfig.createDemoRoles)(demoConfig);
            setRoles(demoRoles);
            console.log('Demo roles set:', demoRoles);
            // Create demo avatars based on configuration
            const demoAvatars = (0, _demoConfig.createDemoAvatars)(demoConfig);
            setAvatars(demoAvatars);
            if (demoAvatars.length > 0) {
                setCurrentAvatar(demoAvatars[0]);
            }
            console.log(`Demo avatars created: ${demoAvatars.length}`);
        } catch (err) {
            _logger.logger.error('Error in demo user context:', err);
            setError('Failed to initialize demo mode');
        } finally{
            // Complete all loading states for demo mode
            console.log('Demo mode initialization complete, updating loading states');
            setUserLoading(false);
            setRolesLoading(false);
            setAvatarsLoading(false);
            setIsInitialized(true);
        }
    }, [
        supabase,
        loadAvatars
    ]);
    // Main initialization effect - runs only once
    (0, _react.useEffect)(()=>{
        if (initializationRef.current) return;
        initializationRef.current = true;
        const loadUser = async ()=>{
            try {
                setUserLoading(true);
                setError(null);
                const { data: { session } } = await supabase.auth.getSession();
                if (session?.user) {
                    // Real user authentication
                    setUser(session.user);
                    setUserLoading(false);
                    await loadUserProfile(session.user.id);
                    // Load roles and avatars in parallel
                    await Promise.all([
                        fetchRolesAndOrg(session.user.id),
                        loadAvatars(session.user.id)
                    ]);
                    setIsInitialized(true);
                } else {
                    // No session - load demo mode for development
                    _logger.logger.info('No user session found, loading demo mode');
                    console.log('UserContext: Starting demo mode load');
                    await loadDemoUserContext();
                    console.log('UserContext: Demo mode load completed');
                }
            } catch (err) {
                _logger.logger.error('Error loading user:', err);
                setError('Failed to load user context.');
                setUserLoading(false);
                setRolesLoading(false);
                setAvatarsLoading(false);
                setIsInitialized(true);
            }
        };
        loadUser();
        // Listen for auth changes
        const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session)=>{
            if (event === 'SIGNED_IN' && session?.user) {
                setUser(session.user);
                setUserLoading(false);
                await loadUserProfile(session.user.id);
                // Load roles and avatars in parallel
                await Promise.all([
                    fetchRolesAndOrg(session.user.id),
                    loadAvatars(session.user.id)
                ]);
                setIsInitialized(true);
            } else if (event === 'SIGNED_OUT') {
                setUser(null);
                setUserProfile(null);
                setAvatars([]);
                setCurrentAvatar(null);
                setRoles([]);
                setOrg(null);
                // Load demo user for continued development
                await loadDemoUserContext();
            }
        });
        return ()=>{
            subscription.unsubscribe();
        };
    }, [
        supabase.auth,
        loadUserProfile,
        loadDemoUserContext,
        fetchRolesAndOrg,
        loadAvatars
    ]);
    // Listen for demo scenario changes from DemoContext
    (0, _react.useEffect)(()=>{
        if (!demoContext) return;
        const handleDemoScenarioChange = async (event)=>{
            const customEvent = event;
            const { config: newConfig } = customEvent.detail;
            try {
                _logger.logger.info('Demo scenario changed, updating user context:', newConfig);
                // Update demo user context with new configuration
                const demoUser = {
                    id: newConfig.id,
                    email: newConfig.email,
                    name: newConfig.name,
                    app_metadata: {},
                    user_metadata: {},
                    aud: 'authenticated',
                    created_at: new Date().toISOString()
                };
                setUser(demoUser);
                setUserProfile({
                    id: newConfig.id,
                    email: newConfig.email,
                    first_name: newConfig.name?.split(' ')[0] || null,
                    last_name: newConfig.name?.split(' ').slice(1).join(' ') || null,
                    org_id: `${newConfig.id}-org`,
                    account_type: 'demo',
                    created_at: new Date().toISOString(),
                    updated_at: new Date().toISOString(),
                    last_login: new Date().toISOString(),
                    phone: null,
                    timezone: null,
                    locale: 'en'
                });
                // Create demo organization with new subscription plan
                const subscriptionPlan = (0, _demoConfig.createDemoSubscriptionPlan)(newConfig);
                const demoOrg = {
                    id: `${newConfig.id}-org`,
                    name: newConfig.orgName,
                    subscriptionPlan
                };
                setOrg(demoOrg);
                // Create demo roles
                const demoRoles = (0, _demoConfig.createDemoRoles)(newConfig);
                setRoles(demoRoles);
                // Create demo avatars
                const demoAvatars = (0, _demoConfig.createDemoAvatars)(newConfig);
                setAvatars(demoAvatars);
                if (demoAvatars.length > 0) {
                    setCurrentAvatar(demoAvatars[0]);
                }
                _logger.logger.info('Demo user context updated successfully for new scenario');
            } catch (err) {
                _logger.logger.error('Failed to update user context for new demo scenario:', err);
                setError('Failed to switch demo scenario');
            }
        };
        // Add event listener for demo scenario changes
        if (typeof window !== 'undefined') {
            window.addEventListener('demoScenarioChanged', handleDemoScenarioChange);
            return ()=>{
                window.removeEventListener('demoScenarioChanged', handleDemoScenarioChange);
            };
        }
    }, [
        demoContext
    ]);
    // Utility functions
    const hasRole = (0, _react.useCallback)((roleName)=>{
        // Only return true if we're ready and actually have the role
        return loadingState.isReady && roles.some((r)=>r.name === roleName);
    }, [
        roles,
        loadingState.isReady
    ]);
    const canAccess = (0, _react.useCallback)((feature)=>{
        // Only return true if we're ready and have access
        if (!loadingState.isReady || !org?.subscriptionPlan) return false;
        const features = org.subscriptionPlan.features_included || {};
        return features[feature] === true;
    }, [
        org,
        loadingState.isReady
    ]);
    const getTierLimit = (0, _react.useCallback)((feature)=>{
        return org?.subscriptionPlan?.[`${feature}_limit`];
    }, [
        org
    ]);
    // Create a new avatar with subscription limit checking
    const createAvatar = async (name)=>{
        if (!user) {
            setError('Must be logged in to create avatar');
            return null;
        }
        // Check subscription limits before creating avatar
        const currentAvatarsCount = avatars.length;
        if (org?.subscriptionPlan) {
            const avatarLimit = org.subscriptionPlan.avatar_limit || 5;
            if (currentAvatarsCount >= avatarLimit) {
                const tierName = org.subscriptionPlan.tier || 'current plan';
                setError(`Avatar limit reached (${currentAvatarsCount}/${avatarLimit}). Upgrade your ${tierName} to create more avatars.`);
                return null;
            }
        }
        try {
            setError(null);
            const { data, error } = await supabase.from('avatars').insert({
                user_id: user.id,
                org_id: org?.id || null,
                name: name.trim(),
                theme_settings: {},
                game_preferences: {}
            }).select().single();
            if (error) throw error;
            // Refresh avatars list
            await loadAvatars(user.id);
            _logger.logger.info('Avatar created successfully:', {
                avatarId: data.id,
                avatarName: data.name,
                currentCount: currentAvatarsCount + 1,
                tier: org?.subscriptionPlan?.tier
            });
            return data;
        } catch (err) {
            _logger.logger.error('Error creating avatar:', err);
            setError(err instanceof Error ? err.message : 'Failed to create avatar');
            return null;
        }
    };
    // Refresh avatars from database
    const refreshAvatars = async ()=>{
        if (user) {
            await loadAvatars(user.id);
        }
    };
    // Sign out the current user
    const signOut = async ()=>{
        try {
            const { error } = await supabase.auth.signOut();
            if (error) throw error;
        } catch (err) {
            _logger.logger.error('Error signing out:', err);
            setError('Failed to sign out');
        }
    };
    // View As functionality
    const isViewAs = viewAsRole !== null || viewAsAvatar !== null;
    const resetViewAs = ()=>{
        setViewAsRole(null);
        setViewAsAvatar(null);
    };
    const contextValue = {
        user,
        userProfile,
        avatars,
        currentAvatar,
        loading: !loadingState.isReady,
        error,
        setCurrentAvatar,
        createAvatar,
        refreshAvatars,
        signOut,
        roles,
        org,
        hasRole,
        canAccess,
        getTierLimit,
        viewAsRole,
        viewAsAvatar,
        isViewAs,
        setViewAsRole,
        setViewAsAvatar,
        resetViewAs,
        loadingState
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsx)(UserContext.Provider, {
        value: contextValue,
        children: children
    });
}
function useUser() {
    const context = (0, _react.useContext)(UserContext);
    if (!context) {
        throw new Error('useUser must be used within a UserProvider');
    }
    return context;
}
function useAvatar() {
    const { currentAvatar, setCurrentAvatar, avatars, createAvatar } = useUser();
    const switchAvatar = (0, _react.useCallback)((avatarId)=>{
        const avatar = avatars.find((a)=>a.id === avatarId);
        if (avatar) {
            setCurrentAvatar(avatar);
        }
    }, [
        avatars,
        setCurrentAvatar
    ]);
    return {
        currentAvatar,
        setCurrentAvatar,
        avatars,
        switchAvatar,
        createAvatar
    };
}
function useRoleGuard() {
    const { hasRole, canAccess, roles, loadingState } = useUser();
    // Backward compatible hasRole function 
    const guardedHasRole = (0, _react.useCallback)((roleName)=>{
        return loadingState.isReady && hasRole(roleName);
    }, [
        hasRole,
        loadingState.isReady
    ]);
    const requireRole = (0, _react.useCallback)((requiredRole)=>{
        if (!loadingState.isReady) return {
            allowed: false,
            reason: 'Loading...'
        };
        const allowed = hasRole(requiredRole);
        return {
            allowed,
            reason: allowed ? undefined : `Requires ${requiredRole} role`
        };
    }, [
        hasRole,
        loadingState.isReady
    ]);
    const requireFeature = (0, _react.useCallback)((feature)=>{
        if (!loadingState.isReady) return {
            allowed: false,
            reason: 'Loading...'
        };
        const allowed = canAccess(feature);
        return {
            allowed,
            reason: allowed ? undefined : `Feature ${feature} not available in current plan`
        };
    }, [
        canAccess,
        loadingState.isReady
    ]);
    return {
        // Backward compatible interface
        hasRole: guardedHasRole,
        isReady: loadingState.isReady,
        roles: loadingState.isReady ? roles : [],
        // New enhanced interface
        requireRole,
        requireFeature
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxyZXBvc1xcZmFtaWx5LW9yaWVudGVkXFxzcmNcXGNvbnRleHRcXFVzZXJDb250ZXh0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XHJcblxyXG5pbXBvcnQgUmVhY3QsIHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCwgUmVhY3ROb2RlLCB1c2VDYWxsYmFjaywgdXNlTWVtbywgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBCb3ggfSBmcm9tICdAbXVpL21hdGVyaWFsJztcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2UvY2xpZW50JztcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcbmltcG9ydCB0eXBlIHsgRGF0YWJhc2UgfSBmcm9tICdAL2xpYi9zdXBhYmFzZS9kYXRhYmFzZS50eXBlcyc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvdXRpbHMvbG9nZ2VyJztcclxuXHJcblxyXG5pbXBvcnQgeyBcclxuICBnZXREZW1vQ29uZmlnLCBcclxuICBjcmVhdGVEZW1vU3Vic2NyaXB0aW9uUGxhbiwgXHJcbiAgY3JlYXRlRGVtb0F2YXRhcnMsIFxyXG4gIGNyZWF0ZURlbW9Sb2xlcyBcclxufSBmcm9tICdAL3V0aWxzL2RlbW9Db25maWcnO1xyXG5pbXBvcnQgeyB1c2VEZW1vLCB1c2VEZW1vQ29uZmlnIH0gZnJvbSAnLi9EZW1vQ29udGV4dCc7XHJcblxyXG4vLyBUeXBlc1xyXG50eXBlIEF2YXRhciA9IERhdGFiYXNlWydwdWJsaWMnXVsnVGFibGVzJ11bJ2F2YXRhcnMnXVsnUm93J107XHJcbnR5cGUgVXNlclByb2ZpbGUgPSBEYXRhYmFzZVsncHVibGljJ11bJ1RhYmxlcyddWyd1c2VycyddWydSb3cnXTtcclxuXHJcbi8qKlxyXG4gKiBFeHRlbmRlZCB1c2VyIGNvbnRleHQgdHlwZSBmb3Igcm9sZXMgYW5kIHN1YnNjcmlwdGlvbiB0aWVyXHJcbiAqL1xyXG5pbnRlcmZhY2UgUm9sZSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdWJzY3JpcHRpb25QbGFuIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICB0aWVyOiBzdHJpbmc7XHJcbiAgYXZhdGFyX2xpbWl0OiBudW1iZXI7XHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICBmZWF0dXJlc19pbmNsdWRlZDogYW55O1xyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgW2tleTogc3RyaW5nXTogYW55O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgT3JnSW5mbyB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgc3Vic2NyaXB0aW9uUGxhbjogU3Vic2NyaXB0aW9uUGxhbiB8IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25zb2xpZGF0ZWQgbG9hZGluZyBzdGF0ZSBmb3IgYmV0dGVyIFVYIC0gdXNpbmcgcHJpbWl0aXZlcyBmb3Igc3RhYmlsaXR5XHJcbiAqL1xyXG5pbnRlcmZhY2UgTG9hZGluZ1N0YXRlIHtcclxuICB1c2VyOiBib29sZWFuO1xyXG4gIHJvbGVzOiBib29sZWFuO1xyXG4gIGF2YXRhcnM6IGJvb2xlYW47XHJcbiAgLy8gSGVscGVyIHRvIGNoZWNrIGlmIGV2ZXJ5dGhpbmcgaXMgcmVhZHkgZm9yIHJvbGUtYmFzZWQgcmVuZGVyaW5nXHJcbiAgaXNSZWFkeTogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEV4dGVuZGVkIHVzZXIgY29udGV4dCB0eXBlIGZvciByb2xlcyBhbmQgc3Vic2NyaXB0aW9uIHRpZXIsIHdpdGggVmlldyBBcyBzdXBwb3J0XHJcbiAqL1xyXG5pbnRlcmZhY2UgRXh0ZW5kZWRVc2VyQ29udGV4dFR5cGUgZXh0ZW5kcyBVc2VyQ29udGV4dFR5cGUge1xyXG4gIHJvbGVzOiBSb2xlW107XHJcbiAgb3JnOiBPcmdJbmZvIHwgbnVsbDtcclxuICBoYXNSb2xlOiAocm9sZU5hbWU6IHN0cmluZykgPT4gYm9vbGVhbjtcclxuICBjYW5BY2Nlc3M6IChmZWF0dXJlOiBzdHJpbmcpID0+IGJvb2xlYW47XHJcbiAgZ2V0VGllckxpbWl0OiAoZmVhdHVyZTogc3RyaW5nKSA9PiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcbiAgLy8gVmlldyBBcyBzdGF0ZSBhbmQgbWV0aG9kc1xyXG4gIHZpZXdBc1JvbGU6IHN0cmluZyB8IG51bGw7XHJcbiAgdmlld0FzQXZhdGFyOiBBdmF0YXIgfCBudWxsO1xyXG4gIGlzVmlld0FzOiBib29sZWFuO1xyXG4gIHNldFZpZXdBc1JvbGU6IChyb2xlOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkO1xyXG4gIHNldFZpZXdBc0F2YXRhcjogKGF2YXRhcjogQXZhdGFyIHwgbnVsbCkgPT4gdm9pZDtcclxuICByZXNldFZpZXdBczogKCkgPT4gdm9pZDtcclxuICAvLyBFbmhhbmNlZCBsb2FkaW5nIHN0YXRlXHJcbiAgbG9hZGluZ1N0YXRlOiBMb2FkaW5nU3RhdGU7XHJcbn1cclxuXHJcbmludGVyZmFjZSBVc2VyQ29udGV4dFR5cGUge1xyXG4gIHVzZXI6IFVzZXIgfCBudWxsO1xyXG4gIHVzZXJQcm9maWxlOiBVc2VyUHJvZmlsZSB8IG51bGw7XHJcbiAgYXZhdGFyczogQXZhdGFyW107XHJcbiAgY3VycmVudEF2YXRhcjogQXZhdGFyIHwgbnVsbDtcclxuICBsb2FkaW5nOiBib29sZWFuO1xyXG4gIGVycm9yOiBzdHJpbmcgfCBudWxsO1xyXG4gIFxyXG4gIC8vIEFjdGlvbnNcclxuICBzZXRDdXJyZW50QXZhdGFyOiAoYXZhdGFyOiBBdmF0YXIgfCBudWxsKSA9PiB2b2lkO1xyXG4gIGNyZWF0ZUF2YXRhcjogKG5hbWU6IHN0cmluZykgPT4gUHJvbWlzZTxBdmF0YXIgfCBudWxsPjtcclxuICByZWZyZXNoQXZhdGFyczogKCkgPT4gUHJvbWlzZTx2b2lkPjtcclxuICBzaWduT3V0OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG59XHJcblxyXG5jb25zdCBVc2VyQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8RXh0ZW5kZWRVc2VyQ29udGV4dFR5cGUgfCB1bmRlZmluZWQ+KHVuZGVmaW5lZCk7XHJcblxyXG4vKipcclxuICogVXNlciBwcm92aWRlciB0aGF0IG1hbmFnZXMgYXV0aGVudGljYXRpb24gc3RhdGUgYW5kIGF2YXRhciBjb250ZXh0XHJcbiAqIEludGVncmF0ZXMgd2l0aCBTdXBhYmFzZSBmb3IgcGVyc2lzdGVudCB1c2VyIGFuZCBhdmF0YXIgbWFuYWdlbWVudFxyXG4gKiBcclxuICogRW5oYW5jZWQgd2l0aDpcclxuICogLSBTdGFibGUgbG9hZGluZyBzdGF0ZXMgdG8gcHJldmVudCBpbmZpbml0ZSByZS1yZW5kZXJzXHJcbiAqIC0gUHJvcGVyIGRlbW8gbW9kZSBzdXBwb3J0XHJcbiAqIC0gRWxpbWluYXRpb24gb2YgY2lyY3VsYXIgZGVwZW5kZW5jaWVzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gVXNlclByb3ZpZGVyKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3ROb2RlIH0pIHtcclxuICBjb25zdCBbdXNlciwgc2V0VXNlcl0gPSB1c2VTdGF0ZTxVc2VyIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgW3VzZXJQcm9maWxlLCBzZXRVc2VyUHJvZmlsZV0gPSB1c2VTdGF0ZTxVc2VyUHJvZmlsZSB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFthdmF0YXJzLCBzZXRBdmF0YXJzXSA9IHVzZVN0YXRlPEF2YXRhcltdPihbXSk7XHJcbiAgY29uc3QgW2N1cnJlbnRBdmF0YXIsIHNldEN1cnJlbnRBdmF0YXJdID0gdXNlU3RhdGU8QXZhdGFyIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbcm9sZXMsIHNldFJvbGVzXSA9IHVzZVN0YXRlPFJvbGVbXT4oW10pO1xyXG4gIGNvbnN0IFtvcmcsIHNldE9yZ10gPSB1c2VTdGF0ZTxPcmdJbmZvIHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgW2RlbW9Nb2RlLCBzZXREZW1vTW9kZV0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XHJcbiAgXHJcbiAgLy8gVmlldyBBcyBzdGF0ZVxyXG4gIGNvbnN0IFt2aWV3QXNSb2xlLCBzZXRWaWV3QXNSb2xlXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFt2aWV3QXNBdmF0YXIsIHNldFZpZXdBc0F2YXRhcl0gPSB1c2VTdGF0ZTxBdmF0YXIgfCBudWxsPihudWxsKTtcclxuXHJcbiAgLy8gVXNlIGluZGl2aWR1YWwgYm9vbGVhbiBzdGF0ZXMgaW5zdGVhZCBvZiBvYmplY3QgdG8gcHJldmVudCByZS1yZW5kZXIgbG9vcHNcclxuICBjb25zdCBbdXNlckxvYWRpbmcsIHNldFVzZXJMb2FkaW5nXSA9IHVzZVN0YXRlPGJvb2xlYW4+KHRydWUpO1xyXG4gIGNvbnN0IFtyb2xlc0xvYWRpbmcsIHNldFJvbGVzTG9hZGluZ10gPSB1c2VTdGF0ZTxib29sZWFuPih0cnVlKTtcclxuICBjb25zdCBbYXZhdGFyc0xvYWRpbmcsIHNldEF2YXRhcnNMb2FkaW5nXSA9IHVzZVN0YXRlPGJvb2xlYW4+KHRydWUpO1xyXG4gIGNvbnN0IFtpc0luaXRpYWxpemVkLCBzZXRJc0luaXRpYWxpemVkXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcclxuXHJcbiAgLy8gR2V0IGRlbW8gY29udGV4dCBmb3Igc21vb3RoIHRyYW5zaXRpb25zXHJcbiAgbGV0IGRlbW9Db250ZXh0OiBSZXR1cm5UeXBlPHR5cGVvZiB1c2VEZW1vPiB8IG51bGwgPSBudWxsO1xyXG4gIHRyeSB7XHJcbiAgICBkZW1vQ29udGV4dCA9IHVzZURlbW8oKTtcclxuICB9IGNhdGNoIHtcclxuICAgIC8vIE5vdCBpbiBkZW1vIG1vZGUgb3IgcHJvdmlkZXIgbm90IGF2YWlsYWJsZVxyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIHN0YWJsZSBsb2FkaW5nIHN0YXRlIG9iamVjdCB1c2luZyBpbmRpdmlkdWFsIHByaW1pdGl2ZXNcclxuICBjb25zdCBsb2FkaW5nU3RhdGUgPSB1c2VNZW1vPExvYWRpbmdTdGF0ZT4oKCkgPT4gKHtcclxuICAgIHVzZXI6IHVzZXJMb2FkaW5nLFxyXG4gICAgcm9sZXM6IHJvbGVzTG9hZGluZyxcclxuICAgIGF2YXRhcnM6IGF2YXRhcnNMb2FkaW5nLFxyXG4gICAgaXNSZWFkeTogaXNJbml0aWFsaXplZCAmJiAhdXNlckxvYWRpbmcgJiYgIXJvbGVzTG9hZGluZ1xyXG4gIH0pLCBbdXNlckxvYWRpbmcsIHJvbGVzTG9hZGluZywgYXZhdGFyc0xvYWRpbmcsIGlzSW5pdGlhbGl6ZWRdKTtcclxuXHJcbiAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcclxuICBcclxuICAvLyBVc2UgcmVmIHRvIHRyYWNrIGluaXRpYWxpemF0aW9uIHRvIHByZXZlbnQgbXVsdGlwbGUgY2FsbHNcclxuICBjb25zdCBpbml0aWFsaXphdGlvblJlZiA9IHVzZVJlZjxib29sZWFuPihmYWxzZSk7XHJcblxyXG4gIC8vIExvYWQgdXNlciBwcm9maWxlIGZyb20gZGF0YWJhc2VcclxuICBjb25zdCBsb2FkVXNlclByb2ZpbGUgPSB1c2VDYWxsYmFjayhhc3luYyAodXNlcklkOiBzdHJpbmcpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxvZ2dlci5kZWJ1Zygn8J+UjSBMb2FkaW5nIHVzZXIgcHJvZmlsZSBmb3IgSUQ6JywgdXNlcklkKTtcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgndXNlcnMnKVxyXG4gICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgIC5lcSgnaWQnLCB1c2VySWQpXHJcbiAgICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgICAgbG9nZ2VyLmRlYnVnKCfwn5OKIFVzZXIgcHJvZmlsZSBxdWVyeSByZXN1bHQ6JywgeyBkYXRhLCBlcnJvciB9KTtcclxuICAgICAgXHJcbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICAgIHNldFVzZXJQcm9maWxlKGRhdGEpO1xyXG4gICAgICBsb2dnZXIuZGVidWcoJ+KchSBVc2VyIHByb2ZpbGUgbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcign4p2MIEVycm9yIGxvYWRpbmcgdXNlciBwcm9maWxlOicsIGVycik7XHJcbiAgICAgIHRocm93IGVycjsgLy8gUmUtdGhyb3cgdG8gdHJpZ2dlciBmYWxsYmFjayBpbiBsb2FkRGVtb1VzZXJcclxuICAgIH1cclxuICB9LCBbc3VwYWJhc2VdKTtcclxuXHJcbiAgLy8gTG9hZCBhdmF0YXJzIGZvciB0aGUgY3VycmVudCB1c2VyXHJcbiAgY29uc3QgbG9hZEF2YXRhcnMgPSB1c2VDYWxsYmFjayhhc3luYyAodXNlcklkOiBzdHJpbmcpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyQ29udGV4dDogTG9hZGluZyBhdmF0YXJzIGZvciB1c2VyOicsIHVzZXJJZCk7XHJcbiAgICAgIHNldEF2YXRhcnNMb2FkaW5nKHRydWUpO1xyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdhdmF0YXJzJylcclxuICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpXHJcbiAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IHRydWUgfSk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ1VzZXJDb250ZXh0OiBBdmF0YXJzIGxvYWRlZCBzdWNjZXNzZnVsbHk6JywgZGF0YT8ubGVuZ3RoIHx8IDApO1xyXG4gICAgICBzZXRBdmF0YXJzKGRhdGEgfHwgW10pO1xyXG4gICAgICBcclxuICAgICAgLy8gU2V0IGZpcnN0IGF2YXRhciBhcyBjdXJyZW50IGlmIG5vbmUgc2VsZWN0ZWQgYW5kIHdlIGhhdmUgYXZhdGFyc1xyXG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBzZXRDdXJyZW50QXZhdGFyKHByZXYgPT4gcHJldiB8fCBkYXRhWzBdKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgbG9hZGluZyBhdmF0YXJzOicsIGVycik7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyQ29udGV4dDogQXZhdGFyIGxvYWRpbmcgZmFpbGVkOicsIGVycik7XHJcbiAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gbG9hZCBhdmF0YXJzJyk7XHJcbiAgICAgIHNldEF2YXRhcnMoW10pO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgY29uc29sZS5sb2coJ1VzZXJDb250ZXh0OiBBdmF0YXIgbG9hZGluZyBjb21wbGV0ZWQnKTtcclxuICAgICAgc2V0QXZhdGFyc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH0sIFtzdXBhYmFzZV0pO1xyXG5cclxuICAvLyBGZXRjaCByb2xlcyBhbmQgb3JnIGluZm9cclxuICBjb25zdCBmZXRjaFJvbGVzQW5kT3JnID0gdXNlQ2FsbGJhY2soYXN5bmMgKHVzZXJJZDogc3RyaW5nKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBzZXRSb2xlc0xvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBGZXRjaCB1c2VyIHByb2ZpbGUgZnJvbSBwdWJsaWMudXNlcnNcclxuICAgICAgY29uc3QgeyBkYXRhOiB1c2VyUHJvZmlsZURhdGEsIGVycm9yOiB1c2VyUHJvZmlsZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCd1c2VycycpXHJcbiAgICAgICAgLnNlbGVjdCgnaWQsIG9yZ19pZCcpXHJcbiAgICAgICAgLmVxKCdpZCcsIHVzZXJJZClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcbiAgICAgIGlmICh1c2VyUHJvZmlsZUVycm9yKSB0aHJvdyB1c2VyUHJvZmlsZUVycm9yO1xyXG4gICAgICBjb25zdCBvcmdJZCA9IHVzZXJQcm9maWxlRGF0YT8ub3JnX2lkO1xyXG4gICAgICBcclxuICAgICAgLy8gRmV0Y2ggb3JnIGluZm8gYW5kIHN1YnNjcmlwdGlvbiBwbGFuXHJcbiAgICAgIGxldCBvcmdJbmZvOiBPcmdJbmZvIHwgbnVsbCA9IG51bGw7XHJcbiAgICAgIGlmIChvcmdJZCkge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogb3JnRGF0YSwgZXJyb3I6IG9yZ0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ29yZ2FuaXphdGlvbnMnKVxyXG4gICAgICAgICAgLnNlbGVjdCgnaWQsIG5hbWUsIHN1YnNjcmlwdGlvbl9wbGFuX2lkJylcclxuICAgICAgICAgIC5lcSgnaWQnLCBvcmdJZClcclxuICAgICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICBpZiAob3JnRXJyb3IpIHRocm93IG9yZ0Vycm9yO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBzdWJzY3JpcHRpb25QbGFuOiBTdWJzY3JpcHRpb25QbGFuIHwgbnVsbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKG9yZ0RhdGE/LnN1YnNjcmlwdGlvbl9wbGFuX2lkKSB7XHJcbiAgICAgICAgICBjb25zdCB7IGRhdGE6IHBsYW5EYXRhLCBlcnJvcjogcGxhbkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgICAuZnJvbSgnc3Vic2NyaXB0aW9uX3BsYW5zJylcclxuICAgICAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgICAgIC5lcSgnaWQnLCBvcmdEYXRhLnN1YnNjcmlwdGlvbl9wbGFuX2lkKVxyXG4gICAgICAgICAgICAuc2luZ2xlKCk7XHJcbiAgICAgICAgICBpZiAocGxhbkVycm9yKSB0aHJvdyBwbGFuRXJyb3I7XHJcbiAgICAgICAgICBzdWJzY3JpcHRpb25QbGFuID0gcGxhbkRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIG9yZ0luZm8gPSB7XHJcbiAgICAgICAgICBpZDogb3JnRGF0YS5pZCxcclxuICAgICAgICAgIG5hbWU6IG9yZ0RhdGEubmFtZSxcclxuICAgICAgICAgIHN1YnNjcmlwdGlvblBsYW4sXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBzZXRPcmcob3JnSW5mbyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBGZXRjaCB1c2VyIHJvbGVzIGZyb20gdXNlcl9wb2xpY2llcyAtPiBwZXJtaXNzaW9uX3BvbGljaWVzXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogdXNlclBvbGljaWVzLCBlcnJvcjogdXNlclBvbGljaWVzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3VzZXJfcG9saWNpZXMnKVxyXG4gICAgICAgIC5zZWxlY3QoJ3BvbGljeV9pZCwgcGVybWlzc2lvbl9wb2xpY2llcyhpZCwgcG9saWN5X25hbWUsIGRlc2NyaXB0aW9uKScpXHJcbiAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKTtcclxuICAgICAgaWYgKHVzZXJQb2xpY2llc0Vycm9yKSB0aHJvdyB1c2VyUG9saWNpZXNFcnJvcjtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHVzZXJSb2xlczogUm9sZVtdID0gKHVzZXJQb2xpY2llcyB8fCBbXSkubWFwKCh1cDogeyBwZXJtaXNzaW9uX3BvbGljaWVzOiB7IGlkOiBzdHJpbmc7IHBvbGljeV9uYW1lOiBzdHJpbmc7IGRlc2NyaXB0aW9uOiBzdHJpbmcgfCBudWxsIH0gfSkgPT4gKHtcclxuICAgICAgICBpZDogdXAucGVybWlzc2lvbl9wb2xpY2llcy5pZCxcclxuICAgICAgICBuYW1lOiB1cC5wZXJtaXNzaW9uX3BvbGljaWVzLnBvbGljeV9uYW1lLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiB1cC5wZXJtaXNzaW9uX3BvbGljaWVzLmRlc2NyaXB0aW9uIHx8IHVuZGVmaW5lZCxcclxuICAgICAgfSkpO1xyXG4gICAgICBzZXRSb2xlcyh1c2VyUm9sZXMpO1xyXG4gICAgICBcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHJvbGVzL29yZyBpbmZvOicsIGVycik7XHJcbiAgICAgIHNldE9yZyhudWxsKTtcclxuICAgICAgc2V0Um9sZXMoW10pO1xyXG4gICAgICBzZXRFcnJvcignRmFpbGVkIHRvIGxvYWQgb3JnYW5pemF0aW9uIG9yIHJvbGVzLicpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0Um9sZXNMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9LCBbc3VwYWJhc2VdKTtcclxuXHJcbiAgLy8gRW5oYW5jZWQgZGVtbyB1c2VyL29yZy9yb2xlcyBmYWxsYmFja1xyXG4gIGNvbnN0IGxvYWREZW1vVXNlckNvbnRleHQgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XHJcbiAgICAvLyBHZXQgZGVtbyBjb25maWd1cmF0aW9uIGZyb20gRGVtb0NvbnRleHQgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgZmFsbGJhY2tcclxuICAgIGNvbnN0IGRlbW9Db25maWcgPSBkZW1vQ29udGV4dD8uY3VycmVudENvbmZpZyB8fCBnZXREZW1vQ29uZmlnKCk7XHJcbiAgICBjb25zb2xlLmxvZygnRGVtbyBjb25maWd1cmF0aW9uIGxvYWRlZDonLCBkZW1vQ29uZmlnKTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgc2V0VXNlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIHNldFJvbGVzTG9hZGluZyh0cnVlKTtcclxuICAgICAgc2V0QXZhdGFyc0xvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIHNldERlbW9Nb2RlKHRydWUpO1xyXG4gICAgICBcclxuICAgICAgLy8gVHJ5IHRvIGxvYWQgZGVtbyB1c2VyL29yZy9yb2xlcyBmcm9tIERCLCBmYWxsYmFjayB0byBoYXJkY29kZWRcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAvLyBUcnkgdG8gZmluZCBhIGRlbW8gdXNlciBpbiB0aGUgdXNlcnMgdGFibGVcclxuICAgICAgICBjb25zdCB7IGRhdGE6IGRlbW9Vc2VycyB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCd1c2VycycpXHJcbiAgICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAgIC5pbGlrZSgnZW1haWwnLCAnJWRlbW8lJyk7XHJcbiAgICAgICAgY29uc3QgZGVtb1VzZXIgPSBkZW1vVXNlcnMgJiYgZGVtb1VzZXJzLmxlbmd0aCA+IDAgPyBkZW1vVXNlcnNbMF0gOiBudWxsO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRyeSB0byBmaW5kIGEgZGVtbyBvcmdcclxuICAgICAgICBsZXQgZGVtb09yZyA9IG51bGw7XHJcbiAgICAgICAgbGV0IGRlbW9QbGFuID0gbnVsbDtcclxuICAgICAgICBpZiAoZGVtb1VzZXIgJiYgZGVtb1VzZXIub3JnX2lkKSB7XHJcbiAgICAgICAgICBjb25zdCB7IGRhdGE6IG9yZ0RhdGEgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgIC5mcm9tKCdvcmdhbml6YXRpb25zJylcclxuICAgICAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgICAgIC5lcSgnaWQnLCBkZW1vVXNlci5vcmdfaWQpXHJcbiAgICAgICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICAgIGRlbW9PcmcgPSBvcmdEYXRhO1xyXG4gICAgICAgICAgaWYgKG9yZ0RhdGEgJiYgb3JnRGF0YS5zdWJzY3JpcHRpb25fcGxhbl9pZCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IHBsYW5EYXRhIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgICAgIC5mcm9tKCdzdWJzY3JpcHRpb25fcGxhbnMnKVxyXG4gICAgICAgICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgICAgICAgIC5lcSgnaWQnLCBvcmdEYXRhLnN1YnNjcmlwdGlvbl9wbGFuX2lkKVxyXG4gICAgICAgICAgICAgIC5zaW5nbGUoKTtcclxuICAgICAgICAgICAgZGVtb1BsYW4gPSBwbGFuRGF0YTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVHJ5IHRvIGZpbmQgZGVtbyByb2xlc1xyXG4gICAgICAgIGxldCBkZW1vUm9sZXM6IFJvbGVbXSA9IFtdO1xyXG4gICAgICAgIGlmIChkZW1vVXNlcikge1xyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiB1c2VyUG9saWNpZXMgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgIC5mcm9tKCd1c2VyX3BvbGljaWVzJylcclxuICAgICAgICAgICAgLnNlbGVjdCgncG9saWN5X2lkLCBwZXJtaXNzaW9uX3BvbGljaWVzKGlkLCBwb2xpY3lfbmFtZSwgZGVzY3JpcHRpb24pJylcclxuICAgICAgICAgICAgLmVxKCd1c2VyX2lkJywgZGVtb1VzZXIuaWQpO1xyXG4gICAgICAgICAgZGVtb1JvbGVzID0gKHVzZXJQb2xpY2llcyB8fCBbXSkubWFwKCh1cDogeyBwZXJtaXNzaW9uX3BvbGljaWVzOiB7IGlkOiBzdHJpbmc7IHBvbGljeV9uYW1lOiBzdHJpbmc7IGRlc2NyaXB0aW9uOiBzdHJpbmcgfCBudWxsIH0gfSkgPT4gKHtcclxuICAgICAgICAgICAgaWQ6IHVwLnBlcm1pc3Npb25fcG9saWNpZXMuaWQsXHJcbiAgICAgICAgICAgIG5hbWU6IHVwLnBlcm1pc3Npb25fcG9saWNpZXMucG9saWN5X25hbWUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB1cC5wZXJtaXNzaW9uX3BvbGljaWVzLmRlc2NyaXB0aW9uIHx8IHVuZGVmaW5lZCxcclxuICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2V0IGNvbnRleHQgc3RhdGUgZnJvbSBkYXRhYmFzZVxyXG4gICAgICAgIGlmIChkZW1vVXNlcikge1xyXG4gICAgICAgICAgLy8gQ29udmVydCBkYXRhYmFzZSB1c2VyIHRvIFN1cGFiYXNlIFVzZXIgZm9ybWF0XHJcbiAgICAgICAgICBjb25zdCBzdXBhYmFzZVVzZXIgPSB7XHJcbiAgICAgICAgICAgIC4uLmRlbW9Vc2VyLFxyXG4gICAgICAgICAgICBhcHBfbWV0YWRhdGE6IHt9LFxyXG4gICAgICAgICAgICB1c2VyX21ldGFkYXRhOiB7fSxcclxuICAgICAgICAgICAgYXVkOiAnYXV0aGVudGljYXRlZCdcclxuICAgICAgICAgIH0gYXMgVXNlcjtcclxuICAgICAgICAgIHNldFVzZXIoc3VwYWJhc2VVc2VyKTtcclxuICAgICAgICAgIHNldFVzZXJQcm9maWxlKHtcclxuICAgICAgICAgICAgaWQ6IGRlbW9Db25maWcuaWQsXHJcbiAgICAgICAgICAgIGVtYWlsOiBkZW1vQ29uZmlnLmVtYWlsLFxyXG4gICAgICAgICAgICBmaXJzdF9uYW1lOiBkZW1vQ29uZmlnLm5hbWU/LnNwbGl0KCcgJylbMF0gfHwgbnVsbCxcclxuICAgICAgICAgICAgbGFzdF9uYW1lOiBkZW1vQ29uZmlnLm5hbWU/LnNwbGl0KCcgJykuc2xpY2UoMSkuam9pbignICcpIHx8IG51bGwsXHJcbiAgICAgICAgICAgIG9yZ19pZDogYCR7ZGVtb0NvbmZpZy5pZH0tb3JnYCxcclxuICAgICAgICAgICAgYWNjb3VudF90eXBlOiAnZGVtbycsXHJcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICBsYXN0X2xvZ2luOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIHBob25lOiBudWxsLFxyXG4gICAgICAgICAgICB0aW1lem9uZTogbnVsbCxcclxuICAgICAgICAgICAgbG9jYWxlOiAnZW4nXHJcbiAgICAgICAgICB9IGFzIFVzZXJQcm9maWxlKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQWx3YXlzIGVuc3VyZSBkZW1vIG9yZyB3aXRoIHN1YnNjcmlwdGlvbiBwbGFuIGV4aXN0c1xyXG4gICAgICAgICAgY29uc3QgZW5zdXJlZERlbW9PcmcgPSBkZW1vT3JnICYmIGRlbW9QbGFuID8gXHJcbiAgICAgICAgICAgIHsgaWQ6IGRlbW9PcmcuaWQsIG5hbWU6IGRlbW9PcmcubmFtZSwgc3Vic2NyaXB0aW9uUGxhbjogZGVtb1BsYW4gfSA6XHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgLy8gVXNlIGNvbmZpZ3VyYWJsZSBkZW1vIG9yZ2FuaXphdGlvbiBmb3IgZGF0YWJhc2UgdXNlcnMgdG9vXHJcbiAgICAgICAgICAgICAgY29uc3QgZGVtb0NvbmZpZyA9IGdldERlbW9Db25maWcoKTtcclxuICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25QbGFuID0gY3JlYXRlRGVtb1N1YnNjcmlwdGlvblBsYW4oZGVtb0NvbmZpZyk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGlkOiBgJHtkZW1vVXNlci5pZH0tb3JnYCwgXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBkZW1vQ29uZmlnLm9yZ05hbWUsIFxyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uUGxhbiBcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnRGVtbyBvcmcgYmVpbmcgc2V0IGZvciBkYXRhYmFzZSB1c2VyOicsIGVuc3VyZWREZW1vT3JnKTtcclxuICAgICAgICAgIHNldE9yZyhlbnN1cmVkRGVtb09yZyk7XHJcbiAgICAgICAgICBzZXRSb2xlcyhkZW1vUm9sZXMubGVuZ3RoID4gMCA/IGRlbW9Sb2xlcyA6IFtcclxuICAgICAgICAgICAgeyBpZDogJzEnLCBuYW1lOiAnYWNjb3VudF9vd25lcicsIGRlc2NyaXB0aW9uOiAnRnVsbCBhZG1pbmlzdHJhdGl2ZSBhY2Nlc3MnIH0sXHJcbiAgICAgICAgICAgIHsgaWQ6ICcyJywgbmFtZTogJ29yZ19hZG1pbicsIGRlc2NyaXB0aW9uOiAnT3JnYW5pemF0aW9uIG1hbmFnZW1lbnQnIH1cclxuICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgLy8gTG9hZCBkZW1vIGF2YXRhcnNcclxuICAgICAgICAgIGF3YWl0IGxvYWRBdmF0YXJzKGRlbW9Vc2VyLmlkKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcclxuICAgICAgICBsb2dnZXIud2FybignRGF0YWJhc2UgZGVtbyB1c2VyIG5vdCBmb3VuZCwgdXNpbmcgaGFyZGNvZGVkIGZhbGxiYWNrOicsIGRiRXJyb3IpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdEZW1vIG1vZGUgZmFsbGJhY2sgdHJpZ2dlcmVkOicsIGRiRXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBGYWxsYmFjayB0byBjb25maWd1cmFibGUgZGVtbyBjb250ZXh0XHJcbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyQ29udGV4dDogQ3JlYXRpbmcgZGVtbyB1c2VyIGZyb20gY29uZmlndXJhdGlvbicpO1xyXG4gICAgICBcclxuICAgICAgLy8gQ3JlYXRlIGRlbW8gdXNlclxyXG4gICAgICBjb25zdCBkZW1vVXNlciA9IHsgXHJcbiAgICAgICAgaWQ6IGRlbW9Db25maWcuaWQsIFxyXG4gICAgICAgIGVtYWlsOiBkZW1vQ29uZmlnLmVtYWlsLCBcclxuICAgICAgICBuYW1lOiBkZW1vQ29uZmlnLm5hbWUsXHJcbiAgICAgICAgYXBwX21ldGFkYXRhOiB7fSxcclxuICAgICAgICB1c2VyX21ldGFkYXRhOiB7fSxcclxuICAgICAgICBhdWQ6ICdhdXRoZW50aWNhdGVkJyxcclxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSBhcyBVc2VyO1xyXG4gICAgICBzZXRVc2VyKGRlbW9Vc2VyKTtcclxuICAgICAgc2V0VXNlclByb2ZpbGUoe1xyXG4gICAgICAgIGlkOiBkZW1vQ29uZmlnLmlkLFxyXG4gICAgICAgIGVtYWlsOiBkZW1vQ29uZmlnLmVtYWlsLFxyXG4gICAgICAgIGZpcnN0X25hbWU6IGRlbW9Db25maWcubmFtZT8uc3BsaXQoJyAnKVswXSB8fCBudWxsLFxyXG4gICAgICAgIGxhc3RfbmFtZTogZGVtb0NvbmZpZy5uYW1lPy5zcGxpdCgnICcpLnNsaWNlKDEpLmpvaW4oJyAnKSB8fCBudWxsLFxyXG4gICAgICAgIG9yZ19pZDogYCR7ZGVtb0NvbmZpZy5pZH0tb3JnYCxcclxuICAgICAgICBhY2NvdW50X3R5cGU6ICdkZW1vJyxcclxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIGxhc3RfbG9naW46IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBwaG9uZTogbnVsbCxcclxuICAgICAgICB0aW1lem9uZTogbnVsbCxcclxuICAgICAgICBsb2NhbGU6ICdlbidcclxuICAgICAgfSBhcyBVc2VyUHJvZmlsZSk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBDcmVhdGUgZGVtbyBvcmdhbml6YXRpb24gd2l0aCBhcHByb3ByaWF0ZSBzdWJzY3JpcHRpb24gcGxhblxyXG4gICAgICBjb25zdCBzdWJzY3JpcHRpb25QbGFuID0gY3JlYXRlRGVtb1N1YnNjcmlwdGlvblBsYW4oZGVtb0NvbmZpZyk7XHJcbiAgICAgIGNvbnN0IGRlbW9PcmcgPSB7IFxyXG4gICAgICAgIGlkOiBgJHtkZW1vQ29uZmlnLmlkfS1vcmdgLCBcclxuICAgICAgICBuYW1lOiBkZW1vQ29uZmlnLm9yZ05hbWUsIFxyXG4gICAgICAgIHN1YnNjcmlwdGlvblBsYW4gXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBsb2dnZXIuaW5mbyhgU2V0dGluZyBkZW1vIG9yZyBmb3IgJHtkZW1vQ29uZmlnLnRpZXJ9IHRpZXI6YCwgZGVtb09yZyk7XHJcbiAgICAgIHNldE9yZyhkZW1vT3JnKTtcclxuICAgICAgY29uc29sZS5sb2coJ0RlbW8gb3JnIHNldDonLCBkZW1vT3JnKTtcclxuICAgICAgXHJcbiAgICAgIC8vIENyZWF0ZSBkZW1vIHJvbGVzIGJhc2VkIG9uIGNvbmZpZ3VyYXRpb25cclxuICAgICAgY29uc3QgZGVtb1JvbGVzID0gY3JlYXRlRGVtb1JvbGVzKGRlbW9Db25maWcpO1xyXG4gICAgICBzZXRSb2xlcyhkZW1vUm9sZXMpO1xyXG4gICAgICBjb25zb2xlLmxvZygnRGVtbyByb2xlcyBzZXQ6JywgZGVtb1JvbGVzKTtcclxuICAgICAgXHJcbiAgICAgIC8vIENyZWF0ZSBkZW1vIGF2YXRhcnMgYmFzZWQgb24gY29uZmlndXJhdGlvblxyXG4gICAgICBjb25zdCBkZW1vQXZhdGFycyA9IGNyZWF0ZURlbW9BdmF0YXJzKGRlbW9Db25maWcpO1xyXG4gICAgICBzZXRBdmF0YXJzKGRlbW9BdmF0YXJzKTtcclxuICAgICAgaWYgKGRlbW9BdmF0YXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBzZXRDdXJyZW50QXZhdGFyKGRlbW9BdmF0YXJzWzBdKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zb2xlLmxvZyhgRGVtbyBhdmF0YXJzIGNyZWF0ZWQ6ICR7ZGVtb0F2YXRhcnMubGVuZ3RofWApO1xyXG4gICAgICBcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIGRlbW8gdXNlciBjb250ZXh0OicsIGVycik7XHJcbiAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBkZW1vIG1vZGUnKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIC8vIENvbXBsZXRlIGFsbCBsb2FkaW5nIHN0YXRlcyBmb3IgZGVtbyBtb2RlXHJcbiAgICAgIGNvbnNvbGUubG9nKCdEZW1vIG1vZGUgaW5pdGlhbGl6YXRpb24gY29tcGxldGUsIHVwZGF0aW5nIGxvYWRpbmcgc3RhdGVzJyk7XHJcbiAgICAgIHNldFVzZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgc2V0Um9sZXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgc2V0QXZhdGFyc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICBzZXRJc0luaXRpYWxpemVkKHRydWUpO1xyXG4gICAgfVxyXG4gIH0sIFtzdXBhYmFzZSwgbG9hZEF2YXRhcnNdKTtcclxuXHJcbiAgLy8gTWFpbiBpbml0aWFsaXphdGlvbiBlZmZlY3QgLSBydW5zIG9ubHkgb25jZVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoaW5pdGlhbGl6YXRpb25SZWYuY3VycmVudCkgcmV0dXJuO1xyXG4gICAgaW5pdGlhbGl6YXRpb25SZWYuY3VycmVudCA9IHRydWU7XHJcblxyXG4gICAgY29uc3QgbG9hZFVzZXIgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgc2V0VXNlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgc2V0RXJyb3IobnVsbCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiB7IHNlc3Npb24gfSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XHJcbiAgICAgICAgaWYgKHNlc3Npb24/LnVzZXIpIHtcclxuICAgICAgICAgIC8vIFJlYWwgdXNlciBhdXRoZW50aWNhdGlvblxyXG4gICAgICAgICAgc2V0VXNlcihzZXNzaW9uLnVzZXIpO1xyXG4gICAgICAgICAgc2V0VXNlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgYXdhaXQgbG9hZFVzZXJQcm9maWxlKHNlc3Npb24udXNlci5pZCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIExvYWQgcm9sZXMgYW5kIGF2YXRhcnMgaW4gcGFyYWxsZWxcclxuICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgZmV0Y2hSb2xlc0FuZE9yZyhzZXNzaW9uLnVzZXIuaWQpLFxyXG4gICAgICAgICAgICBsb2FkQXZhdGFycyhzZXNzaW9uLnVzZXIuaWQpXHJcbiAgICAgICAgICBdKTtcclxuICAgICAgICAgIHNldElzSW5pdGlhbGl6ZWQodHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIE5vIHNlc3Npb24gLSBsb2FkIGRlbW8gbW9kZSBmb3IgZGV2ZWxvcG1lbnRcclxuICAgICAgICAgIGxvZ2dlci5pbmZvKCdObyB1c2VyIHNlc3Npb24gZm91bmQsIGxvYWRpbmcgZGVtbyBtb2RlJyk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnVXNlckNvbnRleHQ6IFN0YXJ0aW5nIGRlbW8gbW9kZSBsb2FkJyk7XHJcbiAgICAgICAgICBhd2FpdCBsb2FkRGVtb1VzZXJDb250ZXh0KCk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnVXNlckNvbnRleHQ6IERlbW8gbW9kZSBsb2FkIGNvbXBsZXRlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBsb2FkaW5nIHVzZXI6JywgZXJyKTtcclxuICAgICAgICBzZXRFcnJvcignRmFpbGVkIHRvIGxvYWQgdXNlciBjb250ZXh0LicpO1xyXG4gICAgICAgIHNldFVzZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICBzZXRSb2xlc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIHNldEF2YXRhcnNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICBzZXRJc0luaXRpYWxpemVkKHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBsb2FkVXNlcigpO1xyXG5cclxuICAgIC8vIExpc3RlbiBmb3IgYXV0aCBjaGFuZ2VzXHJcbiAgICBjb25zdCB7IGRhdGE6IHsgc3Vic2NyaXB0aW9uIH0gfSA9IHN1cGFiYXNlLmF1dGgub25BdXRoU3RhdGVDaGFuZ2UoYXN5bmMgKGV2ZW50LCBzZXNzaW9uKSA9PiB7XHJcbiAgICAgIGlmIChldmVudCA9PT0gJ1NJR05FRF9JTicgJiYgc2Vzc2lvbj8udXNlcikge1xyXG4gICAgICAgIHNldFVzZXIoc2Vzc2lvbi51c2VyKTtcclxuICAgICAgICBzZXRVc2VyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgYXdhaXQgbG9hZFVzZXJQcm9maWxlKHNlc3Npb24udXNlci5pZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTG9hZCByb2xlcyBhbmQgYXZhdGFycyBpbiBwYXJhbGxlbFxyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgIGZldGNoUm9sZXNBbmRPcmcoc2Vzc2lvbi51c2VyLmlkKSxcclxuICAgICAgICAgIGxvYWRBdmF0YXJzKHNlc3Npb24udXNlci5pZClcclxuICAgICAgICBdKTtcclxuICAgICAgICBzZXRJc0luaXRpYWxpemVkKHRydWUpO1xyXG4gICAgICB9IGVsc2UgaWYgKGV2ZW50ID09PSAnU0lHTkVEX09VVCcpIHtcclxuICAgICAgICBzZXRVc2VyKG51bGwpO1xyXG4gICAgICAgIHNldFVzZXJQcm9maWxlKG51bGwpO1xyXG4gICAgICAgIHNldEF2YXRhcnMoW10pO1xyXG4gICAgICAgIHNldEN1cnJlbnRBdmF0YXIobnVsbCk7XHJcbiAgICAgICAgc2V0Um9sZXMoW10pO1xyXG4gICAgICAgIHNldE9yZyhudWxsKTtcclxuICAgICAgICAvLyBMb2FkIGRlbW8gdXNlciBmb3IgY29udGludWVkIGRldmVsb3BtZW50XHJcbiAgICAgICAgYXdhaXQgbG9hZERlbW9Vc2VyQ29udGV4dCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgIH07XHJcbiAgfSwgW3N1cGFiYXNlLmF1dGgsIGxvYWRVc2VyUHJvZmlsZSwgbG9hZERlbW9Vc2VyQ29udGV4dCwgZmV0Y2hSb2xlc0FuZE9yZywgbG9hZEF2YXRhcnNdKTtcclxuXHJcbiAgLy8gTGlzdGVuIGZvciBkZW1vIHNjZW5hcmlvIGNoYW5nZXMgZnJvbSBEZW1vQ29udGV4dFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWRlbW9Db250ZXh0KSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaGFuZGxlRGVtb1NjZW5hcmlvQ2hhbmdlID0gYXN5bmMgKGV2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICBjb25zdCBjdXN0b21FdmVudCA9IGV2ZW50IGFzIEN1c3RvbUV2ZW50O1xyXG4gICAgICBjb25zdCB7IGNvbmZpZzogbmV3Q29uZmlnIH0gPSBjdXN0b21FdmVudC5kZXRhaWw7XHJcbiAgICAgIFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxvZ2dlci5pbmZvKCdEZW1vIHNjZW5hcmlvIGNoYW5nZWQsIHVwZGF0aW5nIHVzZXIgY29udGV4dDonLCBuZXdDb25maWcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFVwZGF0ZSBkZW1vIHVzZXIgY29udGV4dCB3aXRoIG5ldyBjb25maWd1cmF0aW9uXHJcbiAgICAgICAgY29uc3QgZGVtb1VzZXIgPSB7IFxyXG4gICAgICAgICAgaWQ6IG5ld0NvbmZpZy5pZCwgXHJcbiAgICAgICAgICBlbWFpbDogbmV3Q29uZmlnLmVtYWlsLCBcclxuICAgICAgICAgIG5hbWU6IG5ld0NvbmZpZy5uYW1lLFxyXG4gICAgICAgICAgYXBwX21ldGFkYXRhOiB7fSxcclxuICAgICAgICAgIHVzZXJfbWV0YWRhdGE6IHt9LFxyXG4gICAgICAgICAgYXVkOiAnYXV0aGVudGljYXRlZCcsXHJcbiAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9IGFzIFVzZXI7XHJcbiAgICAgICAgc2V0VXNlcihkZW1vVXNlcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2V0VXNlclByb2ZpbGUoe1xyXG4gICAgICAgICAgaWQ6IG5ld0NvbmZpZy5pZCxcclxuICAgICAgICAgIGVtYWlsOiBuZXdDb25maWcuZW1haWwsXHJcbiAgICAgICAgICBmaXJzdF9uYW1lOiBuZXdDb25maWcubmFtZT8uc3BsaXQoJyAnKVswXSB8fCBudWxsLFxyXG4gICAgICAgICAgbGFzdF9uYW1lOiBuZXdDb25maWcubmFtZT8uc3BsaXQoJyAnKS5zbGljZSgxKS5qb2luKCcgJykgfHwgbnVsbCxcclxuICAgICAgICAgIG9yZ19pZDogYCR7bmV3Q29uZmlnLmlkfS1vcmdgLFxyXG4gICAgICAgICAgYWNjb3VudF90eXBlOiAnZGVtbycsXHJcbiAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICBsYXN0X2xvZ2luOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICBwaG9uZTogbnVsbCxcclxuICAgICAgICAgIHRpbWV6b25lOiBudWxsLFxyXG4gICAgICAgICAgbG9jYWxlOiAnZW4nXHJcbiAgICAgICAgfSBhcyBVc2VyUHJvZmlsZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ3JlYXRlIGRlbW8gb3JnYW5pemF0aW9uIHdpdGggbmV3IHN1YnNjcmlwdGlvbiBwbGFuXHJcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uUGxhbiA9IGNyZWF0ZURlbW9TdWJzY3JpcHRpb25QbGFuKG5ld0NvbmZpZyk7XHJcbiAgICAgICAgY29uc3QgZGVtb09yZyA9IHsgXHJcbiAgICAgICAgICBpZDogYCR7bmV3Q29uZmlnLmlkfS1vcmdgLCBcclxuICAgICAgICAgIG5hbWU6IG5ld0NvbmZpZy5vcmdOYW1lLCBcclxuICAgICAgICAgIHN1YnNjcmlwdGlvblBsYW4gXHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZXRPcmcoZGVtb09yZyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ3JlYXRlIGRlbW8gcm9sZXNcclxuICAgICAgICBjb25zdCBkZW1vUm9sZXMgPSBjcmVhdGVEZW1vUm9sZXMobmV3Q29uZmlnKTtcclxuICAgICAgICBzZXRSb2xlcyhkZW1vUm9sZXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENyZWF0ZSBkZW1vIGF2YXRhcnNcclxuICAgICAgICBjb25zdCBkZW1vQXZhdGFycyA9IGNyZWF0ZURlbW9BdmF0YXJzKG5ld0NvbmZpZyk7XHJcbiAgICAgICAgc2V0QXZhdGFycyhkZW1vQXZhdGFycyk7XHJcbiAgICAgICAgaWYgKGRlbW9BdmF0YXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHNldEN1cnJlbnRBdmF0YXIoZGVtb0F2YXRhcnNbMF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBsb2dnZXIuaW5mbygnRGVtbyB1c2VyIGNvbnRleHQgdXBkYXRlZCBzdWNjZXNzZnVsbHkgZm9yIG5ldyBzY2VuYXJpbycpO1xyXG4gICAgICAgIFxyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgdXNlciBjb250ZXh0IGZvciBuZXcgZGVtbyBzY2VuYXJpbzonLCBlcnIpO1xyXG4gICAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gc3dpdGNoIGRlbW8gc2NlbmFyaW8nKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXIgZm9yIGRlbW8gc2NlbmFyaW8gY2hhbmdlc1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZW1vU2NlbmFyaW9DaGFuZ2VkJywgaGFuZGxlRGVtb1NjZW5hcmlvQ2hhbmdlKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RlbW9TY2VuYXJpb0NoYW5nZWQnLCBoYW5kbGVEZW1vU2NlbmFyaW9DaGFuZ2UpO1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH0sIFtkZW1vQ29udGV4dF0pO1xyXG5cclxuICAvLyBVdGlsaXR5IGZ1bmN0aW9uc1xyXG4gIGNvbnN0IGhhc1JvbGUgPSB1c2VDYWxsYmFjaygocm9sZU5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgLy8gT25seSByZXR1cm4gdHJ1ZSBpZiB3ZSdyZSByZWFkeSBhbmQgYWN0dWFsbHkgaGF2ZSB0aGUgcm9sZVxyXG4gICAgcmV0dXJuIGxvYWRpbmdTdGF0ZS5pc1JlYWR5ICYmIHJvbGVzLnNvbWUociA9PiByLm5hbWUgPT09IHJvbGVOYW1lKTtcclxuICB9LCBbcm9sZXMsIGxvYWRpbmdTdGF0ZS5pc1JlYWR5XSk7XHJcbiAgXHJcbiAgY29uc3QgY2FuQWNjZXNzID0gdXNlQ2FsbGJhY2soKGZlYXR1cmU6IHN0cmluZykgPT4ge1xyXG4gICAgLy8gT25seSByZXR1cm4gdHJ1ZSBpZiB3ZSdyZSByZWFkeSBhbmQgaGF2ZSBhY2Nlc3NcclxuICAgIGlmICghbG9hZGluZ1N0YXRlLmlzUmVhZHkgfHwgIW9yZz8uc3Vic2NyaXB0aW9uUGxhbikgcmV0dXJuIGZhbHNlO1xyXG4gICAgY29uc3QgZmVhdHVyZXMgPSBvcmcuc3Vic2NyaXB0aW9uUGxhbi5mZWF0dXJlc19pbmNsdWRlZCB8fCB7fTtcclxuICAgIHJldHVybiBmZWF0dXJlc1tmZWF0dXJlXSA9PT0gdHJ1ZTtcclxuICB9LCBbb3JnLCBsb2FkaW5nU3RhdGUuaXNSZWFkeV0pO1xyXG4gIFxyXG4gIGNvbnN0IGdldFRpZXJMaW1pdCA9IHVzZUNhbGxiYWNrKChmZWF0dXJlOiBzdHJpbmcpID0+IHtcclxuICAgIHJldHVybiBvcmc/LnN1YnNjcmlwdGlvblBsYW4/LltgJHtmZWF0dXJlfV9saW1pdGBdO1xyXG4gIH0sIFtvcmddKTtcclxuXHJcbiAgLy8gQ3JlYXRlIGEgbmV3IGF2YXRhciB3aXRoIHN1YnNjcmlwdGlvbiBsaW1pdCBjaGVja2luZ1xyXG4gIGNvbnN0IGNyZWF0ZUF2YXRhciA9IGFzeW5jIChuYW1lOiBzdHJpbmcpOiBQcm9taXNlPEF2YXRhciB8IG51bGw+ID0+IHtcclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICBzZXRFcnJvcignTXVzdCBiZSBsb2dnZWQgaW4gdG8gY3JlYXRlIGF2YXRhcicpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBzdWJzY3JpcHRpb24gbGltaXRzIGJlZm9yZSBjcmVhdGluZyBhdmF0YXJcclxuICAgIGNvbnN0IGN1cnJlbnRBdmF0YXJzQ291bnQgPSBhdmF0YXJzLmxlbmd0aDtcclxuICAgIGlmIChvcmc/LnN1YnNjcmlwdGlvblBsYW4pIHtcclxuICAgICAgY29uc3QgYXZhdGFyTGltaXQgPSBvcmcuc3Vic2NyaXB0aW9uUGxhbi5hdmF0YXJfbGltaXQgfHwgNTtcclxuICAgICAgaWYgKGN1cnJlbnRBdmF0YXJzQ291bnQgPj0gYXZhdGFyTGltaXQpIHtcclxuICAgICAgICBjb25zdCB0aWVyTmFtZSA9IG9yZy5zdWJzY3JpcHRpb25QbGFuLnRpZXIgfHwgJ2N1cnJlbnQgcGxhbic7XHJcbiAgICAgICAgc2V0RXJyb3IoYEF2YXRhciBsaW1pdCByZWFjaGVkICgke2N1cnJlbnRBdmF0YXJzQ291bnR9LyR7YXZhdGFyTGltaXR9KS4gVXBncmFkZSB5b3VyICR7dGllck5hbWV9IHRvIGNyZWF0ZSBtb3JlIGF2YXRhcnMuYCk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBzZXRFcnJvcihudWxsKTtcclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnYXZhdGFycycpXHJcbiAgICAgICAgLmluc2VydCh7XHJcbiAgICAgICAgICB1c2VyX2lkOiB1c2VyLmlkLFxyXG4gICAgICAgICAgb3JnX2lkOiBvcmc/LmlkIHx8IG51bGwsXHJcbiAgICAgICAgICBuYW1lOiBuYW1lLnRyaW0oKSxcclxuICAgICAgICAgIHRoZW1lX3NldHRpbmdzOiB7fSxcclxuICAgICAgICAgIGdhbWVfcHJlZmVyZW5jZXM6IHt9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc2VsZWN0KClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgICBcclxuICAgICAgLy8gUmVmcmVzaCBhdmF0YXJzIGxpc3RcclxuICAgICAgYXdhaXQgbG9hZEF2YXRhcnModXNlci5pZCk7XHJcbiAgICAgIFxyXG4gICAgICBsb2dnZXIuaW5mbygnQXZhdGFyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OicsIHtcclxuICAgICAgICBhdmF0YXJJZDogZGF0YS5pZCxcclxuICAgICAgICBhdmF0YXJOYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgY3VycmVudENvdW50OiBjdXJyZW50QXZhdGFyc0NvdW50ICsgMSxcclxuICAgICAgICB0aWVyOiBvcmc/LnN1YnNjcmlwdGlvblBsYW4/LnRpZXJcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGF2YXRhcjonLCBlcnIpO1xyXG4gICAgICBzZXRFcnJvcihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBjcmVhdGUgYXZhdGFyJyk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIFJlZnJlc2ggYXZhdGFycyBmcm9tIGRhdGFiYXNlXHJcbiAgY29uc3QgcmVmcmVzaEF2YXRhcnMgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAodXNlcikge1xyXG4gICAgICBhd2FpdCBsb2FkQXZhdGFycyh1c2VyLmlkKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBTaWduIG91dCB0aGUgY3VycmVudCB1c2VyXHJcbiAgY29uc3Qgc2lnbk91dCA9IGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbk91dCgpO1xyXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2lnbmluZyBvdXQ6JywgZXJyKTtcclxuICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byBzaWduIG91dCcpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIFZpZXcgQXMgZnVuY3Rpb25hbGl0eVxyXG4gIGNvbnN0IGlzVmlld0FzID0gdmlld0FzUm9sZSAhPT0gbnVsbCB8fCB2aWV3QXNBdmF0YXIgIT09IG51bGw7XHJcbiAgY29uc3QgcmVzZXRWaWV3QXMgPSAoKSA9PiB7XHJcbiAgICBzZXRWaWV3QXNSb2xlKG51bGwpO1xyXG4gICAgc2V0Vmlld0FzQXZhdGFyKG51bGwpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNvbnRleHRWYWx1ZTogRXh0ZW5kZWRVc2VyQ29udGV4dFR5cGUgPSB7XHJcbiAgICB1c2VyLFxyXG4gICAgdXNlclByb2ZpbGUsXHJcbiAgICBhdmF0YXJzLFxyXG4gICAgY3VycmVudEF2YXRhcixcclxuICAgIGxvYWRpbmc6ICFsb2FkaW5nU3RhdGUuaXNSZWFkeSwgLy8gU2ltcGxpZmllZCBsb2FkaW5nIHN0YXRlIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XHJcbiAgICBlcnJvcixcclxuICAgIHNldEN1cnJlbnRBdmF0YXIsXHJcbiAgICBjcmVhdGVBdmF0YXIsXHJcbiAgICByZWZyZXNoQXZhdGFycyxcclxuICAgIHNpZ25PdXQsXHJcbiAgICByb2xlcyxcclxuICAgIG9yZyxcclxuICAgIGhhc1JvbGUsXHJcbiAgICBjYW5BY2Nlc3MsXHJcbiAgICBnZXRUaWVyTGltaXQsXHJcbiAgICB2aWV3QXNSb2xlLFxyXG4gICAgdmlld0FzQXZhdGFyLFxyXG4gICAgaXNWaWV3QXMsXHJcbiAgICBzZXRWaWV3QXNSb2xlLFxyXG4gICAgc2V0Vmlld0FzQXZhdGFyLFxyXG4gICAgcmVzZXRWaWV3QXMsXHJcbiAgICBsb2FkaW5nU3RhdGUsIC8vIE5ldzogZGV0YWlsZWQgbG9hZGluZyBzdGF0ZVxyXG4gIH07XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8VXNlckNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2NvbnRleHRWYWx1ZX0+XHJcbiAgICAgIHtjaGlsZHJlbn1cclxuICAgIDwvVXNlckNvbnRleHQuUHJvdmlkZXI+XHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZVVzZXIoKTogRXh0ZW5kZWRVc2VyQ29udGV4dFR5cGUge1xyXG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0KFVzZXJDb250ZXh0KTtcclxuICBpZiAoIWNvbnRleHQpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcigndXNlVXNlciBtdXN0IGJlIHVzZWQgd2l0aGluIGEgVXNlclByb3ZpZGVyJyk7XHJcbiAgfVxyXG4gIHJldHVybiBjb250ZXh0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlQXZhdGFyKCkge1xyXG4gIGNvbnN0IHsgY3VycmVudEF2YXRhciwgc2V0Q3VycmVudEF2YXRhciwgYXZhdGFycywgY3JlYXRlQXZhdGFyIH0gPSB1c2VVc2VyKCk7XHJcbiAgXHJcbiAgY29uc3Qgc3dpdGNoQXZhdGFyID0gdXNlQ2FsbGJhY2soKGF2YXRhcklkOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IGF2YXRhciA9IGF2YXRhcnMuZmluZChhID0+IGEuaWQgPT09IGF2YXRhcklkKTtcclxuICAgIGlmIChhdmF0YXIpIHtcclxuICAgICAgc2V0Q3VycmVudEF2YXRhcihhdmF0YXIpO1xyXG4gICAgfVxyXG4gIH0sIFthdmF0YXJzLCBzZXRDdXJyZW50QXZhdGFyXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBjdXJyZW50QXZhdGFyLFxyXG4gICAgc2V0Q3VycmVudEF2YXRhcixcclxuICAgIGF2YXRhcnMsXHJcbiAgICBzd2l0Y2hBdmF0YXIsXHJcbiAgICBjcmVhdGVBdmF0YXJcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlUm9sZUd1YXJkKCkge1xyXG4gIGNvbnN0IHsgaGFzUm9sZSwgY2FuQWNjZXNzLCByb2xlcywgbG9hZGluZ1N0YXRlIH0gPSB1c2VVc2VyKCk7XHJcbiAgXHJcbiAgLy8gQmFja3dhcmQgY29tcGF0aWJsZSBoYXNSb2xlIGZ1bmN0aW9uIFxyXG4gIGNvbnN0IGd1YXJkZWRIYXNSb2xlID0gdXNlQ2FsbGJhY2soKHJvbGVOYW1lOiBzdHJpbmcpID0+IHtcclxuICAgIHJldHVybiBsb2FkaW5nU3RhdGUuaXNSZWFkeSAmJiBoYXNSb2xlKHJvbGVOYW1lKTtcclxuICB9LCBbaGFzUm9sZSwgbG9hZGluZ1N0YXRlLmlzUmVhZHldKTtcclxuICBcclxuICBjb25zdCByZXF1aXJlUm9sZSA9IHVzZUNhbGxiYWNrKChyZXF1aXJlZFJvbGU6IHN0cmluZykgPT4ge1xyXG4gICAgaWYgKCFsb2FkaW5nU3RhdGUuaXNSZWFkeSkgcmV0dXJuIHsgYWxsb3dlZDogZmFsc2UsIHJlYXNvbjogJ0xvYWRpbmcuLi4nIH07XHJcbiAgICBjb25zdCBhbGxvd2VkID0gaGFzUm9sZShyZXF1aXJlZFJvbGUpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYWxsb3dlZCxcclxuICAgICAgcmVhc29uOiBhbGxvd2VkID8gdW5kZWZpbmVkIDogYFJlcXVpcmVzICR7cmVxdWlyZWRSb2xlfSByb2xlYFxyXG4gICAgfTtcclxuICB9LCBbaGFzUm9sZSwgbG9hZGluZ1N0YXRlLmlzUmVhZHldKTtcclxuICBcclxuICBjb25zdCByZXF1aXJlRmVhdHVyZSA9IHVzZUNhbGxiYWNrKChmZWF0dXJlOiBzdHJpbmcpID0+IHtcclxuICAgIGlmICghbG9hZGluZ1N0YXRlLmlzUmVhZHkpIHJldHVybiB7IGFsbG93ZWQ6IGZhbHNlLCByZWFzb246ICdMb2FkaW5nLi4uJyB9O1xyXG4gICAgY29uc3QgYWxsb3dlZCA9IGNhbkFjY2VzcyhmZWF0dXJlKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGFsbG93ZWQsXHJcbiAgICAgIHJlYXNvbjogYWxsb3dlZCA/IHVuZGVmaW5lZCA6IGBGZWF0dXJlICR7ZmVhdHVyZX0gbm90IGF2YWlsYWJsZSBpbiBjdXJyZW50IHBsYW5gXHJcbiAgICB9O1xyXG4gIH0sIFtjYW5BY2Nlc3MsIGxvYWRpbmdTdGF0ZS5pc1JlYWR5XSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICAvLyBCYWNrd2FyZCBjb21wYXRpYmxlIGludGVyZmFjZVxyXG4gICAgaGFzUm9sZTogZ3VhcmRlZEhhc1JvbGUsXHJcbiAgICBpc1JlYWR5OiBsb2FkaW5nU3RhdGUuaXNSZWFkeSxcclxuICAgIHJvbGVzOiBsb2FkaW5nU3RhdGUuaXNSZWFkeSA/IHJvbGVzIDogW10sXHJcbiAgICBcclxuICAgIC8vIE5ldyBlbmhhbmNlZCBpbnRlcmZhY2VcclxuICAgIHJlcXVpcmVSb2xlLFxyXG4gICAgcmVxdWlyZUZlYXR1cmVcclxuICB9O1xyXG59ICJdLCJuYW1lcyI6WyJVc2VyUHJvdmlkZXIiLCJ1c2VBdmF0YXIiLCJ1c2VSb2xlR3VhcmQiLCJ1c2VVc2VyIiwiVXNlckNvbnRleHQiLCJjcmVhdGVDb250ZXh0IiwidW5kZWZpbmVkIiwiY2hpbGRyZW4iLCJ1c2VyIiwic2V0VXNlciIsInVzZVN0YXRlIiwidXNlclByb2ZpbGUiLCJzZXRVc2VyUHJvZmlsZSIsImF2YXRhcnMiLCJzZXRBdmF0YXJzIiwiY3VycmVudEF2YXRhciIsInNldEN1cnJlbnRBdmF0YXIiLCJlcnJvciIsInNldEVycm9yIiwicm9sZXMiLCJzZXRSb2xlcyIsIm9yZyIsInNldE9yZyIsImRlbW9Nb2RlIiwic2V0RGVtb01vZGUiLCJ2aWV3QXNSb2xlIiwic2V0Vmlld0FzUm9sZSIsInZpZXdBc0F2YXRhciIsInNldFZpZXdBc0F2YXRhciIsInVzZXJMb2FkaW5nIiwic2V0VXNlckxvYWRpbmciLCJyb2xlc0xvYWRpbmciLCJzZXRSb2xlc0xvYWRpbmciLCJhdmF0YXJzTG9hZGluZyIsInNldEF2YXRhcnNMb2FkaW5nIiwiaXNJbml0aWFsaXplZCIsInNldElzSW5pdGlhbGl6ZWQiLCJkZW1vQ29udGV4dCIsInVzZURlbW8iLCJsb2FkaW5nU3RhdGUiLCJ1c2VNZW1vIiwiaXNSZWFkeSIsInN1cGFiYXNlIiwiY3JlYXRlQ2xpZW50IiwiaW5pdGlhbGl6YXRpb25SZWYiLCJ1c2VSZWYiLCJsb2FkVXNlclByb2ZpbGUiLCJ1c2VDYWxsYmFjayIsInVzZXJJZCIsImxvZ2dlciIsImRlYnVnIiwiZGF0YSIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsImVyciIsImxvYWRBdmF0YXJzIiwiY29uc29sZSIsImxvZyIsIm9yZGVyIiwiYXNjZW5kaW5nIiwibGVuZ3RoIiwicHJldiIsImZldGNoUm9sZXNBbmRPcmciLCJ1c2VyUHJvZmlsZURhdGEiLCJ1c2VyUHJvZmlsZUVycm9yIiwib3JnSWQiLCJvcmdfaWQiLCJvcmdJbmZvIiwib3JnRGF0YSIsIm9yZ0Vycm9yIiwic3Vic2NyaXB0aW9uUGxhbiIsInN1YnNjcmlwdGlvbl9wbGFuX2lkIiwicGxhbkRhdGEiLCJwbGFuRXJyb3IiLCJpZCIsIm5hbWUiLCJ1c2VyUG9saWNpZXMiLCJ1c2VyUG9saWNpZXNFcnJvciIsInVzZXJSb2xlcyIsIm1hcCIsInVwIiwicGVybWlzc2lvbl9wb2xpY2llcyIsInBvbGljeV9uYW1lIiwiZGVzY3JpcHRpb24iLCJsb2FkRGVtb1VzZXJDb250ZXh0IiwiZGVtb0NvbmZpZyIsImN1cnJlbnRDb25maWciLCJnZXREZW1vQ29uZmlnIiwiZGVtb1VzZXJzIiwiaWxpa2UiLCJkZW1vVXNlciIsImRlbW9PcmciLCJkZW1vUGxhbiIsImRlbW9Sb2xlcyIsInN1cGFiYXNlVXNlciIsImFwcF9tZXRhZGF0YSIsInVzZXJfbWV0YWRhdGEiLCJhdWQiLCJlbWFpbCIsImZpcnN0X25hbWUiLCJzcGxpdCIsImxhc3RfbmFtZSIsInNsaWNlIiwiam9pbiIsImFjY291bnRfdHlwZSIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0IiwibGFzdF9sb2dpbiIsInBob25lIiwidGltZXpvbmUiLCJsb2NhbGUiLCJlbnN1cmVkRGVtb09yZyIsImNyZWF0ZURlbW9TdWJzY3JpcHRpb25QbGFuIiwib3JnTmFtZSIsImRiRXJyb3IiLCJ3YXJuIiwiaW5mbyIsInRpZXIiLCJjcmVhdGVEZW1vUm9sZXMiLCJkZW1vQXZhdGFycyIsImNyZWF0ZURlbW9BdmF0YXJzIiwidXNlRWZmZWN0IiwiY3VycmVudCIsImxvYWRVc2VyIiwic2Vzc2lvbiIsImF1dGgiLCJnZXRTZXNzaW9uIiwiUHJvbWlzZSIsImFsbCIsInN1YnNjcmlwdGlvbiIsIm9uQXV0aFN0YXRlQ2hhbmdlIiwiZXZlbnQiLCJ1bnN1YnNjcmliZSIsImhhbmRsZURlbW9TY2VuYXJpb0NoYW5nZSIsImN1c3RvbUV2ZW50IiwiY29uZmlnIiwibmV3Q29uZmlnIiwiZGV0YWlsIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYXNSb2xlIiwicm9sZU5hbWUiLCJzb21lIiwiciIsImNhbkFjY2VzcyIsImZlYXR1cmUiLCJmZWF0dXJlcyIsImZlYXR1cmVzX2luY2x1ZGVkIiwiZ2V0VGllckxpbWl0IiwiY3JlYXRlQXZhdGFyIiwiY3VycmVudEF2YXRhcnNDb3VudCIsImF2YXRhckxpbWl0IiwiYXZhdGFyX2xpbWl0IiwidGllck5hbWUiLCJpbnNlcnQiLCJ1c2VyX2lkIiwidHJpbSIsInRoZW1lX3NldHRpbmdzIiwiZ2FtZV9wcmVmZXJlbmNlcyIsImF2YXRhcklkIiwiYXZhdGFyTmFtZSIsImN1cnJlbnRDb3VudCIsIkVycm9yIiwibWVzc2FnZSIsInJlZnJlc2hBdmF0YXJzIiwic2lnbk91dCIsImlzVmlld0FzIiwicmVzZXRWaWV3QXMiLCJjb250ZXh0VmFsdWUiLCJsb2FkaW5nIiwiUHJvdmlkZXIiLCJ2YWx1ZSIsImNvbnRleHQiLCJ1c2VDb250ZXh0Iiwic3dpdGNoQXZhdGFyIiwiYXZhdGFyIiwiZmluZCIsImEiLCJndWFyZGVkSGFzUm9sZSIsInJlcXVpcmVSb2xlIiwicmVxdWlyZWRSb2xlIiwiYWxsb3dlZCIsInJlYXNvbiIsInJlcXVpcmVGZWF0dXJlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O0lBeUdnQkEsWUFBWTtlQUFaQTs7SUEwbUJBQyxTQUFTO2VBQVRBOztJQW1CQUMsWUFBWTtlQUFaQTs7SUEzQkFDLE9BQU87ZUFBUEE7Ozs7K0RBenNCK0Y7d0JBRWxGO3dCQUdOOzRCQVFoQjs2QkFDZ0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQThFdkMsTUFBTUMsNEJBQWNDLElBQUFBLG9CQUFhLEVBQXNDQztBQVdoRSxTQUFTTixhQUFhLEVBQUVPLFFBQVEsRUFBMkI7SUFDaEUsTUFBTSxDQUFDQyxNQUFN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