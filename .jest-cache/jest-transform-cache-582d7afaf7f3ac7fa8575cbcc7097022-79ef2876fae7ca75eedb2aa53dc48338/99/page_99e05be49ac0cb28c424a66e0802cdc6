25614dc0f9688997707a6720cb2a91b0
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, /**
 * User Dashboard page for learning progress, recommendations, and metrics.
 * Focuses on robust data flow and error handling.
 * Uses role guard to prevent flashing of admin-only content.
 * Enhanced with demo context awareness for smooth scenario switching.
 */ "default", {
    enumerable: true,
    get: function() {
        return DashboardPage;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _UserContext = require("../../context/UserContext");
const _DemoContext = require("../../context/DemoContext");
const _analyticsService = require("../../utils/analyticsService");
const _logger = require("../../utils/logger");
const _material = require("@mui/material");
const _Settings = /*#__PURE__*/ _interop_require_default(require("@mui/icons-material/Settings"));
const _dynamic = /*#__PURE__*/ _interop_require_default(require("next/dynamic"));
const _components = require("../../shared/components");
const _useSubscription = require("../../hooks/useSubscription");
const _EnhancedThemeProvider = require("../../theme/EnhancedThemeProvider");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Dynamically import DashboardCharts to avoid SSR issues with Chart.js
const DashboardCharts = (0, _dynamic.default)(()=>Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/analytics/components/DashboardCharts"))), {
    loadableGenerated: {
        webpack: ()=>[
                require.resolveWeak("@/features/analytics/components/DashboardCharts")
            ]
    },
    ssr: false,
    loading: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Box, {
            sx: {
                p: 2,
                textAlign: 'center'
            },
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.CircularProgress, {})
        })
});
/**
 * Check if all contexts are ready for dashboard rendering
 */ function useIsDashboardReady() {
    const { isHydrated } = (0, _EnhancedThemeProvider.useEnhancedTheme)();
    const { loadingState } = (0, _UserContext.useUser)();
    const { isTransitioning } = (0, _DemoContext.useDemo)();
    // Wait for theme, user context, and no ongoing demo transitions
    return isHydrated && loadingState.isReady && !isTransitioning;
}
function DashboardPage() {
    const isDashboardReady = useIsDashboardReady();
    const { currentAvatar } = (0, _UserContext.useAvatar)();
    const { error: userError, loadingState } = (0, _UserContext.useUser)();
    const { hasRole, isReady } = (0, _UserContext.useRoleGuard)();
    const { isTransitioning, currentScenario, error: demoError } = (0, _DemoContext.useDemo)();
    const {} = (0, _useSubscription.useSubscription)();
    const avatarId = currentAvatar?.id;
    const [progress, setProgress] = (0, _react.useState)(null);
    const [metrics, setMetrics] = (0, _react.useState)(null);
    const [dashboardLoading, setDashboardLoading] = (0, _react.useState)(true);
    const [error, setError] = (0, _react.useState)(null);
    const [lastLoadedAvatarId, setLastLoadedAvatarId] = (0, _react.useState)(null);
    // Enhanced analytics loading with demo scenario awareness
    (0, _react.useEffect)(()=>{
        const loadData = async ()=>{
            // Don't load during demo transitions
            if (isTransitioning) {
                _logger.logger.debug('Skipping analytics load during demo transition');
                return;
            }
            // Wait for user context to be ready
            if (!loadingState.isReady) {
                _logger.logger.debug('Waiting for user context to be ready');
                return;
            }
            if (!avatarId) {
                _logger.logger.debug('No avatar ID, clearing dashboard data');
                setProgress(null);
                setMetrics(null);
                setDashboardLoading(false);
                setLastLoadedAvatarId(null);
                return;
            }
            // Skip if already loaded for this avatar (prevents unnecessary reloads)
            if (lastLoadedAvatarId === avatarId) {
                _logger.logger.debug('Analytics already loaded for this avatar:', avatarId);
                return;
            }
            setDashboardLoading(true);
            setError(null);
            try {
                _logger.logger.info('🔄 Loading analytics data for avatar:', avatarId, 'in scenario:', currentScenario);
                const [progressData, metricsData] = await Promise.all([
                    _analyticsService.analyticsService.getAvatarProgress(avatarId),
                    _analyticsService.analyticsService.getPerformanceMetrics(avatarId)
                ]);
                _logger.logger.debug('📊 Analytics data loaded successfully:', {
                    progress: progressData?.length || 0,
                    metrics: metricsData?.totalGamesPlayed || 0,
                    avatarId,
                    scenario: currentScenario
                });
                setProgress(progressData);
                setMetrics(metricsData);
                setLastLoadedAvatarId(avatarId);
            } catch (err) {
                _logger.logger.error('❌ Error loading analytics data:', {
                    error: err,
                    avatarId,
                    scenario: currentScenario,
                    isDemo: avatarId?.startsWith('demo-') || avatarId?.startsWith('00000000')
                });
                const errorMessage = err instanceof Error ? err.message : 'Failed to load analytics data';
                setError(`Analytics Error: ${errorMessage}`);
                // Clear data on error
                setProgress(null);
                setMetrics(null);
                setLastLoadedAvatarId(null);
            } finally{
                setDashboardLoading(false);
            }
        };
        loadData();
    }, [
        avatarId,
        isTransitioning,
        loadingState.isReady,
        currentScenario,
        lastLoadedAvatarId
    ]);
    // Reset loading state when demo scenario changes
    (0, _react.useEffect)(()=>{
        if (isTransitioning) {
            _logger.logger.debug('Demo transition started, resetting dashboard state');
            setError(null);
            setLastLoadedAvatarId(null); // Force reload after transition
        }
    }, [
        isTransitioning
    ]);
    // Handle demo scenario transition loading
    if (isTransitioning) {
        return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Box, {
            sx: {
                display: 'flex',
                justifyContent: 'center',
                alignItems: 'center',
                minHeight: '200px'
            },
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.CircularProgress, {}),
                /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Typography, {
                    variant: "body2",
                    sx: {
                        ml: 2
                    },
                    children: "Switching demo scenario..."
                })
            ]
        });
    }
    // Wait for full hydration before showing dashboard
    if (!isDashboardReady) {
        return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Box, {
            sx: {
                display: 'flex',
                justifyContent: 'center',
                alignItems: 'center',
                minHeight: '200px'
            },
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.CircularProgress, {}),
                /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Typography, {
                    variant: "body2",
                    sx: {
                        ml: 2
                    },
                    children: "Loading dashboard..."
                })
            ]
        });
    }
    // Handle demo context errors
    if (demoError) {
        return /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Box, {
            sx: {
                p: 2
            },
            children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Alert, {
                severity: "error",
                children: [
                    "Demo Error: ",
                    demoError,
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("br", {}),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Button, {
                        variant: "outlined",
                        sx: {
                            mt: 1
                        },
                        onClick: ()=>window.location.reload(),
                        children: "Reload Page"
                    })
                ]
            })
        });
    }
    // Handle user context errors
    if (userError) {
        return /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Box, {
            sx: {
                p: 2
            },
            children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Alert, {
                severity: "error",
                children: [
                    "User Context Error: ",
                    userError,
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("br", {}),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Button, {
                        variant: "outlined",
                        sx: {
                            mt: 1
                        },
                        onClick: ()=>window.location.reload(),
                        children: "Reload Page"
                    })
                ]
            })
        });
    }
    // Handle no avatar case
    if (!avatarId) {
        return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Alert, {
            severity: "info",
            sx: {
                m: 2
            },
            children: [
                "No avatar selected. Please create or select an avatar to view your dashboard.",
                currentScenario && /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Typography, {
                    variant: "body2",
                    sx: {
                        mt: 1,
                        fontStyle: 'italic'
                    },
                    children: [
                        "Current demo scenario: ",
                        currentScenario
                    ]
                })
            ]
        });
    }
    // Handle loading state
    if (dashboardLoading) {
        return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Box, {
            sx: {
                display: 'flex',
                justifyContent: 'center',
                alignItems: 'center',
                minHeight: '200px'
            },
            children: [
                /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.CircularProgress, {}),
                /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Typography, {
                    variant: "body2",
                    sx: {
                        ml: 2
                    },
                    children: [
                        "Loading analytics for ",
                        currentAvatar?.name || 'avatar',
                        "..."
                    ]
                })
            ]
        });
    }
    // Handle analytics errors
    if (error) {
        return /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Box, {
            sx: {
                p: 2
            },
            children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Alert, {
                severity: "warning",
                action: /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Button, {
                    color: "inherit",
                    size: "small",
                    onClick: ()=>{
                        setError(null);
                        setLastLoadedAvatarId(null);
                    },
                    children: "Retry"
                }),
                children: [
                    error,
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Typography, {
                        variant: "body2",
                        sx: {
                            mt: 1
                        },
                        children: [
                            "Avatar: ",
                            currentAvatar?.name,
                            " (",
                            avatarId,
                            ")",
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("br", {}),
                            "Scenario: ",
                            currentScenario
                        ]
                    })
                ]
            })
        });
    }
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Box, {
        sx: {
            p: 3
        },
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Box, {
                sx: {
                    display: 'flex',
                    justifyContent: 'space-between',
                    alignItems: 'center',
                    mb: 3
                },
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Box, {
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Typography, {
                                variant: "h4",
                                component: "h1",
                                children: "Analytics Dashboard"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Typography, {
                                variant: "body2",
                                color: "text.secondary",
                                children: [
                                    currentAvatar?.name,
                                    " • ",
                                    currentScenario
                                ]
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_components.SubscriptionBadge, {
                        variant: "basic"
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsxs)(_components.FeatureGate, {
                feature: "analytics",
                mode: "alert",
                fallback: /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Alert, {
                    severity: "warning",
                    sx: {
                        mb: 3
                    },
                    children: "Analytics dashboard requires a subscription plan. Please upgrade to access learning insights."
                }),
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Card, {
                        sx: {
                            mb: 3
                        },
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.CardContent, {
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Typography, {
                                    variant: "h6",
                                    gutterBottom: true,
                                    children: "Subscription Usage"
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)(_components.UsageOverview, {
                                    compact: true
                                })
                            ]
                        })
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_components.FeatureGate, {
                        feature: "advanced_reporting",
                        mode: "overlay",
                        fallback: /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Alert, {
                            severity: "info",
                            sx: {
                                mb: 2
                            },
                            children: "Advanced reporting requires Professional plan. Upgrade to access detailed analytics."
                        }),
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Card, {
                            sx: {
                                mb: 3
                            },
                            children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.CardContent, {
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Typography, {
                                        variant: "h6",
                                        gutterBottom: true,
                                        children: "Advanced Analytics"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(DashboardCharts, {
                                        progress: progress || [],
                                        metrics: metrics || {
                                            totalGamesPlayed: 0,
                                            averageSessionDuration: 0,
                                            overallCompletionRate: 0,
                                            skillLevelDistribution: {},
                                            subjectPreferences: {},
                                            learningVelocity: 0,
                                            engagementScore: 0
                                        }
                                    })
                                ]
                            })
                        })
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Box, {
                        sx: {
                            display: 'grid',
                            gridTemplateColumns: {
                                xs: '1fr',
                                md: 'repeat(2, 1fr)'
                            },
                            gap: 3
                        },
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Card, {
                                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.CardContent, {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Typography, {
                                            variant: "h6",
                                            gutterBottom: true,
                                            children: "Learning Progress"
                                        }),
                                        progress && progress.length > 0 ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Box, {
                                            children: progress.map((p, index)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Box, {
                                                    sx: {
                                                        mb: 2
                                                    },
                                                    children: [
                                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Typography, {
                                                            variant: "body1",
                                                            children: p.gameId
                                                        }),
                                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Typography, {
                                                            variant: "body2",
                                                            color: "text.secondary",
                                                            children: [
                                                                "Mastery: ",
                                                                p.masteryScore,
                                                                "% • Level: ",
                                                                p.skillLevel
                                                            ]
                                                        })
                                                    ]
                                                }, index))
                                        }) : /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Typography, {
                                            variant: "body2",
                                            color: "text.secondary",
                                            children: "No progress data available yet. Play some games to see your progress!"
                                        })
                                    ]
                                })
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Card, {
                                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.CardContent, {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Typography, {
                                            variant: "h6",
                                            gutterBottom: true,
                                            children: "Performance Summary"
                                        }),
                                        metrics ? /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Box, {
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Typography, {
                                                    variant: "body2",
                                                    children: [
                                                        "Games Played: ",
                                                        metrics.totalGamesPlayed
                                                    ]
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Typography, {
                                                    variant: "body2",
                                                    children: [
                                                        "Avg Session: ",
                                                        Math.round(metrics.averageSessionDuration / 60),
                                                        " minutes"
                                                    ]
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Typography, {
                                                    variant: "body2",
                                                    children: [
                                                        "Completion Rate: ",
                                                        Math.round(metrics.overallCompletionRate * 100),
                                                        "%"
                                                    ]
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Typography, {
                                                    variant: "body2",
                                                    children: [
                                                        "Engagement Score: ",
                                                        Math.round(metrics.engagementScore),
                                                        "%"
                                                    ]
                                                })
                                            ]
                                        }) : /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Typography, {
                                            variant: "body2",
                                            color: "text.secondary",
                                            children: "No performance data available yet."
                                        })
                                    ]
                                })
                            })
                        ]
                    })
                ]
            }),
            isReady && hasRole('account_owner') && /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Card, {
                sx: {
                    mt: 3
                },
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.CardContent, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_components.FeatureGate, {
                        feature: "user_management",
                        mode: "alert",
                        compact: true,
                        children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Box, {
                            sx: {
                                display: 'flex',
                                justifyContent: 'space-between',
                                alignItems: 'center'
                            },
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)(_material.Box, {
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Typography, {
                                            variant: "h6",
                                            children: "User Management"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Typography, {
                                            variant: "body2",
                                            color: "text.secondary",
                                            children: "Manage users, roles, and avatars for your organization"
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)(_material.Button, {
                                    variant: "contained",
                                    href: "/dashboard/user-management",
                                    startIcon: /*#__PURE__*/ (0, _jsxruntime.jsx)(_Settings.default, {}),
                                    children: "Manage Users"
                                })
                            ]
                        })
                    })
                })
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxyZXBvc1xcZmFtaWx5LW9yaWVudGVkXFxzcmNcXGFwcFxcZGFzaGJvYXJkXFxwYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcclxuXHJcbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IHVzZUF2YXRhciwgdXNlVXNlciwgdXNlUm9sZUd1YXJkIH0gZnJvbSBcIkAvY29udGV4dC9Vc2VyQ29udGV4dFwiO1xyXG5pbXBvcnQgeyB1c2VEZW1vIH0gZnJvbSBcIkAvY29udGV4dC9EZW1vQ29udGV4dFwiO1xyXG5pbXBvcnQgeyBhbmFseXRpY3NTZXJ2aWNlLCB0eXBlIExlYXJuaW5nUHJvZ3Jlc3NEYXRhLCB0eXBlIFBlcmZvcm1hbmNlTWV0cmljcyB9IGZyb20gXCJAL3V0aWxzL2FuYWx5dGljc1NlcnZpY2VcIjtcclxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIkAvdXRpbHMvbG9nZ2VyXCI7XHJcbmltcG9ydCB7IFxyXG4gIEJveCwgXHJcbiAgVHlwb2dyYXBoeSwgXHJcbiAgQ2lyY3VsYXJQcm9ncmVzcywgXHJcbiAgQWxlcnQsIFxyXG4gIEJ1dHRvbiwgXHJcbiAgQ2FyZCwgXHJcbiAgQ2FyZENvbnRlbnRcclxufSBmcm9tIFwiQG11aS9tYXRlcmlhbFwiO1xyXG5pbXBvcnQgeyBTZXR0aW5ncyB9IGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwnO1xyXG5pbXBvcnQgZHluYW1pYyBmcm9tICduZXh0L2R5bmFtaWMnO1xyXG5cclxuaW1wb3J0IHsgRmVhdHVyZUdhdGUsIFVzYWdlT3ZlcnZpZXcsIFN1YnNjcmlwdGlvbkJhZGdlIH0gZnJvbSAnQC9zaGFyZWQvY29tcG9uZW50cyc7XHJcbmltcG9ydCB7IHVzZVN1YnNjcmlwdGlvbiB9IGZyb20gJ0AvaG9va3MvdXNlU3Vic2NyaXB0aW9uJztcclxuaW1wb3J0IHsgdXNlRW5oYW5jZWRUaGVtZSB9IGZyb20gJ0AvdGhlbWUvRW5oYW5jZWRUaGVtZVByb3ZpZGVyJztcclxuXHJcbi8vIER5bmFtaWNhbGx5IGltcG9ydCBEYXNoYm9hcmRDaGFydHMgdG8gYXZvaWQgU1NSIGlzc3VlcyB3aXRoIENoYXJ0LmpzXHJcbmNvbnN0IERhc2hib2FyZENoYXJ0cyA9IGR5bmFtaWMoKCkgPT4gaW1wb3J0KCdAL2ZlYXR1cmVzL2FuYWx5dGljcy9jb21wb25lbnRzL0Rhc2hib2FyZENoYXJ0cycpLCB7XHJcbiAgc3NyOiBmYWxzZSxcclxuICBsb2FkaW5nOiAoKSA9PiAoXHJcbiAgICA8Qm94IHN4PXt7IHA6IDIsIHRleHRBbGlnbjogJ2NlbnRlcicgfX0+XHJcbiAgICAgIDxDaXJjdWxhclByb2dyZXNzIC8+XHJcbiAgICA8L0JveD5cclxuICApXHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGFsbCBjb250ZXh0cyBhcmUgcmVhZHkgZm9yIGRhc2hib2FyZCByZW5kZXJpbmdcclxuICovXHJcbmZ1bmN0aW9uIHVzZUlzRGFzaGJvYXJkUmVhZHkoKSB7XHJcbiAgY29uc3QgeyBpc0h5ZHJhdGVkIH0gPSB1c2VFbmhhbmNlZFRoZW1lKCk7XHJcbiAgY29uc3QgeyBsb2FkaW5nU3RhdGUgfSA9IHVzZVVzZXIoKTtcclxuICBjb25zdCB7IGlzVHJhbnNpdGlvbmluZyB9ID0gdXNlRGVtbygpO1xyXG4gIFxyXG4gIC8vIFdhaXQgZm9yIHRoZW1lLCB1c2VyIGNvbnRleHQsIGFuZCBubyBvbmdvaW5nIGRlbW8gdHJhbnNpdGlvbnNcclxuICByZXR1cm4gaXNIeWRyYXRlZCAmJiBsb2FkaW5nU3RhdGUuaXNSZWFkeSAmJiAhaXNUcmFuc2l0aW9uaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogVXNlciBEYXNoYm9hcmQgcGFnZSBmb3IgbGVhcm5pbmcgcHJvZ3Jlc3MsIHJlY29tbWVuZGF0aW9ucywgYW5kIG1ldHJpY3MuXHJcbiAqIEZvY3VzZXMgb24gcm9idXN0IGRhdGEgZmxvdyBhbmQgZXJyb3IgaGFuZGxpbmcuXHJcbiAqIFVzZXMgcm9sZSBndWFyZCB0byBwcmV2ZW50IGZsYXNoaW5nIG9mIGFkbWluLW9ubHkgY29udGVudC5cclxuICogRW5oYW5jZWQgd2l0aCBkZW1vIGNvbnRleHQgYXdhcmVuZXNzIGZvciBzbW9vdGggc2NlbmFyaW8gc3dpdGNoaW5nLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRGFzaGJvYXJkUGFnZSgpIHtcclxuICBjb25zdCBpc0Rhc2hib2FyZFJlYWR5ID0gdXNlSXNEYXNoYm9hcmRSZWFkeSgpO1xyXG4gIGNvbnN0IHsgY3VycmVudEF2YXRhciB9ID0gdXNlQXZhdGFyKCk7XHJcbiAgY29uc3QgeyBlcnJvcjogdXNlckVycm9yLCBsb2FkaW5nU3RhdGUgfSA9IHVzZVVzZXIoKTtcclxuICBjb25zdCB7IGhhc1JvbGUsIGlzUmVhZHkgfSA9IHVzZVJvbGVHdWFyZCgpO1xyXG4gIGNvbnN0IHsgaXNUcmFuc2l0aW9uaW5nLCBjdXJyZW50U2NlbmFyaW8sIGVycm9yOiBkZW1vRXJyb3IgfSA9IHVzZURlbW8oKTtcclxuICBjb25zdCB7IH0gPSB1c2VTdWJzY3JpcHRpb24oKTtcclxuICBjb25zdCBhdmF0YXJJZCA9IGN1cnJlbnRBdmF0YXI/LmlkO1xyXG5cclxuICBjb25zdCBbcHJvZ3Jlc3MsIHNldFByb2dyZXNzXSA9IHVzZVN0YXRlPExlYXJuaW5nUHJvZ3Jlc3NEYXRhW10gfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbbWV0cmljcywgc2V0TWV0cmljc10gPSB1c2VTdGF0ZTxQZXJmb3JtYW5jZU1ldHJpY3MgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbZGFzaGJvYXJkTG9hZGluZywgc2V0RGFzaGJvYXJkTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtsYXN0TG9hZGVkQXZhdGFySWQsIHNldExhc3RMb2FkZWRBdmF0YXJJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuXHJcbiAgLy8gRW5oYW5jZWQgYW5hbHl0aWNzIGxvYWRpbmcgd2l0aCBkZW1vIHNjZW5hcmlvIGF3YXJlbmVzc1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBsb2FkRGF0YSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gRG9uJ3QgbG9hZCBkdXJpbmcgZGVtbyB0cmFuc2l0aW9uc1xyXG4gICAgICBpZiAoaXNUcmFuc2l0aW9uaW5nKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdTa2lwcGluZyBhbmFseXRpY3MgbG9hZCBkdXJpbmcgZGVtbyB0cmFuc2l0aW9uJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBXYWl0IGZvciB1c2VyIGNvbnRleHQgdG8gYmUgcmVhZHlcclxuICAgICAgaWYgKCFsb2FkaW5nU3RhdGUuaXNSZWFkeSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnV2FpdGluZyBmb3IgdXNlciBjb250ZXh0IHRvIGJlIHJlYWR5Jyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWF2YXRhcklkKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdObyBhdmF0YXIgSUQsIGNsZWFyaW5nIGRhc2hib2FyZCBkYXRhJyk7XHJcbiAgICAgICAgc2V0UHJvZ3Jlc3MobnVsbCk7XHJcbiAgICAgICAgc2V0TWV0cmljcyhudWxsKTtcclxuICAgICAgICBzZXREYXNoYm9hcmRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICBzZXRMYXN0TG9hZGVkQXZhdGFySWQobnVsbCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTa2lwIGlmIGFscmVhZHkgbG9hZGVkIGZvciB0aGlzIGF2YXRhciAocHJldmVudHMgdW5uZWNlc3NhcnkgcmVsb2FkcylcclxuICAgICAgaWYgKGxhc3RMb2FkZWRBdmF0YXJJZCA9PT0gYXZhdGFySWQpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0FuYWx5dGljcyBhbHJlYWR5IGxvYWRlZCBmb3IgdGhpcyBhdmF0YXI6JywgYXZhdGFySWQpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2V0RGFzaGJvYXJkTG9hZGluZyh0cnVlKTtcclxuICAgICAgc2V0RXJyb3IobnVsbCk7XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxvZ2dlci5pbmZvKCfwn5SEIExvYWRpbmcgYW5hbHl0aWNzIGRhdGEgZm9yIGF2YXRhcjonLCBhdmF0YXJJZCwgJ2luIHNjZW5hcmlvOicsIGN1cnJlbnRTY2VuYXJpbyk7XHJcblxyXG4gICAgICAgIGNvbnN0IFtwcm9ncmVzc0RhdGEsIG1ldHJpY3NEYXRhXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgIGFuYWx5dGljc1NlcnZpY2UuZ2V0QXZhdGFyUHJvZ3Jlc3MoYXZhdGFySWQpLFxyXG4gICAgICAgICAgYW5hbHl0aWNzU2VydmljZS5nZXRQZXJmb3JtYW5jZU1ldHJpY3MoYXZhdGFySWQpXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1Zygn8J+TiiBBbmFseXRpY3MgZGF0YSBsb2FkZWQgc3VjY2Vzc2Z1bGx5OicsIHsgXHJcbiAgICAgICAgICBwcm9ncmVzczogcHJvZ3Jlc3NEYXRhPy5sZW5ndGggfHwgMCwgXHJcbiAgICAgICAgICBtZXRyaWNzOiBtZXRyaWNzRGF0YT8udG90YWxHYW1lc1BsYXllZCB8fCAwLFxyXG4gICAgICAgICAgYXZhdGFySWQsXHJcbiAgICAgICAgICBzY2VuYXJpbzogY3VycmVudFNjZW5hcmlvXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNldFByb2dyZXNzKHByb2dyZXNzRGF0YSk7XHJcbiAgICAgICAgc2V0TWV0cmljcyhtZXRyaWNzRGF0YSk7XHJcbiAgICAgICAgc2V0TGFzdExvYWRlZEF2YXRhcklkKGF2YXRhcklkKTtcclxuICAgICAgICBcclxuICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKCfinYwgRXJyb3IgbG9hZGluZyBhbmFseXRpY3MgZGF0YTonLCB7XHJcbiAgICAgICAgICBlcnJvcjogZXJyLFxyXG4gICAgICAgICAgYXZhdGFySWQsXHJcbiAgICAgICAgICBzY2VuYXJpbzogY3VycmVudFNjZW5hcmlvLFxyXG4gICAgICAgICAgaXNEZW1vOiBhdmF0YXJJZD8uc3RhcnRzV2l0aCgnZGVtby0nKSB8fCBhdmF0YXJJZD8uc3RhcnRzV2l0aCgnMDAwMDAwMDAnKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGxvYWQgYW5hbHl0aWNzIGRhdGEnO1xyXG4gICAgICAgIHNldEVycm9yKGBBbmFseXRpY3MgRXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENsZWFyIGRhdGEgb24gZXJyb3JcclxuICAgICAgICBzZXRQcm9ncmVzcyhudWxsKTtcclxuICAgICAgICBzZXRNZXRyaWNzKG51bGwpO1xyXG4gICAgICAgIHNldExhc3RMb2FkZWRBdmF0YXJJZChudWxsKTtcclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICBzZXREYXNoYm9hcmRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBsb2FkRGF0YSgpO1xyXG4gIH0sIFthdmF0YXJJZCwgaXNUcmFuc2l0aW9uaW5nLCBsb2FkaW5nU3RhdGUuaXNSZWFkeSwgY3VycmVudFNjZW5hcmlvLCBsYXN0TG9hZGVkQXZhdGFySWRdKTtcclxuXHJcbiAgLy8gUmVzZXQgbG9hZGluZyBzdGF0ZSB3aGVuIGRlbW8gc2NlbmFyaW8gY2hhbmdlc1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoaXNUcmFuc2l0aW9uaW5nKSB7XHJcbiAgICAgIGxvZ2dlci5kZWJ1ZygnRGVtbyB0cmFuc2l0aW9uIHN0YXJ0ZWQsIHJlc2V0dGluZyBkYXNoYm9hcmQgc3RhdGUnKTtcclxuICAgICAgc2V0RXJyb3IobnVsbCk7XHJcbiAgICAgIHNldExhc3RMb2FkZWRBdmF0YXJJZChudWxsKTsgLy8gRm9yY2UgcmVsb2FkIGFmdGVyIHRyYW5zaXRpb25cclxuICAgIH1cclxuICB9LCBbaXNUcmFuc2l0aW9uaW5nXSk7XHJcblxyXG4gIC8vIEhhbmRsZSBkZW1vIHNjZW5hcmlvIHRyYW5zaXRpb24gbG9hZGluZ1xyXG4gIGlmIChpc1RyYW5zaXRpb25pbmcpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxCb3ggc3g9e3sgZGlzcGxheTogJ2ZsZXgnLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBtaW5IZWlnaHQ6ICcyMDBweCcgfX0+XHJcbiAgICAgICAgPENpcmN1bGFyUHJvZ3Jlc3MgLz5cclxuICAgICAgICA8VHlwb2dyYXBoeSB2YXJpYW50PVwiYm9keTJcIiBzeD17eyBtbDogMiB9fT5Td2l0Y2hpbmcgZGVtbyBzY2VuYXJpby4uLjwvVHlwb2dyYXBoeT5cclxuICAgICAgPC9Cb3g+XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLy8gV2FpdCBmb3IgZnVsbCBoeWRyYXRpb24gYmVmb3JlIHNob3dpbmcgZGFzaGJvYXJkXHJcbiAgaWYgKCFpc0Rhc2hib2FyZFJlYWR5KSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8Qm94IHN4PXt7IGRpc3BsYXk6ICdmbGV4JywganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgbWluSGVpZ2h0OiAnMjAwcHgnIH19PlxyXG4gICAgICAgIDxDaXJjdWxhclByb2dyZXNzIC8+XHJcbiAgICAgICAgPFR5cG9ncmFwaHkgdmFyaWFudD1cImJvZHkyXCIgc3g9e3sgbWw6IDIgfX0+TG9hZGluZyBkYXNoYm9hcmQuLi48L1R5cG9ncmFwaHk+XHJcbiAgICAgIDwvQm94PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIEhhbmRsZSBkZW1vIGNvbnRleHQgZXJyb3JzXHJcbiAgaWYgKGRlbW9FcnJvcikge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEJveCBzeD17eyBwOiAyIH19PlxyXG4gICAgICAgIDxBbGVydCBzZXZlcml0eT1cImVycm9yXCI+XHJcbiAgICAgICAgICBEZW1vIEVycm9yOiB7ZGVtb0Vycm9yfVxyXG4gICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9XCJvdXRsaW5lZFwiIHN4PXt7IG10OiAxIH19IG9uQ2xpY2s9eygpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKX0+XHJcbiAgICAgICAgICAgIFJlbG9hZCBQYWdlXHJcbiAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICA8L0FsZXJ0PlxyXG4gICAgICA8L0JveD5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBIYW5kbGUgdXNlciBjb250ZXh0IGVycm9yc1xyXG4gIGlmICh1c2VyRXJyb3IpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxCb3ggc3g9e3sgcDogMiB9fT5cclxuICAgICAgICA8QWxlcnQgc2V2ZXJpdHk9XCJlcnJvclwiPlxyXG4gICAgICAgICAgVXNlciBDb250ZXh0IEVycm9yOiB7dXNlckVycm9yfVxyXG4gICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9XCJvdXRsaW5lZFwiIHN4PXt7IG10OiAxIH19IG9uQ2xpY2s9eygpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKX0+XHJcbiAgICAgICAgICAgIFJlbG9hZCBQYWdlXHJcbiAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICA8L0FsZXJ0PlxyXG4gICAgICA8L0JveD5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBIYW5kbGUgbm8gYXZhdGFyIGNhc2VcclxuICBpZiAoIWF2YXRhcklkKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8QWxlcnQgc2V2ZXJpdHk9XCJpbmZvXCIgc3g9e3sgbTogMiB9fT5cclxuICAgICAgICBObyBhdmF0YXIgc2VsZWN0ZWQuIFBsZWFzZSBjcmVhdGUgb3Igc2VsZWN0IGFuIGF2YXRhciB0byB2aWV3IHlvdXIgZGFzaGJvYXJkLlxyXG4gICAgICAgIHtjdXJyZW50U2NlbmFyaW8gJiYgKFxyXG4gICAgICAgICAgPFR5cG9ncmFwaHkgdmFyaWFudD1cImJvZHkyXCIgc3g9e3sgbXQ6IDEsIGZvbnRTdHlsZTogJ2l0YWxpYycgfX0+XHJcbiAgICAgICAgICAgIEN1cnJlbnQgZGVtbyBzY2VuYXJpbzoge2N1cnJlbnRTY2VuYXJpb31cclxuICAgICAgICAgIDwvVHlwb2dyYXBoeT5cclxuICAgICAgICApfVxyXG4gICAgICA8L0FsZXJ0PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIEhhbmRsZSBsb2FkaW5nIHN0YXRlXHJcbiAgaWYgKGRhc2hib2FyZExvYWRpbmcpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxCb3ggc3g9e3sgZGlzcGxheTogJ2ZsZXgnLCBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBtaW5IZWlnaHQ6ICcyMDBweCcgfX0+XHJcbiAgICAgICAgPENpcmN1bGFyUHJvZ3Jlc3MgLz5cclxuICAgICAgICA8VHlwb2dyYXBoeSB2YXJpYW50PVwiYm9keTJcIiBzeD17eyBtbDogMiB9fT5cclxuICAgICAgICAgIExvYWRpbmcgYW5hbHl0aWNzIGZvciB7Y3VycmVudEF2YXRhcj8ubmFtZSB8fCAnYXZhdGFyJ30uLi5cclxuICAgICAgICA8L1R5cG9ncmFwaHk+XHJcbiAgICAgIDwvQm94PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIEhhbmRsZSBhbmFseXRpY3MgZXJyb3JzXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8Qm94IHN4PXt7IHA6IDIgfX0+XHJcbiAgICAgICAgPEFsZXJ0IFxyXG4gICAgICAgICAgc2V2ZXJpdHk9XCJ3YXJuaW5nXCIgXHJcbiAgICAgICAgICBhY3Rpb249e1xyXG4gICAgICAgICAgICA8QnV0dG9uIFxyXG4gICAgICAgICAgICAgIGNvbG9yPVwiaW5oZXJpdFwiIFxyXG4gICAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiIFxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgIHNldEVycm9yKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgc2V0TGFzdExvYWRlZEF2YXRhcklkKG51bGwpO1xyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICBSZXRyeVxyXG4gICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgIH1cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7ZXJyb3J9XHJcbiAgICAgICAgICA8VHlwb2dyYXBoeSB2YXJpYW50PVwiYm9keTJcIiBzeD17eyBtdDogMSB9fT5cclxuICAgICAgICAgICAgQXZhdGFyOiB7Y3VycmVudEF2YXRhcj8ubmFtZX0gKHthdmF0YXJJZH0pXHJcbiAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICBTY2VuYXJpbzoge2N1cnJlbnRTY2VuYXJpb31cclxuICAgICAgICAgIDwvVHlwb2dyYXBoeT5cclxuICAgICAgICA8L0FsZXJ0PlxyXG4gICAgICA8L0JveD5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPEJveCBzeD17eyBwOiAzIH19PlxyXG4gICAgICB7LyogSGVhZGVyIHdpdGggU3Vic2NyaXB0aW9uIEJhZGdlICovfVxyXG4gICAgICA8Qm94IHN4PXt7IGRpc3BsYXk6ICdmbGV4JywganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJywgYWxpZ25JdGVtczogJ2NlbnRlcicsIG1iOiAzIH19PlxyXG4gICAgICAgIDxCb3g+XHJcbiAgICAgICAgICA8VHlwb2dyYXBoeSB2YXJpYW50PVwiaDRcIiBjb21wb25lbnQ9XCJoMVwiPlxyXG4gICAgICAgICAgICBBbmFseXRpY3MgRGFzaGJvYXJkXHJcbiAgICAgICAgICA8L1R5cG9ncmFwaHk+XHJcbiAgICAgICAgICA8VHlwb2dyYXBoeSB2YXJpYW50PVwiYm9keTJcIiBjb2xvcj1cInRleHQuc2Vjb25kYXJ5XCI+XHJcbiAgICAgICAgICAgIHtjdXJyZW50QXZhdGFyPy5uYW1lfSDigKIge2N1cnJlbnRTY2VuYXJpb31cclxuICAgICAgICAgIDwvVHlwb2dyYXBoeT5cclxuICAgICAgICA8L0JveD5cclxuICAgICAgICA8U3Vic2NyaXB0aW9uQmFkZ2UgdmFyaWFudD1cImJhc2ljXCIgLz5cclxuICAgICAgPC9Cb3g+XHJcblxyXG4gICAgICB7LyogRmVhdHVyZSBHYXRlIGZvciBBbmFseXRpY3MgKi99XHJcbiAgICAgIDxGZWF0dXJlR2F0ZSBcclxuICAgICAgICBmZWF0dXJlPVwiYW5hbHl0aWNzXCIgXHJcbiAgICAgICAgbW9kZT1cImFsZXJ0XCJcclxuICAgICAgICBmYWxsYmFjaz17XHJcbiAgICAgICAgICA8QWxlcnQgc2V2ZXJpdHk9XCJ3YXJuaW5nXCIgc3g9e3sgbWI6IDMgfX0+XHJcbiAgICAgICAgICAgIEFuYWx5dGljcyBkYXNoYm9hcmQgcmVxdWlyZXMgYSBzdWJzY3JpcHRpb24gcGxhbi4gUGxlYXNlIHVwZ3JhZGUgdG8gYWNjZXNzIGxlYXJuaW5nIGluc2lnaHRzLlxyXG4gICAgICAgICAgPC9BbGVydD5cclxuICAgICAgICB9XHJcbiAgICAgID5cclxuICAgICAgICB7LyogU3Vic2NyaXB0aW9uIFVzYWdlIE92ZXJ2aWV3ICovfVxyXG4gICAgICAgIDxDYXJkIHN4PXt7IG1iOiAzIH19PlxyXG4gICAgICAgICAgPENhcmRDb250ZW50PlxyXG4gICAgICAgICAgICA8VHlwb2dyYXBoeSB2YXJpYW50PVwiaDZcIiBndXR0ZXJCb3R0b20+XHJcbiAgICAgICAgICAgICAgU3Vic2NyaXB0aW9uIFVzYWdlXHJcbiAgICAgICAgICAgIDwvVHlwb2dyYXBoeT5cclxuICAgICAgICAgICAgPFVzYWdlT3ZlcnZpZXcgY29tcGFjdD17dHJ1ZX0gLz5cclxuICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XHJcbiAgICAgICAgPC9DYXJkPlxyXG5cclxuICAgICAgICB7LyogQWR2YW5jZWQgUmVwb3J0aW5nIEdhdGUgKi99XHJcbiAgICAgICAgPEZlYXR1cmVHYXRlIFxyXG4gICAgICAgICAgZmVhdHVyZT1cImFkdmFuY2VkX3JlcG9ydGluZ1wiIFxyXG4gICAgICAgICAgbW9kZT1cIm92ZXJsYXlcIlxyXG4gICAgICAgICAgZmFsbGJhY2s9e1xyXG4gICAgICAgICAgICA8QWxlcnQgc2V2ZXJpdHk9XCJpbmZvXCIgc3g9e3sgbWI6IDIgfX0+XHJcbiAgICAgICAgICAgICAgQWR2YW5jZWQgcmVwb3J0aW5nIHJlcXVpcmVzIFByb2Zlc3Npb25hbCBwbGFuLiBVcGdyYWRlIHRvIGFjY2VzcyBkZXRhaWxlZCBhbmFseXRpY3MuXHJcbiAgICAgICAgICAgIDwvQWxlcnQ+XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPENhcmQgc3g9e3sgbWI6IDMgfX0+XHJcbiAgICAgICAgICAgIDxDYXJkQ29udGVudD5cclxuICAgICAgICAgICAgICA8VHlwb2dyYXBoeSB2YXJpYW50PVwiaDZcIiBndXR0ZXJCb3R0b20+XHJcbiAgICAgICAgICAgICAgICBBZHZhbmNlZCBBbmFseXRpY3NcclxuICAgICAgICAgICAgICA8L1R5cG9ncmFwaHk+XHJcbiAgICAgICAgICAgICAgPERhc2hib2FyZENoYXJ0cyBcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzPXtwcm9ncmVzcyB8fCBbXX1cclxuICAgICAgICAgICAgICAgIG1ldHJpY3M9e21ldHJpY3MgfHwge1xyXG4gICAgICAgICAgICAgICAgICB0b3RhbEdhbWVzUGxheWVkOiAwLFxyXG4gICAgICAgICAgICAgICAgICBhdmVyYWdlU2Vzc2lvbkR1cmF0aW9uOiAwLFxyXG4gICAgICAgICAgICAgICAgICBvdmVyYWxsQ29tcGxldGlvblJhdGU6IDAsXHJcbiAgICAgICAgICAgICAgICAgIHNraWxsTGV2ZWxEaXN0cmlidXRpb246IHt9LFxyXG4gICAgICAgICAgICAgICAgICBzdWJqZWN0UHJlZmVyZW5jZXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICBsZWFybmluZ1ZlbG9jaXR5OiAwLFxyXG4gICAgICAgICAgICAgICAgICBlbmdhZ2VtZW50U2NvcmU6IDBcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cclxuICAgICAgICAgIDwvQ2FyZD5cclxuICAgICAgICA8L0ZlYXR1cmVHYXRlPlxyXG5cclxuICAgICAgICB7LyogUmVndWxhciBBbmFseXRpY3MgQ29udGVudCAqL31cclxuICAgICAgICA8Qm94IHN4PXt7IFxyXG4gICAgICAgICAgZGlzcGxheTogJ2dyaWQnLCBcclxuICAgICAgICAgIGdyaWRUZW1wbGF0ZUNvbHVtbnM6IHsgeHM6ICcxZnInLCBtZDogJ3JlcGVhdCgyLCAxZnIpJyB9LCBcclxuICAgICAgICAgIGdhcDogMyBcclxuICAgICAgICB9fT5cclxuICAgICAgICAgIDxDYXJkPlxyXG4gICAgICAgICAgICA8Q2FyZENvbnRlbnQ+XHJcbiAgICAgICAgICAgICAgPFR5cG9ncmFwaHkgdmFyaWFudD1cImg2XCIgZ3V0dGVyQm90dG9tPlxyXG4gICAgICAgICAgICAgICAgTGVhcm5pbmcgUHJvZ3Jlc3NcclxuICAgICAgICAgICAgICA8L1R5cG9ncmFwaHk+XHJcbiAgICAgICAgICAgICAge3Byb2dyZXNzICYmIHByb2dyZXNzLmxlbmd0aCA+IDAgPyAoXHJcbiAgICAgICAgICAgICAgICA8Qm94PlxyXG4gICAgICAgICAgICAgICAgICB7cHJvZ3Jlc3MubWFwKChwLCBpbmRleCkgPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxCb3gga2V5PXtpbmRleH0gc3g9e3sgbWI6IDIgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8VHlwb2dyYXBoeSB2YXJpYW50PVwiYm9keTFcIj57cC5nYW1lSWR9PC9UeXBvZ3JhcGh5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPFR5cG9ncmFwaHkgdmFyaWFudD1cImJvZHkyXCIgY29sb3I9XCJ0ZXh0LnNlY29uZGFyeVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXN0ZXJ5OiB7cC5tYXN0ZXJ5U2NvcmV9JSDigKIgTGV2ZWw6IHtwLnNraWxsTGV2ZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L1R5cG9ncmFwaHk+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9Cb3g+XHJcbiAgICAgICAgICAgICAgICAgICkpfVxyXG4gICAgICAgICAgICAgICAgPC9Cb3g+XHJcbiAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgIDxUeXBvZ3JhcGh5IHZhcmlhbnQ9XCJib2R5MlwiIGNvbG9yPVwidGV4dC5zZWNvbmRhcnlcIj5cclxuICAgICAgICAgICAgICAgICAgTm8gcHJvZ3Jlc3MgZGF0YSBhdmFpbGFibGUgeWV0LiBQbGF5IHNvbWUgZ2FtZXMgdG8gc2VlIHlvdXIgcHJvZ3Jlc3MhXHJcbiAgICAgICAgICAgICAgICA8L1R5cG9ncmFwaHk+XHJcbiAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cclxuICAgICAgICAgIDwvQ2FyZD5cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgPENhcmQ+XHJcbiAgICAgICAgICAgIDxDYXJkQ29udGVudD5cclxuICAgICAgICAgICAgICA8VHlwb2dyYXBoeSB2YXJpYW50PVwiaDZcIiBndXR0ZXJCb3R0b20+XHJcbiAgICAgICAgICAgICAgICBQZXJmb3JtYW5jZSBTdW1tYXJ5XHJcbiAgICAgICAgICAgICAgPC9UeXBvZ3JhcGh5PlxyXG4gICAgICAgICAgICAgIHttZXRyaWNzID8gKFxyXG4gICAgICAgICAgICAgICAgPEJveD5cclxuICAgICAgICAgICAgICAgICAgPFR5cG9ncmFwaHkgdmFyaWFudD1cImJvZHkyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZXMgUGxheWVkOiB7bWV0cmljcy50b3RhbEdhbWVzUGxheWVkfVxyXG4gICAgICAgICAgICAgICAgICA8L1R5cG9ncmFwaHk+XHJcbiAgICAgICAgICAgICAgICAgIDxUeXBvZ3JhcGh5IHZhcmlhbnQ9XCJib2R5MlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIEF2ZyBTZXNzaW9uOiB7TWF0aC5yb3VuZChtZXRyaWNzLmF2ZXJhZ2VTZXNzaW9uRHVyYXRpb24gLyA2MCl9IG1pbnV0ZXNcclxuICAgICAgICAgICAgICAgICAgPC9UeXBvZ3JhcGh5PlxyXG4gICAgICAgICAgICAgICAgICA8VHlwb2dyYXBoeSB2YXJpYW50PVwiYm9keTJcIj5cclxuICAgICAgICAgICAgICAgICAgICBDb21wbGV0aW9uIFJhdGU6IHtNYXRoLnJvdW5kKG1ldHJpY3Mub3ZlcmFsbENvbXBsZXRpb25SYXRlICogMTAwKX0lXHJcbiAgICAgICAgICAgICAgICAgIDwvVHlwb2dyYXBoeT5cclxuICAgICAgICAgICAgICAgICAgPFR5cG9ncmFwaHkgdmFyaWFudD1cImJvZHkyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgRW5nYWdlbWVudCBTY29yZToge01hdGgucm91bmQobWV0cmljcy5lbmdhZ2VtZW50U2NvcmUpfSVcclxuICAgICAgICAgICAgICAgICAgPC9UeXBvZ3JhcGh5PlxyXG4gICAgICAgICAgICAgICAgPC9Cb3g+XHJcbiAgICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAgIDxUeXBvZ3JhcGh5IHZhcmlhbnQ9XCJib2R5MlwiIGNvbG9yPVwidGV4dC5zZWNvbmRhcnlcIj5cclxuICAgICAgICAgICAgICAgICAgTm8gcGVyZm9ybWFuY2UgZGF0YSBhdmFpbGFibGUgeWV0LlxyXG4gICAgICAgICAgICAgICAgPC9UeXBvZ3JhcGh5PlxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+XHJcbiAgICAgICAgICA8L0NhcmQ+XHJcbiAgICAgICAgPC9Cb3g+XHJcbiAgICAgIDwvRmVhdHVyZUdhdGU+XHJcblxyXG4gICAgICB7LyogVXNlciBNYW5hZ2VtZW50IEFjY2VzcyBmb3IgQWNjb3VudCBPd25lcnMgKi99XHJcbiAgICAgIHtpc1JlYWR5ICYmIGhhc1JvbGUoJ2FjY291bnRfb3duZXInKSAmJiAoXHJcbiAgICAgICAgPENhcmQgc3g9e3sgbXQ6IDMgfX0+XHJcbiAgICAgICAgICA8Q2FyZENvbnRlbnQ+XHJcbiAgICAgICAgICAgIDxGZWF0dXJlR2F0ZSBcclxuICAgICAgICAgICAgICBmZWF0dXJlPVwidXNlcl9tYW5hZ2VtZW50XCIgXHJcbiAgICAgICAgICAgICAgbW9kZT1cImFsZXJ0XCJcclxuICAgICAgICAgICAgICBjb21wYWN0PXt0cnVlfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgPEJveCBzeD17eyBkaXNwbGF5OiAnZmxleCcsIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsIGFsaWduSXRlbXM6ICdjZW50ZXInIH19PlxyXG4gICAgICAgICAgICAgICAgPEJveD5cclxuICAgICAgICAgICAgICAgICAgPFR5cG9ncmFwaHkgdmFyaWFudD1cImg2XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgVXNlciBNYW5hZ2VtZW50XHJcbiAgICAgICAgICAgICAgICAgIDwvVHlwb2dyYXBoeT5cclxuICAgICAgICAgICAgICAgICAgPFR5cG9ncmFwaHkgdmFyaWFudD1cImJvZHkyXCIgY29sb3I9XCJ0ZXh0LnNlY29uZGFyeVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIE1hbmFnZSB1c2Vycywgcm9sZXMsIGFuZCBhdmF0YXJzIGZvciB5b3VyIG9yZ2FuaXphdGlvblxyXG4gICAgICAgICAgICAgICAgICA8L1R5cG9ncmFwaHk+XHJcbiAgICAgICAgICAgICAgICA8L0JveD5cclxuICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgdmFyaWFudD1cImNvbnRhaW5lZFwiXHJcbiAgICAgICAgICAgICAgICAgIGhyZWY9XCIvZGFzaGJvYXJkL3VzZXItbWFuYWdlbWVudFwiXHJcbiAgICAgICAgICAgICAgICAgIHN0YXJ0SWNvbj17PFNldHRpbmdzIC8+fVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICBNYW5hZ2UgVXNlcnNcclxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICAgICAgICAgIDwvQm94PlxyXG4gICAgICAgICAgICA8L0ZlYXR1cmVHYXRlPlxyXG4gICAgICAgICAgPC9DYXJkQ29udGVudD5cclxuICAgICAgICA8L0NhcmQ+XHJcbiAgICAgICl9XHJcblxyXG4gICAgPC9Cb3g+XHJcbiAgKTtcclxufSAiXSwibmFtZXMiOlsiRGFzaGJvYXJkUGFnZSIsIkRhc2hib2FyZENoYXJ0cyIsImR5bmFtaWMiLCJzc3IiLCJsb2FkaW5nIiwiQm94Iiwic3giLCJwIiwidGV4dEFsaWduIiwiQ2lyY3VsYXJQcm9ncmVzcyIsInVzZUlzRGFzaGJvYXJkUmVhZHkiLCJpc0h5ZHJhdGVkIiwidXNlRW5oYW5jZWRUaGVtZSIsImxvYWRpbmdTdGF0ZSIsInVzZVVzZXIiLCJpc1RyYW5zaXRpb25pbmciLCJ1c2VEZW1vIiwiaXNSZWFkeSIsImlzRGFzaGJvYXJkUmVhZHkiLCJjdXJyZW50QXZhdGFyIiwidXNlQXZhdGFyIiwiZXJyb3IiLCJ1c2VyRXJyb3IiLCJoYXNSb2xlIiwidXNlUm9sZUd1YXJkIiwiY3VycmVudFNjZW5hcmlvIiwiZGVtb0Vycm9yIiwidXNlU3Vic2NyaXB0aW9uIiwiYXZhdGFySWQiLCJpZCIsInByb2dyZXNzIiwic2V0UHJvZ3Jlc3MiLCJ1c2VTdGF0ZSIsIm1ldHJpY3MiLCJzZXRNZXRyaWNzIiwiZGFzaGJvYXJkTG9hZGluZyIsInNldERhc2hib2FyZExvYWRpbmciLCJzZXRFcnJvciIsImxhc3RMb2FkZWRBdmF0YXJJZCIsInNldExhc3RMb2FkZWRBdmF0YXJJZCIsInVzZUVmZmVjdCIsImxvYWREYXRhIiwibG9nZ2VyIiwiZGVidWciLCJpbmZvIiwicHJvZ3Jlc3NEYXRhIiwibWV0cmljc0RhdGEiLCJQcm9taXNlIiwiYWxsIiwiYW5hbHl0aWNzU2VydmljZSIsImdldEF2YXRhclByb2dyZXNzIiwiZ2V0UGVyZm9ybWFuY2VNZXRyaWNzIiwibGVuZ3RoIiwidG90YWxHYW1lc1BsYXllZCIsInNjZW5hcmlvIiwiZXJyIiwiaXNEZW1vIiwic3RhcnRzV2l0aCIsImVycm9yTWVzc2FnZSIsIkVycm9yIiwibWVzc2FnZSIsImRpc3BsYXkiLCJqdXN0aWZ5Q29udGVudCIsImFsaWduSXRlbXMiLCJtaW5IZWlnaHQiLCJUeXBvZ3JhcGh5IiwidmFyaWFudCIsIm1sIiwiQWxlcnQiLCJzZXZlcml0eSIsImJyIiwiQnV0dG9uIiwibXQiLCJvbkNsaWNrIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJtIiwiZm9udFN0eWxlIiwibmFtZSIsImFjdGlvbiIsImNvbG9yIiwic2l6ZSIsIm1iIiwiY29tcG9uZW50IiwiU3Vic2NyaXB0aW9uQmFkZ2UiLCJGZWF0dXJlR2F0ZSIsImZlYXR1cmUiLCJtb2RlIiwiZmFsbGJhY2siLCJDYXJkIiwiQ2FyZENvbnRlbnQiLCJndXR0ZXJCb3R0b20iLCJVc2FnZU92ZXJ2aWV3IiwiY29tcGFjdCIsImF2ZXJhZ2VTZXNzaW9uRHVyYXRpb24iLCJvdmVyYWxsQ29tcGxldGlvblJhdGUiLCJza2lsbExldmVsRGlzdHJpYnV0aW9uIiwic3ViamVjdFByZWZlcmVuY2VzIiwibGVhcm5pbmdWZWxvY2l0eSIsImVuZ2FnZW1lbnRTY29yZSIsImdyaWRUZW1wbGF0ZUNvbHVtbnMiLCJ4cyIsIm1kIiwiZ2FwIiwibWFwIiwiaW5kZXgiLCJnYW1lSWQiLCJtYXN0ZXJ5U2NvcmUiLCJza2lsbExldmVsIiwiTWF0aCIsInJvdW5kIiwiaHJlZiIsInN0YXJ0SWNvbiIsIlNldHRpbmdzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7K0JBNkNBOzs7OztDQUtDLEdBQ0Q7OztlQUF3QkE7Ozs7K0RBakRtQjs2QkFDTTs2QkFDekI7a0NBQzZEO3dCQUM5RDswQkFTaEI7O2dFQUVhOzRCQUUwQztpQ0FDOUI7dUNBQ0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRWpDLHVFQUF1RTtBQUN2RSxNQUFNQyxrQkFBa0JDLElBQUFBLGdCQUFPLEVBQUMsSUFBTSxtRUFBQSxRQUFPOzs7Ozs7SUFDM0NDLEtBQUs7SUFDTEMsU0FBUyxrQkFDUCxxQkFBQ0MsYUFBRztZQUFDQyxJQUFJO2dCQUFFQyxHQUFHO2dCQUFHQyxXQUFXO1lBQVM7c0JBQ25DLGNBQUEscUJBQUNDLDBCQUFnQjs7O0FBS3ZCOztDQUVDLEdBQ0QsU0FBU0M7SUFDUCxNQUFNLEVBQUVDLFVBQVUsRUFBRSxHQUFHQyxJQUFBQSx1Q0FBZ0I7SUFDdkMsTUFBTSxFQUFFQyxZQUFZLEVBQUUsR0FBR0MsSUFBQUEsb0JBQU87SUFDaEMsTUFBTSxFQUFFQyxlQUFlLEVBQUUsR0FBR0MsSUFBQUEsb0JBQU87SUFFbkMsZ0VBQWdFO0lBQ2hFLE9BQU9MLGNBQWNFLGFBQWFJLE9BQU8sSUFBSSxDQUFDRjtBQUNoRDtBQVFlLFNBQVNmO0lBQ3RCLE1BQU1rQixtQkFBbUJSO0lBQ3pCLE1BQU0sRUFBRVMsYUFBYSxFQUFFLEdBQUdDLElBQUFBLHNCQUFTO0lBQ25DLE1BQU0sRUFBRUMsT0FBT0MsU0FBUyxFQUFFVCxZQUFZLEVBQUUsR0FBR0MsSUFBQUEsb0JBQU87SUFDbEQsTUFBTSxFQUFFUyxPQUFPLEVBQUVOLE9BQU8sRUFBRSxHQUFHTyxJQUFBQSx5QkFBWTtJQUN6QyxNQUFNLEVB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