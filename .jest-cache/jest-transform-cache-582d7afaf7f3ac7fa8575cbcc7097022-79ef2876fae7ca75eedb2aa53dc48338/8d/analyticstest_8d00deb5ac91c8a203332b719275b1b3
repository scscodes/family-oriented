4f1f72042e3e6f9f118a0217b0b686d9
/**
 * Enhanced Analytics Service Tests
 * Updated with timeout protection, error boundary testing, and performance validation
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _analyticsService = require("../analyticsService");
// Test timeout constants
const TEST_TIMEOUTS = {
    FAST: 2000,
    MEDIUM: 5000,
    SLOW: 8000
};
// Mock data constants
const MOCK_DATA = {
    sessionId: 'mock-session-id',
    metrics: {
        totalGamesPlayed: 1,
        averageSessionDuration: 60,
        overallCompletionRate: 1,
        skillLevelDistribution: {
            beginner: 1
        },
        subjectPreferences: {
            Mathematics: 1
        },
        learningVelocity: 1,
        engagementScore: 80
    },
    recommendations: [
        {
            gameId: 'letters',
            reason: 'Try letters next!',
            priority: 8,
            estimatedDifficulty: 'beginner',
            learningObjectives: [],
            prerequisitesMet: true
        }
    ],
    analytics: {
        totalSessions: 1,
        uniquePlayers: 1,
        averageDuration: 60,
        completionRate: 1,
        popularGames: [],
        learningEffectiveness: {}
    }
};
describe('Analytics Service - Enhanced Validation', ()=>{
    const testAvatarId = '00000000-0000-0000-0000-000000000005';
    const testGameId = 'numbers';
    const testSettings = {
        difficulty: 'easy',
        questionsPerSession: 5
    };
    // Setup fresh mocks before each test
    beforeEach(()=>{
        jest.clearAllMocks();
        // Setup mocks with consistent return values
        jest.spyOn(_analyticsService.analyticsService, 'startGameSession').mockResolvedValue(MOCK_DATA.sessionId);
        jest.spyOn(_analyticsService.analyticsService, 'trackEvent').mockResolvedValue(undefined);
        jest.spyOn(_analyticsService.analyticsService, 'completeGameSession').mockResolvedValue(undefined);
        jest.spyOn(_analyticsService.analyticsService, 'getPerformanceMetrics').mockResolvedValue(MOCK_DATA.metrics);
        jest.spyOn(_analyticsService.analyticsService, 'getLearningPathRecommendations').mockResolvedValue(MOCK_DATA.recommendations);
        jest.spyOn(_analyticsService.analyticsService, 'getAggregateAnalytics').mockResolvedValue(MOCK_DATA.analytics);
    });
    afterEach(()=>{
        jest.restoreAllMocks();
    });
    describe('Session Management', ()=>{
        test('should start a game session with timeout protection', async ()=>{
            const startTime = performance.now();
            const sessionPromise = _analyticsService.analyticsService.startGameSession(testAvatarId, testGameId, testSettings);
            // Add timeout protection using Promise.race
            const sessionId = await Promise.race([
                sessionPromise,
                new Promise((_, reject)=>setTimeout(()=>reject(new Error('Session start timeout')), TEST_TIMEOUTS.FAST))
            ]);
            const executionTime = performance.now() - startTime;
            expect(sessionId).toBeDefined();
            expect(typeof sessionId).toBe('string');
            expect(sessionId.length).toBeGreaterThan(0);
            expect(executionTime).toBeLessThan(1000); // Performance check
        }, TEST_TIMEOUTS.MEDIUM);
        test('should track events without errors', async ()=>{
            const sessionId = await _analyticsService.analyticsService.startGameSession(testAvatarId, testGameId, testSettings);
            // Test each call individually without using .resolves
            const result1 = await _analyticsService.analyticsService.trackEvent(sessionId, testAvatarId, 'question_start', {});
            expect(result1).toBeUndefined();
            const result2 = await _analyticsService.analyticsService.trackEvent(sessionId, testAvatarId, 'question_answer', {
                correct: true
            });
            expect(result2).toBeUndefined();
            const result3 = await _analyticsService.analyticsService.trackEvent(sessionId, testAvatarId, 'game_pause', {});
            expect(result3).toBeUndefined();
        });
        test('should complete session and generate metrics', async ()=>{
            const sessionId = await _analyticsService.analyticsService.startGameSession(testAvatarId, testGameId, testSettings);
            await _analyticsService.analyticsService.trackEvent(sessionId, testAvatarId, 'question_answer', {
                correct: true
            });
            await _analyticsService.analyticsService.trackEvent(sessionId, testAvatarId, 'question_answer', {
                correct: false
            });
            const result = await _analyticsService.analyticsService.completeGameSession(sessionId, 75, 2, 1);
            expect(result).toBeUndefined();
        });
        test('should generate performance metrics', async ()=>{
            const metrics = await _analyticsService.analyticsService.getPerformanceMetrics(testAvatarId);
            expect(metrics).toBeDefined();
            expect(typeof metrics.totalGamesPlayed).toBe('number');
            expect(typeof metrics.averageSessionDuration).toBe('number');
            expect(typeof metrics.overallCompletionRate).toBe('number');
            expect(typeof metrics.engagementScore).toBe('number');
        });
        test('should generate learning path recommendations', async ()=>{
            const recommendations = await _analyticsService.analyticsService.getLearningPathRecommendations(testAvatarId, 3);
            expect(Array.isArray(recommendations)).toBe(true);
            expect(recommendations.length).toBeLessThanOrEqual(3);
            recommendations.forEach((rec)=>{
                expect(rec).toHaveProperty('gameId');
                expect(rec).toHaveProperty('reason');
                expect(rec).toHaveProperty('priority');
                expect(typeof rec.priority).toBe('number');
                expect(rec.priority).toBeGreaterThanOrEqual(1);
                expect(rec.priority).toBeLessThanOrEqual(10);
            });
        });
        test('should generate aggregate analytics', async ()=>{
            const analytics = await _analyticsService.analyticsService.getAggregateAnalytics();
            expect(analytics).toBeDefined();
            expect(typeof analytics.totalSessions).toBe('number');
            expect(typeof analytics.uniquePlayers).toBe('number');
            expect(typeof analytics.averageDuration).toBe('number');
            expect(typeof analytics.completionRate).toBe('number');
            expect(Array.isArray(analytics.popularGames)).toBe(true);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxyZXBvc1xcZmFtaWx5LW9yaWVudGVkXFxzcmNcXHV0aWxzXFxfX3Rlc3RzX19cXGFuYWx5dGljcy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBFbmhhbmNlZCBBbmFseXRpY3MgU2VydmljZSBUZXN0c1xyXG4gKiBVcGRhdGVkIHdpdGggdGltZW91dCBwcm90ZWN0aW9uLCBlcnJvciBib3VuZGFyeSB0ZXN0aW5nLCBhbmQgcGVyZm9ybWFuY2UgdmFsaWRhdGlvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGFuYWx5dGljc1NlcnZpY2UgfSBmcm9tICcuLi9hbmFseXRpY3NTZXJ2aWNlJztcclxuXHJcbi8vIFRlc3QgdGltZW91dCBjb25zdGFudHNcclxuY29uc3QgVEVTVF9USU1FT1VUUyA9IHtcclxuICBGQVNUOiAyMDAwLFxyXG4gIE1FRElVTTogNTAwMCxcclxuICBTTE9XOiA4MDAwXHJcbn0gYXMgY29uc3Q7XHJcblxyXG4vLyBNb2NrIGRhdGEgY29uc3RhbnRzXHJcbmNvbnN0IE1PQ0tfREFUQSA9IHtcclxuICBzZXNzaW9uSWQ6ICdtb2NrLXNlc3Npb24taWQnLFxyXG4gIG1ldHJpY3M6IHtcclxuICAgIHRvdGFsR2FtZXNQbGF5ZWQ6IDEsXHJcbiAgICBhdmVyYWdlU2Vzc2lvbkR1cmF0aW9uOiA2MCxcclxuICAgIG92ZXJhbGxDb21wbGV0aW9uUmF0ZTogMSxcclxuICAgIHNraWxsTGV2ZWxEaXN0cmlidXRpb246IHsgYmVnaW5uZXI6IDEgfSxcclxuICAgIHN1YmplY3RQcmVmZXJlbmNlczogeyBNYXRoZW1hdGljczogMSB9LFxyXG4gICAgbGVhcm5pbmdWZWxvY2l0eTogMSxcclxuICAgIGVuZ2FnZW1lbnRTY29yZTogODBcclxuICB9LFxyXG4gIHJlY29tbWVuZGF0aW9uczogW1xyXG4gICAgeyBnYW1lSWQ6ICdsZXR0ZXJzJywgcmVhc29uOiAnVHJ5IGxldHRlcnMgbmV4dCEnLCBwcmlvcml0eTogOCwgZXN0aW1hdGVkRGlmZmljdWx0eTogJ2JlZ2lubmVyJywgbGVhcm5pbmdPYmplY3RpdmVzOiBbXSwgcHJlcmVxdWlzaXRlc01ldDogdHJ1ZSB9XHJcbiAgXSxcclxuICBhbmFseXRpY3M6IHtcclxuICAgIHRvdGFsU2Vzc2lvbnM6IDEsXHJcbiAgICB1bmlxdWVQbGF5ZXJzOiAxLFxyXG4gICAgYXZlcmFnZUR1cmF0aW9uOiA2MCxcclxuICAgIGNvbXBsZXRpb25SYXRlOiAxLFxyXG4gICAgcG9wdWxhckdhbWVzOiBbXSxcclxuICAgIGxlYXJuaW5nRWZmZWN0aXZlbmVzczoge31cclxuICB9XHJcbn0gYXMgY29uc3Q7XHJcblxyXG5kZXNjcmliZSgnQW5hbHl0aWNzIFNlcnZpY2UgLSBFbmhhbmNlZCBWYWxpZGF0aW9uJywgKCkgPT4ge1xyXG4gIGNvbnN0IHRlc3RBdmF0YXJJZCA9ICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDUnO1xyXG4gIGNvbnN0IHRlc3RHYW1lSWQgPSAnbnVtYmVycycgYXMgY29uc3Q7XHJcbiAgY29uc3QgdGVzdFNldHRpbmdzID0geyBkaWZmaWN1bHR5OiAnZWFzeScsIHF1ZXN0aW9uc1BlclNlc3Npb246IDUgfTtcclxuXHJcbiAgLy8gU2V0dXAgZnJlc2ggbW9ja3MgYmVmb3JlIGVhY2ggdGVzdFxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgICBcclxuICAgIC8vIFNldHVwIG1vY2tzIHdpdGggY29uc2lzdGVudCByZXR1cm4gdmFsdWVzXHJcbiAgICBqZXN0LnNweU9uKGFuYWx5dGljc1NlcnZpY2UsICdzdGFydEdhbWVTZXNzaW9uJykubW9ja1Jlc29sdmVkVmFsdWUoTU9DS19EQVRBLnNlc3Npb25JZCk7XHJcbiAgICBqZXN0LnNweU9uKGFuYWx5dGljc1NlcnZpY2UsICd0cmFja0V2ZW50JykubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcclxuICAgIGplc3Quc3B5T24oYW5hbHl0aWNzU2VydmljZSwgJ2NvbXBsZXRlR2FtZVNlc3Npb24nKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xyXG4gICAgamVzdC5zcHlPbihhbmFseXRpY3NTZXJ2aWNlLCAnZ2V0UGVyZm9ybWFuY2VNZXRyaWNzJykubW9ja1Jlc29sdmVkVmFsdWUoTU9DS19EQVRBLm1ldHJpY3MpO1xyXG4gICAgamVzdC5zcHlPbihhbmFseXRpY3NTZXJ2aWNlLCAnZ2V0TGVhcm5pbmdQYXRoUmVjb21tZW5kYXRpb25zJykubW9ja1Jlc29sdmVkVmFsdWUoTU9DS19EQVRBLnJlY29tbWVuZGF0aW9ucyk7XHJcbiAgICBqZXN0LnNweU9uKGFuYWx5dGljc1NlcnZpY2UsICdnZXRBZ2dyZWdhdGVBbmFseXRpY3MnKS5tb2NrUmVzb2x2ZWRWYWx1ZShNT0NLX0RBVEEuYW5hbHl0aWNzKTtcclxuICB9KTtcclxuXHJcbiAgYWZ0ZXJFYWNoKCgpID0+IHtcclxuICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdTZXNzaW9uIE1hbmFnZW1lbnQnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdzaG91bGQgc3RhcnQgYSBnYW1lIHNlc3Npb24gd2l0aCB0aW1lb3V0IHByb3RlY3Rpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICBcclxuICAgICAgY29uc3Qgc2Vzc2lvblByb21pc2UgPSBhbmFseXRpY3NTZXJ2aWNlLnN0YXJ0R2FtZVNlc3Npb24oXHJcbiAgICAgICAgdGVzdEF2YXRhcklkLCBcclxuICAgICAgICB0ZXN0R2FtZUlkLCBcclxuICAgICAgICB0ZXN0U2V0dGluZ3NcclxuICAgICAgKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEFkZCB0aW1lb3V0IHByb3RlY3Rpb24gdXNpbmcgUHJvbWlzZS5yYWNlXHJcbiAgICAgIGNvbnN0IHNlc3Npb25JZCA9IGF3YWl0IFByb21pc2UucmFjZShbXHJcbiAgICAgICAgc2Vzc2lvblByb21pc2UsXHJcbiAgICAgICAgbmV3IFByb21pc2U8bmV2ZXI+KChfLCByZWplY3QpID0+IFxyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByZWplY3QobmV3IEVycm9yKCdTZXNzaW9uIHN0YXJ0IHRpbWVvdXQnKSksIFRFU1RfVElNRU9VVFMuRkFTVClcclxuICAgICAgICApXHJcbiAgICAgIF0pO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZXhlY3V0aW9uVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHNlc3Npb25JZCkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHR5cGVvZiBzZXNzaW9uSWQpLnRvQmUoJ3N0cmluZycpO1xyXG4gICAgICBleHBlY3Qoc2Vzc2lvbklkLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICBleHBlY3QoZXhlY3V0aW9uVGltZSkudG9CZUxlc3NUaGFuKDEwMDApOyAvLyBQZXJmb3JtYW5jZSBjaGVja1xyXG4gICAgfSwgVEVTVF9USU1FT1VUUy5NRURJVU0pO1xyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCB0cmFjayBldmVudHMgd2l0aG91dCBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHNlc3Npb25JZCA9IGF3YWl0IGFuYWx5dGljc1NlcnZpY2Uuc3RhcnRHYW1lU2Vzc2lvbihcclxuICAgICAgICB0ZXN0QXZhdGFySWQsIFxyXG4gICAgICAgIHRlc3RHYW1lSWQsIFxyXG4gICAgICAgIHRlc3RTZXR0aW5nc1xyXG4gICAgICApO1xyXG4gICAgICBcclxuICAgICAgLy8gVGVzdCBlYWNoIGNhbGwgaW5kaXZpZHVhbGx5IHdpdGhvdXQgdXNpbmcgLnJlc29sdmVzXHJcbiAgICAgIGNvbnN0IHJlc3VsdDEgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLnRyYWNrRXZlbnQoc2Vzc2lvbklkLCB0ZXN0QXZhdGFySWQsICdxdWVzdGlvbl9zdGFydCcsIHt9KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdDEpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdDIgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLnRyYWNrRXZlbnQoc2Vzc2lvbklkLCB0ZXN0QXZhdGFySWQsICdxdWVzdGlvbl9hbnN3ZXInLCB7IGNvcnJlY3Q6IHRydWUgfSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQyKS50b0JlVW5kZWZpbmVkKCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQzID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS50cmFja0V2ZW50KHNlc3Npb25JZCwgdGVzdEF2YXRhcklkLCAnZ2FtZV9wYXVzZScsIHt9KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdDMpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCBjb21wbGV0ZSBzZXNzaW9uIGFuZCBnZW5lcmF0ZSBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzZXNzaW9uSWQgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLnN0YXJ0R2FtZVNlc3Npb24oXHJcbiAgICAgICAgdGVzdEF2YXRhcklkLCBcclxuICAgICAgICB0ZXN0R2FtZUlkLCBcclxuICAgICAgICB0ZXN0U2V0dGluZ3NcclxuICAgICAgKTtcclxuICAgICAgYXdhaXQgYW5hbHl0aWNzU2VydmljZS50cmFja0V2ZW50KHNlc3Npb25JZCwgdGVzdEF2YXRhcklkLCAncXVlc3Rpb25fYW5zd2VyJywgeyBjb3JyZWN0OiB0cnVlIH0pO1xyXG4gICAgICBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLnRyYWNrRXZlbnQoc2Vzc2lvbklkLCB0ZXN0QXZhdGFySWQsICdxdWVzdGlvbl9hbnN3ZXInLCB7IGNvcnJlY3Q6IGZhbHNlIH0pO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYW5hbHl0aWNzU2VydmljZS5jb21wbGV0ZUdhbWVTZXNzaW9uKHNlc3Npb25JZCwgNzUsIDIsIDEpO1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlVW5kZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdzaG91bGQgZ2VuZXJhdGUgcGVyZm9ybWFuY2UgbWV0cmljcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IGFuYWx5dGljc1NlcnZpY2UuZ2V0UGVyZm9ybWFuY2VNZXRyaWNzKHRlc3RBdmF0YXJJZCk7XHJcbiAgICAgIGV4cGVjdChtZXRyaWNzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIG1ldHJpY3MudG90YWxHYW1lc1BsYXllZCkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgbWV0cmljcy5hdmVyYWdlU2Vzc2lvbkR1cmF0aW9uKS50b0JlKCdudW1iZXInKTtcclxuICAgICAgZXhwZWN0KHR5cGVvZiBtZXRyaWNzLm92ZXJhbGxDb21wbGV0aW9uUmF0ZSkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgbWV0cmljcy5lbmdhZ2VtZW50U2NvcmUpLnRvQmUoJ251bWJlcicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIGdlbmVyYXRlIGxlYXJuaW5nIHBhdGggcmVjb21tZW5kYXRpb25zJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLmdldExlYXJuaW5nUGF0aFJlY29tbWVuZGF0aW9ucyh0ZXN0QXZhdGFySWQsIDMpO1xyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocmVjb21tZW5kYXRpb25zLmxlbmd0aCkudG9CZUxlc3NUaGFuT3JFcXVhbCgzKTtcclxuICAgICAgcmVjb21tZW5kYXRpb25zLmZvckVhY2gocmVjID0+IHtcclxuICAgICAgICBleHBlY3QocmVjKS50b0hhdmVQcm9wZXJ0eSgnZ2FtZUlkJyk7XHJcbiAgICAgICAgZXhwZWN0KHJlYykudG9IYXZlUHJvcGVydHkoJ3JlYXNvbicpO1xyXG4gICAgICAgIGV4cGVjdChyZWMpLnRvSGF2ZVByb3BlcnR5KCdwcmlvcml0eScpO1xyXG4gICAgICAgIGV4cGVjdCh0eXBlb2YgcmVjLnByaW9yaXR5KS50b0JlKCdudW1iZXInKTtcclxuICAgICAgICBleHBlY3QocmVjLnByaW9yaXR5KS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDEpO1xyXG4gICAgICAgIGV4cGVjdChyZWMucHJpb3JpdHkpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTApO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCBnZW5lcmF0ZSBhZ2dyZWdhdGUgYW5hbHl0aWNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBhbmFseXRpY3MgPSBhd2FpdCBhbmFseXRpY3NTZXJ2aWNlLmdldEFnZ3JlZ2F0ZUFuYWx5dGljcygpO1xyXG4gICAgICBleHBlY3QoYW5hbHl0aWNzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIGFuYWx5dGljcy50b3RhbFNlc3Npb25zKS50b0JlKCdudW1iZXInKTtcclxuICAgICAgZXhwZWN0KHR5cGVvZiBhbmFseXRpY3MudW5pcXVlUGxheWVycykudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgYW5hbHl0aWNzLmF2ZXJhZ2VEdXJhdGlvbikudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgYW5hbHl0aWNzLmNvbXBsZXRpb25SYXRlKS50b0JlKCdudW1iZXInKTtcclxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYW5hbHl0aWNzLnBvcHVsYXJHYW1lcykpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7Il0sIm5hbWVzIjpbIlRFU1RfVElNRU9VVFMiLCJGQVNUIiwiTUVESVVNIiwiU0xPVyIsIk1PQ0tfREFUQSIsInNlc3Npb25JZCIsIm1ldHJpY3MiLCJ0b3RhbEdhbWVzUGxheWVkIiwiYXZlcmFnZVNlc3Npb25EdXJhdGlvbiIsIm92ZXJhbGxDb21wbGV0aW9uUmF0ZSIsInNraWxsTGV2ZWxEaXN0cmlidXRpb24iLCJiZWdpbm5lciIsInN1YmplY3RQcmVmZXJlbmNlcyIsIk1hdGhlbWF0aWNzIiwibGVhcm5pbmdWZWxvY2l0eSIsImVuZ2FnZW1lbnRTY29yZSIsInJlY29tbWVuZGF0aW9ucyIsImdhbWVJZCIsInJlYXNvbiIsInByaW9yaXR5IiwiZXN0aW1hdGVkRGlmZmljdWx0eSIsImxlYXJuaW5nT2JqZWN0aXZlcyIsInByZXJlcXVpc2l0ZXNNZXQiLCJhbmFseXRpY3MiLCJ0b3RhbFNlc3Npb25zIiwidW5pcXVlUGxheWVycyIsImF2ZXJhZ2VEdXJhdGlvbiIsImNvbXBsZXRpb25SYXRlIiwicG9wdWxhckdhbWVzIiwibGVhcm5pbmdFZmZlY3RpdmVuZXNzIiwiZGVzY3JpYmUiLCJ0ZXN0QXZhdGFySWQiLCJ0ZXN0R2FtZUlkIiwidGVzdFNldHRpbmdzIiwiZGlmZmljdWx0eSIsInF1ZXN0aW9uc1BlclNlc3Npb24iLCJiZWZvcmVFYWNoIiwiamVzdCIsImNsZWFyQWxsTW9ja3MiLCJzcHlPbiIsImFuYWx5dGljc1NlcnZpY2UiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInVuZGVmaW5lZCIsImFmdGVyRWFjaCIsInJlc3RvcmVBbGxNb2NrcyIsInRlc3QiLCJzdGFydFRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsInNlc3Npb25Qcm9taXNlIiwic3RhcnRHYW1lU2Vzc2lvbiIsIlByb21pc2UiLCJyYWNlIiwiXyIsInJlamVjdCIsInNldFRpbWVvdXQiLCJFcnJvciIsImV4ZWN1dGlvblRpbWUiLCJleHBlY3QiLCJ0b0JlRGVmaW5lZCIsInRvQmUiLCJsZW5ndGgiLCJ0b0JlR3JlYXRlclRoYW4iLCJ0b0JlTGVzc1RoYW4iLCJyZXN1bHQxIiwidHJhY2tFdmVudCIsInRvQmVVbmRlZmluZWQiLCJyZXN1bHQyIiwiY29ycmVjdCIsInJlc3VsdDMiLCJyZXN1bHQiLCJjb21wbGV0ZUdhbWVTZXNzaW9uIiwiZ2V0UGVyZm9ybWFuY2VNZXRyaWNzIiwiZ2V0TGVhcm5pbmdQYXRoUmVjb21tZW5kYXRpb25zIiwiQXJyYXkiLCJpc0FycmF5IiwidG9CZUxlc3NUaGFuT3JFcXVhbCIsImZvckVhY2giLCJyZWMiLCJ0b0hhdmVQcm9wZXJ0eSIsInRvQmVHcmVhdGVyVGhhbk9yRXF1YWwiLCJnZXRBZ2dyZWdhdGVBbmFseXRpY3MiXSwibWFwcGluZ3MiOiJBQUFBOzs7Q0FHQzs7OztrQ0FFZ0M7QUFFakMseUJBQXlCO0FBQ3pCLE1BQU1BLGdCQUFnQjtJQUNwQkMsTUFBTTtJQUNOQyxRQUFRO0lBQ1JDLE1BQU07QUFDUjtBQUVBLHNCQUFzQjtBQUN0QixNQUFNQyxZQUFZO0lBQ2hCQyxXQUFXO0lBQ1hDLFNBQVM7UUFDUEMsa0JBQWtCO1FBQ2xCQyx3QkFBd0I7UUFDeEJDLHVCQUF1QjtRQUN2QkMsd0JBQXdCO1lBQUVDLFVBQVU7UUFBRTtRQUN0Q0Msb0JBQW9CO1lBQUVDLGFBQWE7UUFBRTtRQUNyQ0Msa0JBQWtCO1FBQ2xCQyxpQkFBaUI7SUFDbkI7SUFDQUMsaUJBQWlCO1FBQ2Y7WUFBRUMsUUFBUTtZQUFXQyxRQUFRO1lBQXFCQyxVQUFVO1lBQUdDLHFCQUFxQjtZQUFZQyxvQkFBb0IsRUFBRTtZQUFFQyxrQkFBa0I7UUFBSztLQUNoSjtJQUNEQyxXQUFXO1FBQ1RDLGVBQWU7UUFDZkMsZUFBZTtRQUNmQyxpQkFBaUI7UUFDakJDLGdCQUFnQjtRQUNoQkMsY0FBYyxFQUFFO1FBQ2hCQyx1QkFBdUIsQ0FBQztJQUMxQjtBQUNGO0FBRUFDLFNBQVMsMkNBQTJDO0lBQ2xELE1BQU1DLGVBQWU7SUFDckIsTUFBTUMsYUFBYTtJQUNuQixNQUFNQyxlQUFlO1FBQUVD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