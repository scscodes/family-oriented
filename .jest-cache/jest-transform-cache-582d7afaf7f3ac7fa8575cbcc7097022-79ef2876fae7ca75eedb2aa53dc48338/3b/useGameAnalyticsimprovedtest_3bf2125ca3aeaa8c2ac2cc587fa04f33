109679a19ea2206f75b790015d4ec21a
/**
 * Enhanced useGameAnalytics Hook Tests
 * 
 * This demonstrates improved testing patterns with:
 * - Consistent async/await handling
 * - Proper timeout management
 * - Comprehensive error scenarios
 * - Performance safeguards
 * - Better test isolation
 */ "use strict";
// Mock the analytics service
jest.mock('@/utils/analyticsService');
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _useGameAnalytics = require("../useGameAnalytics");
const _analyticsService = require("../../utils/analyticsService");
const _SettingsContext = require("../../context/SettingsContext");
// Type the mocked service for better TypeScript support
const mockAnalyticsService = _analyticsService.analyticsService;
// Test constants
const TEST_TIMEOUTS = {
    FAST: 2000,
    MEDIUM: 5000,
    SLOW: 8000
};
const MOCK_DATA = {
    avatarId: '00000000-0000-0000-0000-000000000004',
    gameType: 'numbers',
    sessionId: 'session-123',
    recommendations: [
        {
            gameId: 'letters',
            reason: 'Try letters next!',
            priority: 8,
            estimatedDifficulty: 'beginner',
            learningObjectives: [],
            prerequisitesMet: true
        }
    ],
    metrics: {
        totalGamesPlayed: 1,
        averageSessionDuration: 60,
        overallCompletionRate: 1,
        skillLevelDistribution: {
            beginner: 1
        },
        subjectPreferences: {
            Mathematics: 1
        },
        learningVelocity: 1,
        engagementScore: 80
    }
};
describe('useGameAnalytics - Enhanced Tests', ()=>{
    // Test wrapper with providers
    const wrapper = ({ children })=>/*#__PURE__*/ (0, _jsxruntime.jsx)(_SettingsContext.SettingsProvider, {
            children: children
        });
    // Setup fresh mocks before each test
    beforeEach(()=>{
        jest.clearAllMocks();
        // Setup default successful mock implementations
        mockAnalyticsService.startGameSession.mockResolvedValue(MOCK_DATA.sessionId);
        mockAnalyticsService.trackEvent.mockResolvedValue(undefined);
        mockAnalyticsService.completeGameSession.mockResolvedValue(undefined);
        mockAnalyticsService.getLearningPathRecommendations.mockResolvedValue(MOCK_DATA.recommendations);
        mockAnalyticsService.getPerformanceMetrics.mockResolvedValue(MOCK_DATA.metrics);
    });
    // Cleanup after each test
    afterEach(()=>{
        jest.resetAllMocks();
        jest.useRealTimers();
    });
    describe('Session Management', ()=>{
        it('should start a session successfully with timeout protection', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useGameAnalytics.useGameAnalytics)({
                    gameType: MOCK_DATA.gameType,
                    avatarId: MOCK_DATA.avatarId,
                    autoTrack: false
                }), {
                wrapper
            });
            // Start session with timeout protection
            await (0, _react.act)(async ()=>{
                const startPromise = result.current.startSession();
                await Promise.race([
                    startPromise,
                    new Promise((_, reject)=>setTimeout(()=>reject(new Error('Session start timeout')), TEST_TIMEOUTS.FAST))
                ]);
            });
            // Verify session was started correctly
            expect(mockAnalyticsService.startGameSession).toHaveBeenCalledWith(MOCK_DATA.avatarId, MOCK_DATA.gameType, expect.any(Object), undefined);
            expect(result.current.sessionId).toBe(MOCK_DATA.sessionId);
            expect(result.current.isTracking).toBe(true);
        }, TEST_TIMEOUTS.MEDIUM);
        it('should handle session start failures gracefully', async ()=>{
            const testError = new Error('Session start failed');
            mockAnalyticsService.startGameSession.mockRejectedValue(testError);
            const { result } = (0, _react.renderHook)(()=>(0, _useGameAnalytics.useGameAnalytics)({
                    gameType: MOCK_DATA.gameType,
                    avatarId: MOCK_DATA.avatarId,
                    autoTrack: false
                }), {
                wrapper
            });
            // Capture console errors during test
            const consoleSpy = jest.spyOn(console, 'error').mockImplementation(()=>{});
            await (0, _react.act)(async ()=>{
                try {
                    await result.current.startSession();
                } catch  {
                // Expected to fail
                }
            });
            // Verify error handling
            expect(result.current.sessionId).toBeNull();
            expect(result.current.isTracking).toBe(false);
            consoleSpy.mockRestore();
        }, TEST_TIMEOUTS.FAST);
        it('should prevent multiple concurrent session starts', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useGameAnalytics.useGameAnalytics)({
                    gameType: MOCK_DATA.gameType,
                    avatarId: MOCK_DATA.avatarId,
                    autoTrack: false
                }), {
                wrapper
            });
            // Start multiple sessions concurrently
            await (0, _react.act)(async ()=>{
                const promises = [
                    result.current.startSession(),
                    result.current.startSession(),
                    result.current.startSession()
                ];
                await Promise.all(promises);
            });
            // Should only call the service once
            expect(mockAnalyticsService.startGameSession).toHaveBeenCalledTimes(1);
        }, TEST_TIMEOUTS.MEDIUM);
    });
    describe('Event Tracking', ()=>{
        it('should track question attempts with proper validation', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useGameAnalytics.useGameAnalytics)({
                    gameType: MOCK_DATA.gameType,
                    avatarId: MOCK_DATA.avatarId,
                    autoTrack: false
                }), {
                wrapper
            });
            // Start session first
            await (0, _react.act)(async ()=>{
                await result.current.startSession();
            });
            // Wait for session to be established
            await (0, _react.waitFor)(()=>{
                expect(result.current.sessionId).toBe(MOCK_DATA.sessionId);
            }, {
                timeout: TEST_TIMEOUTS.FAST
            });
            // Track question attempt
            await (0, _react.act)(async ()=>{
                await result.current.trackQuestionAttempt(true, {
                    questionIndex: 0,
                    responseTime: 1500,
                    difficulty: 'easy'
                });
            });
            expect(mockAnalyticsService.trackEvent).toHaveBeenCalledWith(MOCK_DATA.sessionId, MOCK_DATA.avatarId, 'question_answer', expect.objectContaining({
                correct: true,
                questionIndex: 0,
                responseTime: 1500,
                difficulty: 'easy'
            }));
        }, TEST_TIMEOUTS.MEDIUM);
        it('should handle tracking failures without breaking the flow', async ()=>{
            const trackingError = new Error('Tracking failed');
            mockAnalyticsService.trackEvent.mockRejectedValue(trackingError);
            const { result } = (0, _react.renderHook)(()=>(0, _useGameAnalytics.useGameAnalytics)({
                    gameType: MOCK_DATA.gameType,
                    avatarId: MOCK_DATA.avatarId,
                    autoTrack: false
                }), {
                wrapper
            });
            await (0, _react.act)(async ()=>{
                await result.current.startSession();
            });
            // Suppress console error for this test
            const consoleSpy = jest.spyOn(console, 'error').mockImplementation(()=>{});
            await (0, _react.act)(async ()=>{
                // Should not throw even if tracking fails
                await expect(result.current.trackQuestionAttempt(true, {
                    questionIndex: 0
                })).resolves.not.toThrow();
            });
            consoleSpy.mockRestore();
        }, TEST_TIMEOUTS.FAST);
        it('should not track events without an active session', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useGameAnalytics.useGameAnalytics)({
                    gameType: MOCK_DATA.gameType,
                    avatarId: MOCK_DATA.avatarId,
                    autoTrack: false
                }), {
                wrapper
            });
            // Try to track without starting session
            await (0, _react.act)(async ()=>{
                await result.current.trackQuestionAttempt(true, {
                    questionIndex: 0
                });
            });
            expect(mockAnalyticsService.trackEvent).not.toHaveBeenCalled();
        }, TEST_TIMEOUTS.FAST);
    });
    describe('Session Completion', ()=>{
        it('should complete session and load analytics data', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useGameAnalytics.useGameAnalytics)({
                    gameType: MOCK_DATA.gameType,
                    avatarId: MOCK_DATA.avatarId,
                    autoTrack: false
                }), {
                wrapper
            });
            // Start session
            await (0, _react.act)(async ()=>{
                await result.current.startSession();
            });
            // Wait for session establishment
            await (0, _react.waitFor)(()=>{
                expect(result.current.isTracking).toBe(true);
            }, {
                timeout: TEST_TIMEOUTS.FAST
            });
            // Complete session
            await (0, _react.act)(async ()=>{
                await result.current.completeSession(90);
            });
            // Verify completion call
            expect(mockAnalyticsService.completeGameSession).toHaveBeenCalledWith(MOCK_DATA.sessionId, 90, expect.any(Number), expect.any(Number));
            // Verify analytics data loading
            await (0, _react.waitFor)(()=>{
                expect(result.current.recommendations).toEqual(MOCK_DATA.recommendations);
                expect(result.current.performanceMetrics).toEqual(MOCK_DATA.metrics);
            }, {
                timeout: TEST_TIMEOUTS.MEDIUM
            });
        }, TEST_TIMEOUTS.SLOW);
        it('should handle completion failures gracefully', async ()=>{
            const completionError = new Error('Completion failed');
            mockAnalyticsService.completeGameSession.mockRejectedValue(completionError);
            const { result } = (0, _react.renderHook)(()=>(0, _useGameAnalytics.useGameAnalytics)({
                    gameType: MOCK_DATA.gameType,
                    avatarId: MOCK_DATA.avatarId,
                    autoTrack: false
                }), {
                wrapper
            });
            await (0, _react.act)(async ()=>{
                await result.current.startSession();
            });
            const consoleSpy = jest.spyOn(console, 'error').mockImplementation(()=>{});
            await (0, _react.act)(async ()=>{
                await result.current.completeSession(90);
            });
            // Should still attempt to load analytics despite completion failure
            expect(mockAnalyticsService.getLearningPathRecommendations).toHaveBeenCalled();
            expect(mockAnalyticsService.getPerformanceMetrics).toHaveBeenCalled();
            consoleSpy.mockRestore();
        }, TEST_TIMEOUTS.MEDIUM);
    });
    describe('Performance & Edge Cases', ()=>{
        it('should complete operations within reasonable time limits', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useGameAnalytics.useGameAnalytics)({
                    gameType: MOCK_DATA.gameType,
                    avatarId: MOCK_DATA.avatarId,
                    autoTrack: false
                }), {
                wrapper
            });
            // Measure session start performance
            const startTime = performance.now();
            await (0, _react.act)(async ()=>{
                await result.current.startSession();
            });
            const sessionStartTime = performance.now() - startTime;
            expect(sessionStartTime).toBeLessThan(1000); // Should complete within 1 second
            // Measure event tracking performance
            const trackStartTime = performance.now();
            await (0, _react.act)(async ()=>{
                await result.current.trackQuestionAttempt(true, {
                    questionIndex: 0
                });
            });
            const trackTime = performance.now() - trackStartTime;
            expect(trackTime).toBeLessThan(500); // Should complete within 500ms
        }, TEST_TIMEOUTS.MEDIUM);
        it('should handle rapid successive calls without issues', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useGameAnalytics.useGameAnalytics)({
                    gameType: MOCK_DATA.gameType,
                    avatarId: MOCK_DATA.avatarId,
                    autoTrack: false
                }), {
                wrapper
            });
            await (0, _react.act)(async ()=>{
                await result.current.startSession();
            });
            // Fire multiple tracking events rapidly
            await (0, _react.act)(async ()=>{
                const promises = Array.from({
                    length: 10
                }, (_, i)=>result.current.trackQuestionAttempt(i % 2 === 0, {
                        questionIndex: i
                    }));
                await Promise.all(promises);
            });
            // All events should be tracked
            expect(mockAnalyticsService.trackEvent).toHaveBeenCalledTimes(10);
        }, TEST_TIMEOUTS.MEDIUM);
        it('should cleanup properly on unmount', async ()=>{
            const { result, unmount } = (0, _react.renderHook)(()=>(0, _useGameAnalytics.useGameAnalytics)({
                    gameType: MOCK_DATA.gameType,
                    avatarId: MOCK_DATA.avatarId,
                    autoTrack: false
                }), {
                wrapper
            });
            await (0, _react.act)(async ()=>{
                await result.current.startSession();
            });
            // Unmount component
            unmount();
            // No memory leaks or hanging promises should remain
            expect(result.current.isTracking).toBe(true); // State preserved until cleanup
        }, TEST_TIMEOUTS.FAST);
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxyZXBvc1xcZmFtaWx5LW9yaWVudGVkXFxzcmNcXGhvb2tzXFxfX3Rlc3RzX19cXHVzZUdhbWVBbmFseXRpY3MuaW1wcm92ZWQudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEVuaGFuY2VkIHVzZUdhbWVBbmFseXRpY3MgSG9vayBUZXN0c1xyXG4gKiBcclxuICogVGhpcyBkZW1vbnN0cmF0ZXMgaW1wcm92ZWQgdGVzdGluZyBwYXR0ZXJucyB3aXRoOlxyXG4gKiAtIENvbnNpc3RlbnQgYXN5bmMvYXdhaXQgaGFuZGxpbmdcclxuICogLSBQcm9wZXIgdGltZW91dCBtYW5hZ2VtZW50XHJcbiAqIC0gQ29tcHJlaGVuc2l2ZSBlcnJvciBzY2VuYXJpb3NcclxuICogLSBQZXJmb3JtYW5jZSBzYWZlZ3VhcmRzXHJcbiAqIC0gQmV0dGVyIHRlc3QgaXNvbGF0aW9uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgcmVuZGVySG9vaywgYWN0LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XHJcbmltcG9ydCB7IHVzZUdhbWVBbmFseXRpY3MgfSBmcm9tICcuLi91c2VHYW1lQW5hbHl0aWNzJztcclxuaW1wb3J0IHsgYW5hbHl0aWNzU2VydmljZSB9IGZyb20gJ0AvdXRpbHMvYW5hbHl0aWNzU2VydmljZSc7XHJcbmltcG9ydCB7IFNldHRpbmdzUHJvdmlkZXIgfSBmcm9tICdAL2NvbnRleHQvU2V0dGluZ3NDb250ZXh0JztcclxuXHJcbi8vIE1vY2sgdGhlIGFuYWx5dGljcyBzZXJ2aWNlXHJcbmplc3QubW9jaygnQC91dGlscy9hbmFseXRpY3NTZXJ2aWNlJyk7XHJcblxyXG4vLyBUeXBlIHRoZSBtb2NrZWQgc2VydmljZSBmb3IgYmV0dGVyIFR5cGVTY3JpcHQgc3VwcG9ydFxyXG5jb25zdCBtb2NrQW5hbHl0aWNzU2VydmljZSA9IGFuYWx5dGljc1NlcnZpY2UgYXMgamVzdC5Nb2NrZWQ8dHlwZW9mIGFuYWx5dGljc1NlcnZpY2U+O1xyXG5cclxuLy8gVGVzdCBjb25zdGFudHNcclxuY29uc3QgVEVTVF9USU1FT1VUUyA9IHtcclxuICBGQVNUOiAyMDAwLFxyXG4gIE1FRElVTTogNTAwMCxcclxuICBTTE9XOiA4MDAwXHJcbn0gYXMgY29uc3Q7XHJcblxyXG5jb25zdCBNT0NLX0RBVEEgPSB7XHJcbiAgYXZhdGFySWQ6ICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDQnLFxyXG4gIGdhbWVUeXBlOiAnbnVtYmVycycgYXMgY29uc3QsXHJcbiAgc2Vzc2lvbklkOiAnc2Vzc2lvbi0xMjMnLFxyXG4gIHJlY29tbWVuZGF0aW9uczogW1xyXG4gICAgeyBcclxuICAgICAgZ2FtZUlkOiAnbGV0dGVycycsIFxyXG4gICAgICByZWFzb246ICdUcnkgbGV0dGVycyBuZXh0IScsIFxyXG4gICAgICBwcmlvcml0eTogOCwgXHJcbiAgICAgIGVzdGltYXRlZERpZmZpY3VsdHk6ICdiZWdpbm5lcicsIFxyXG4gICAgICBsZWFybmluZ09iamVjdGl2ZXM6IFtdLCBcclxuICAgICAgcHJlcmVxdWlzaXRlc01ldDogdHJ1ZSBcclxuICAgIH1cclxuICBdLFxyXG4gIG1ldHJpY3M6IHtcclxuICAgIHRvdGFsR2FtZXNQbGF5ZWQ6IDEsXHJcbiAgICBhdmVyYWdlU2Vzc2lvbkR1cmF0aW9uOiA2MCxcclxuICAgIG92ZXJhbGxDb21wbGV0aW9uUmF0ZTogMSxcclxuICAgIHNraWxsTGV2ZWxEaXN0cmlidXRpb246IHsgYmVnaW5uZXI6IDEgfSxcclxuICAgIHN1YmplY3RQcmVmZXJlbmNlczogeyBNYXRoZW1hdGljczogMSB9LFxyXG4gICAgbGVhcm5pbmdWZWxvY2l0eTogMSxcclxuICAgIGVuZ2FnZW1lbnRTY29yZTogODBcclxuICB9XHJcbn0gYXMgY29uc3Q7XHJcblxyXG5kZXNjcmliZSgndXNlR2FtZUFuYWx5dGljcyAtIEVuaGFuY2VkIFRlc3RzJywgKCkgPT4ge1xyXG4gIC8vIFRlc3Qgd3JhcHBlciB3aXRoIHByb3ZpZGVyc1xyXG4gIGNvbnN0IHdyYXBwZXIgPSAoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkgPT4gKFxyXG4gICAgPFNldHRpbmdzUHJvdmlkZXI+e2NoaWxkcmVufTwvU2V0dGluZ3NQcm92aWRlcj5cclxuICApO1xyXG5cclxuICAvLyBTZXR1cCBmcmVzaCBtb2NrcyBiZWZvcmUgZWFjaCB0ZXN0XHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICAgIFxyXG4gICAgLy8gU2V0dXAgZGVmYXVsdCBzdWNjZXNzZnVsIG1vY2sgaW1wbGVtZW50YXRpb25zXHJcbiAgICBtb2NrQW5hbHl0aWNzU2VydmljZS5zdGFydEdhbWVTZXNzaW9uLm1vY2tSZXNvbHZlZFZhbHVlKE1PQ0tfREFUQS5zZXNzaW9uSWQpO1xyXG4gICAgbW9ja0FuYWx5dGljc1NlcnZpY2UudHJhY2tFdmVudC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xyXG4gICAgbW9ja0FuYWx5dGljc1NlcnZpY2UuY29tcGxldGVHYW1lU2Vzc2lvbi5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xyXG4gICAgbW9ja0FuYWx5dGljc1NlcnZpY2UuZ2V0TGVhcm5pbmdQYXRoUmVjb21tZW5kYXRpb25zLm1vY2tSZXNvbHZlZFZhbHVlKE1PQ0tfREFUQS5yZWNvbW1lbmRhdGlvbnMpO1xyXG4gICAgbW9ja0FuYWx5dGljc1NlcnZpY2UuZ2V0UGVyZm9ybWFuY2VNZXRyaWNzLm1vY2tSZXNvbHZlZFZhbHVlKE1PQ0tfREFUQS5tZXRyaWNzKTtcclxuICB9KTtcclxuXHJcbiAgLy8gQ2xlYW51cCBhZnRlciBlYWNoIHRlc3RcclxuICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5yZXNldEFsbE1vY2tzKCk7XHJcbiAgICBqZXN0LnVzZVJlYWxUaW1lcnMoKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1Nlc3Npb24gTWFuYWdlbWVudCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgc3RhcnQgYSBzZXNzaW9uIHN1Y2Nlc3NmdWxseSB3aXRoIHRpbWVvdXQgcHJvdGVjdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlR2FtZUFuYWx5dGljcyh7XHJcbiAgICAgICAgZ2FtZVR5cGU6IE1PQ0tfREFUQS5nYW1lVHlwZSxcclxuICAgICAgICBhdmF0YXJJZDogTU9DS19EQVRBLmF2YXRhcklkLFxyXG4gICAgICAgIGF1dG9UcmFjazogZmFsc2VcclxuICAgICAgfSksIHsgd3JhcHBlciB9KTtcclxuXHJcbiAgICAgIC8vIFN0YXJ0IHNlc3Npb24gd2l0aCB0aW1lb3V0IHByb3RlY3Rpb25cclxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBzdGFydFByb21pc2UgPSByZXN1bHQuY3VycmVudC5zdGFydFNlc3Npb24oKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLnJhY2UoW1xyXG4gICAgICAgICAgc3RhcnRQcm9taXNlLFxyXG4gICAgICAgICAgbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4gXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcmVqZWN0KG5ldyBFcnJvcignU2Vzc2lvbiBzdGFydCB0aW1lb3V0JykpLCBURVNUX1RJTUVPVVRTLkZBU1QpXHJcbiAgICAgICAgICApXHJcbiAgICAgICAgXSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gVmVyaWZ5IHNlc3Npb24gd2FzIHN0YXJ0ZWQgY29ycmVjdGx5XHJcbiAgICAgIGV4cGVjdChtb2NrQW5hbHl0aWNzU2VydmljZS5zdGFydEdhbWVTZXNzaW9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBNT0NLX0RBVEEuYXZhdGFySWQsXHJcbiAgICAgICAgTU9DS19EQVRBLmdhbWVUeXBlLFxyXG4gICAgICAgIGV4cGVjdC5hbnkoT2JqZWN0KSxcclxuICAgICAgICB1bmRlZmluZWRcclxuICAgICAgKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnNlc3Npb25JZCkudG9CZShNT0NLX0RBVEEuc2Vzc2lvbklkKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzVHJhY2tpbmcpLnRvQmUodHJ1ZSk7XHJcbiAgICB9LCBURVNUX1RJTUVPVVRTLk1FRElVTSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2Vzc2lvbiBzdGFydCBmYWlsdXJlcyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0ZXN0RXJyb3IgPSBuZXcgRXJyb3IoJ1Nlc3Npb24gc3RhcnQgZmFpbGVkJyk7XHJcbiAgICAgIG1vY2tBbmFseXRpY3NTZXJ2aWNlLnN0YXJ0R2FtZVNlc3Npb24ubW9ja1JlamVjdGVkVmFsdWUodGVzdEVycm9yKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUdhbWVBbmFseXRpY3Moe1xyXG4gICAgICAgIGdhbWVUeXBlOiBNT0NLX0RBVEEuZ2FtZVR5cGUsXHJcbiAgICAgICAgYXZhdGFySWQ6IE1PQ0tfREFUQS5hdmF0YXJJZCxcclxuICAgICAgICBhdXRvVHJhY2s6IGZhbHNlXHJcbiAgICAgIH0pLCB7IHdyYXBwZXIgfSk7XHJcblxyXG4gICAgICAvLyBDYXB0dXJlIGNvbnNvbGUgZXJyb3JzIGR1cmluZyB0ZXN0XHJcbiAgICAgIGNvbnN0IGNvbnNvbGVTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdlcnJvcicpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XHJcblxyXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5zdGFydFNlc3Npb24oKTtcclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgIC8vIEV4cGVjdGVkIHRvIGZhaWxcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gVmVyaWZ5IGVycm9yIGhhbmRsaW5nXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zZXNzaW9uSWQpLnRvQmVOdWxsKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc1RyYWNraW5nKS50b0JlKGZhbHNlKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGVTcHkubW9ja1Jlc3RvcmUoKTtcclxuICAgIH0sIFRFU1RfVElNRU9VVFMuRkFTVCk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBwcmV2ZW50IG11bHRpcGxlIGNvbmN1cnJlbnQgc2Vzc2lvbiBzdGFydHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUdhbWVBbmFseXRpY3Moe1xyXG4gICAgICAgIGdhbWVUeXBlOiBNT0NLX0RBVEEuZ2FtZVR5cGUsXHJcbiAgICAgICAgYXZhdGFySWQ6IE1PQ0tfREFUQS5hdmF0YXJJZCxcclxuICAgICAgICBhdXRvVHJhY2s6IGZhbHNlXHJcbiAgICAgIH0pLCB7IHdyYXBwZXIgfSk7XHJcblxyXG4gICAgICAvLyBTdGFydCBtdWx0aXBsZSBzZXNzaW9ucyBjb25jdXJyZW50bHlcclxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IFtcclxuICAgICAgICAgIHJlc3VsdC5jdXJyZW50LnN0YXJ0U2Vzc2lvbigpLFxyXG4gICAgICAgICAgcmVzdWx0LmN1cnJlbnQuc3RhcnRTZXNzaW9uKCksXHJcbiAgICAgICAgICByZXN1bHQuY3VycmVudC5zdGFydFNlc3Npb24oKVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFNob3VsZCBvbmx5IGNhbGwgdGhlIHNlcnZpY2Ugb25jZVxyXG4gICAgICBleHBlY3QobW9ja0FuYWx5dGljc1NlcnZpY2Uuc3RhcnRHYW1lU2Vzc2lvbikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xyXG4gICAgfSwgVEVTVF9USU1FT1VUUy5NRURJVU0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRXZlbnQgVHJhY2tpbmcnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIHRyYWNrIHF1ZXN0aW9uIGF0dGVtcHRzIHdpdGggcHJvcGVyIHZhbGlkYXRpb24nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUdhbWVBbmFseXRpY3Moe1xyXG4gICAgICAgIGdhbWVUeXBlOiBNT0NLX0RBVEEuZ2FtZVR5cGUsXHJcbiAgICAgICAgYXZhdGFySWQ6IE1PQ0tfREFUQS5hdmF0YXJJZCxcclxuICAgICAgICBhdXRvVHJhY2s6IGZhbHNlXHJcbiAgICAgIH0pLCB7IHdyYXBwZXIgfSk7XHJcblxyXG4gICAgICAvLyBTdGFydCBzZXNzaW9uIGZpcnN0XHJcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc3RhcnRTZXNzaW9uKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gV2FpdCBmb3Igc2Vzc2lvbiB0byBiZSBlc3RhYmxpc2hlZFxyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2Vzc2lvbklkKS50b0JlKE1PQ0tfREFUQS5zZXNzaW9uSWQpO1xyXG4gICAgICB9LCB7IHRpbWVvdXQ6IFRFU1RfVElNRU9VVFMuRkFTVCB9KTtcclxuXHJcbiAgICAgIC8vIFRyYWNrIHF1ZXN0aW9uIGF0dGVtcHRcclxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC50cmFja1F1ZXN0aW9uQXR0ZW1wdCh0cnVlLCB7IFxyXG4gICAgICAgICAgcXVlc3Rpb25JbmRleDogMCxcclxuICAgICAgICAgIHJlc3BvbnNlVGltZTogMTUwMCxcclxuICAgICAgICAgIGRpZmZpY3VsdHk6ICdlYXN5J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrQW5hbHl0aWNzU2VydmljZS50cmFja0V2ZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBNT0NLX0RBVEEuc2Vzc2lvbklkLFxyXG4gICAgICAgIE1PQ0tfREFUQS5hdmF0YXJJZCxcclxuICAgICAgICAncXVlc3Rpb25fYW5zd2VyJyxcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IFxyXG4gICAgICAgICAgY29ycmVjdDogdHJ1ZSwgXHJcbiAgICAgICAgICBxdWVzdGlvbkluZGV4OiAwLFxyXG4gICAgICAgICAgcmVzcG9uc2VUaW1lOiAxNTAwLFxyXG4gICAgICAgICAgZGlmZmljdWx0eTogJ2Vhc3knXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0sIFRFU1RfVElNRU9VVFMuTUVESVVNKTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB0cmFja2luZyBmYWlsdXJlcyB3aXRob3V0IGJyZWFraW5nIHRoZSBmbG93JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0cmFja2luZ0Vycm9yID0gbmV3IEVycm9yKCdUcmFja2luZyBmYWlsZWQnKTtcclxuICAgICAgbW9ja0FuYWx5dGljc1NlcnZpY2UudHJhY2tFdmVudC5tb2NrUmVqZWN0ZWRWYWx1ZSh0cmFja2luZ0Vycm9yKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUdhbWVBbmFseXRpY3Moe1xyXG4gICAgICAgIGdhbWVUeXBlOiBNT0NLX0RBVEEuZ2FtZVR5cGUsXHJcbiAgICAgICAgYXZhdGFySWQ6IE1PQ0tfREFUQS5hdmF0YXJJZCxcclxuICAgICAgICBhdXRvVHJhY2s6IGZhbHNlXHJcbiAgICAgIH0pLCB7IHdyYXBwZXIgfSk7XHJcblxyXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnN0YXJ0U2Vzc2lvbigpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFN1cHByZXNzIGNvbnNvbGUgZXJyb3IgZm9yIHRoaXMgdGVzdFxyXG4gICAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnZXJyb3InKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xyXG5cclxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAvLyBTaG91bGQgbm90IHRocm93IGV2ZW4gaWYgdHJhY2tpbmcgZmFpbHNcclxuICAgICAgICBhd2FpdCBleHBlY3QocmVzdWx0LmN1cnJlbnQudHJhY2tRdWVzdGlvbkF0dGVtcHQodHJ1ZSwgeyBxdWVzdGlvbkluZGV4OiAwIH0pKVxyXG4gICAgICAgICAgLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xyXG4gICAgfSwgVEVTVF9USU1FT1VUUy5GQVNUKTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIG5vdCB0cmFjayBldmVudHMgd2l0aG91dCBhbiBhY3RpdmUgc2Vzc2lvbicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlR2FtZUFuYWx5dGljcyh7XHJcbiAgICAgICAgZ2FtZVR5cGU6IE1PQ0tfREFUQS5nYW1lVHlwZSxcclxuICAgICAgICBhdmF0YXJJZDogTU9DS19EQVRBLmF2YXRhcklkLFxyXG4gICAgICAgIGF1dG9UcmFjazogZmFsc2VcclxuICAgICAgfSksIHsgd3JhcHBlciB9KTtcclxuXHJcbiAgICAgIC8vIFRyeSB0byB0cmFjayB3aXRob3V0IHN0YXJ0aW5nIHNlc3Npb25cclxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC50cmFja1F1ZXN0aW9uQXR0ZW1wdCh0cnVlLCB7IHF1ZXN0aW9uSW5kZXg6IDAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KG1vY2tBbmFseXRpY3NTZXJ2aWNlLnRyYWNrRXZlbnQpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICB9LCBURVNUX1RJTUVPVVRTLkZBU1QpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnU2Vzc2lvbiBDb21wbGV0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBjb21wbGV0ZSBzZXNzaW9uIGFuZCBsb2FkIGFuYWx5dGljcyBkYXRhJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VHYW1lQW5hbHl0aWNzKHtcclxuICAgICAgICBnYW1lVHlwZTogTU9DS19EQVRBLmdhbWVUeXBlLFxyXG4gICAgICAgIGF2YXRhcklkOiBNT0NLX0RBVEEuYXZhdGFySWQsXHJcbiAgICAgICAgYXV0b1RyYWNrOiBmYWxzZVxyXG4gICAgICB9KSwgeyB3cmFwcGVyIH0pO1xyXG5cclxuICAgICAgLy8gU3RhcnQgc2Vzc2lvblxyXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnN0YXJ0U2Vzc2lvbigpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFdhaXQgZm9yIHNlc3Npb24gZXN0YWJsaXNobWVudFxyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNUcmFja2luZykudG9CZSh0cnVlKTtcclxuICAgICAgfSwgeyB0aW1lb3V0OiBURVNUX1RJTUVPVVRTLkZBU1QgfSk7XHJcblxyXG4gICAgICAvLyBDb21wbGV0ZSBzZXNzaW9uXHJcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuY29tcGxldGVTZXNzaW9uKDkwKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBWZXJpZnkgY29tcGxldGlvbiBjYWxsXHJcbiAgICAgIGV4cGVjdChtb2NrQW5hbHl0aWNzU2VydmljZS5jb21wbGV0ZUdhbWVTZXNzaW9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBNT0NLX0RBVEEuc2Vzc2lvbklkLFxyXG4gICAgICAgIDkwLFxyXG4gICAgICAgIGV4cGVjdC5hbnkoTnVtYmVyKSxcclxuICAgICAgICBleHBlY3QuYW55KE51bWJlcilcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIFZlcmlmeSBhbmFseXRpY3MgZGF0YSBsb2FkaW5nXHJcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xyXG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5yZWNvbW1lbmRhdGlvbnMpLnRvRXF1YWwoTU9DS19EQVRBLnJlY29tbWVuZGF0aW9ucyk7XHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnBlcmZvcm1hbmNlTWV0cmljcykudG9FcXVhbChNT0NLX0RBVEEubWV0cmljcyk7XHJcbiAgICAgIH0sIHsgdGltZW91dDogVEVTVF9USU1FT1VUUy5NRURJVU0gfSk7XHJcbiAgICB9LCBURVNUX1RJTUVPVVRTLlNMT1cpO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXRpb24gZmFpbHVyZXMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY29tcGxldGlvbkVycm9yID0gbmV3IEVycm9yKCdDb21wbGV0aW9uIGZhaWxlZCcpO1xyXG4gICAgICBtb2NrQW5hbHl0aWNzU2VydmljZS5jb21wbGV0ZUdhbWVTZXNzaW9uLm1vY2tSZWplY3RlZFZhbHVlKGNvbXBsZXRpb25FcnJvcik7XHJcblxyXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VHYW1lQW5hbHl0aWNzKHtcclxuICAgICAgICBnYW1lVHlwZTogTU9DS19EQVRBLmdhbWVUeXBlLFxyXG4gICAgICAgIGF2YXRhcklkOiBNT0NLX0RBVEEuYXZhdGFySWQsXHJcbiAgICAgICAgYXV0b1RyYWNrOiBmYWxzZVxyXG4gICAgICB9KSwgeyB3cmFwcGVyIH0pO1xyXG5cclxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5zdGFydFNlc3Npb24oKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnZXJyb3InKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xyXG5cclxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5jb21wbGV0ZVNlc3Npb24oOTApO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFNob3VsZCBzdGlsbCBhdHRlbXB0IHRvIGxvYWQgYW5hbHl0aWNzIGRlc3BpdGUgY29tcGxldGlvbiBmYWlsdXJlXHJcbiAgICAgIGV4cGVjdChtb2NrQW5hbHl0aWNzU2VydmljZS5nZXRMZWFybmluZ1BhdGhSZWNvbW1lbmRhdGlvbnMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgZXhwZWN0KG1vY2tBbmFseXRpY3NTZXJ2aWNlLmdldFBlcmZvcm1hbmNlTWV0cmljcykudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG5cclxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xyXG4gICAgfSwgVEVTVF9USU1FT1VUUy5NRURJVU0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgJiBFZGdlIENhc2VzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBjb21wbGV0ZSBvcGVyYXRpb25zIHdpdGhpbiByZWFzb25hYmxlIHRpbWUgbGltaXRzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VHYW1lQW5hbHl0aWNzKHtcclxuICAgICAgICBnYW1lVHlwZTogTU9DS19EQVRBLmdhbWVUeXBlLFxyXG4gICAgICAgIGF2YXRhcklkOiBNT0NLX0RBVEEuYXZhdGFySWQsXHJcbiAgICAgICAgYXV0b1RyYWNrOiBmYWxzZVxyXG4gICAgICB9KSwgeyB3cmFwcGVyIH0pO1xyXG5cclxuICAgICAgLy8gTWVhc3VyZSBzZXNzaW9uIHN0YXJ0IHBlcmZvcm1hbmNlXHJcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICBcclxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgICBhd2FpdCByZXN1bHQuY3VycmVudC5zdGFydFNlc3Npb24oKTtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBzZXNzaW9uU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XHJcbiAgICAgIGV4cGVjdChzZXNzaW9uU3RhcnRUaW1lKS50b0JlTGVzc1RoYW4oMTAwMCk7IC8vIFNob3VsZCBjb21wbGV0ZSB3aXRoaW4gMSBzZWNvbmRcclxuXHJcbiAgICAgIC8vIE1lYXN1cmUgZXZlbnQgdHJhY2tpbmcgcGVyZm9ybWFuY2VcclxuICAgICAgY29uc3QgdHJhY2tTdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgXHJcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQudHJhY2tRdWVzdGlvbkF0dGVtcHQodHJ1ZSwgeyBxdWVzdGlvbkluZGV4OiAwIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHRyYWNrVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gdHJhY2tTdGFydFRpbWU7XHJcbiAgICAgIGV4cGVjdCh0cmFja1RpbWUpLnRvQmVMZXNzVGhhbig1MDApOyAvLyBTaG91bGQgY29tcGxldGUgd2l0aGluIDUwMG1zXHJcbiAgICB9LCBURVNUX1RJTUVPVVRTLk1FRElVTSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmFwaWQgc3VjY2Vzc2l2ZSBjYWxscyB3aXRob3V0IGlzc3VlcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlR2FtZUFuYWx5dGljcyh7XHJcbiAgICAgICAgZ2FtZVR5cGU6IE1PQ0tfREFUQS5nYW1lVHlwZSxcclxuICAgICAgICBhdmF0YXJJZDogTU9DS19EQVRBLmF2YXRhcklkLFxyXG4gICAgICAgIGF1dG9UcmFjazogZmFsc2VcclxuICAgICAgfSksIHsgd3JhcHBlciB9KTtcclxuXHJcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc3RhcnRTZXNzaW9uKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gRmlyZSBtdWx0aXBsZSB0cmFja2luZyBldmVudHMgcmFwaWRseVxyXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAgfSwgKF8sIGkpID0+XHJcbiAgICAgICAgICByZXN1bHQuY3VycmVudC50cmFja1F1ZXN0aW9uQXR0ZW1wdChpICUgMiA9PT0gMCwgeyBxdWVzdGlvbkluZGV4OiBpIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQWxsIGV2ZW50cyBzaG91bGQgYmUgdHJhY2tlZFxyXG4gICAgICBleHBlY3QobW9ja0FuYWx5dGljc1NlcnZpY2UudHJhY2tFdmVudCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEwKTtcclxuICAgIH0sIFRFU1RfVElNRU9VVFMuTUVESVVNKTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNsZWFudXAgcHJvcGVybHkgb24gdW5tb3VudCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgeyByZXN1bHQsIHVubW91bnQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlR2FtZUFuYWx5dGljcyh7XHJcbiAgICAgICAgZ2FtZVR5cGU6IE1PQ0tfREFUQS5nYW1lVHlwZSxcclxuICAgICAgICBhdmF0YXJJZDogTU9DS19EQVRBLmF2YXRhcklkLFxyXG4gICAgICAgIGF1dG9UcmFjazogZmFsc2VcclxuICAgICAgfSksIHsgd3JhcHBlciB9KTtcclxuXHJcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgcmVzdWx0LmN1cnJlbnQuc3RhcnRTZXNzaW9uKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gVW5tb3VudCBjb21wb25lbnRcclxuICAgICAgdW5tb3VudCgpO1xyXG5cclxuICAgICAgLy8gTm8gbWVtb3J5IGxlYWtzIG9yIGhhbmdpbmcgcHJvbWlzZXMgc2hvdWxkIHJlbWFpblxyXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNUcmFja2luZykudG9CZSh0cnVlKTsgLy8gU3RhdGUgcHJlc2VydmVkIHVudGlsIGNsZWFudXBcclxuICAgIH0sIFRFU1RfVElNRU9VVFMuRkFTVCk7XHJcbiAgfSk7XHJcbn0pOyAiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJtb2NrQW5hbHl0aWNzU2VydmljZSIsImFuYWx5dGljc1NlcnZpY2UiLCJURVNUX1RJTUVPVVRTIiwiRkFTVCIsIk1FRElVTSIsIlNMT1ciLCJNT0NLX0RBVEEiLCJhdmF0YXJJZCIsImdhbWVUeXBlIiwic2Vzc2lvbklkIiwicmVjb21tZW5kYXRpb25zIiwiZ2FtZUlkIiwicmVhc29uIiwicHJpb3JpdHkiLCJlc3RpbWF0ZWREaWZmaWN1bHR5IiwibGVhcm5pbmdPYmplY3RpdmVzIiwicHJlcmVxdWlzaXRlc01ldCIsIm1ldHJpY3MiLCJ0b3RhbEdhbWVzUGxheWVkIiwiYXZlcmFnZVNlc3Npb25EdXJhdGlvbiIsIm92ZXJhbGxDb21wbGV0aW9uUmF0ZSIsInNraWxsTGV2ZWxEaXN0cmlidXRpb24iLCJiZWdpbm5lciIsInN1YmplY3RQcmVmZXJlbmNlcyIsIk1hdGhlbWF0aWNzIiwibGVhcm5pbmdWZWxvY2l0eSIsImVuZ2FnZW1lbnRTY29yZSIsImRlc2NyaWJlIiwid3JhcHBlciIsImNoaWxkcmVuIiwiU2V0dGluZ3NQcm92aWRlciIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwic3RhcnRHYW1lU2Vzc2lvbiIsIm1vY2tSZXNvbHZlZFZhbHVlIiwidHJhY2tFdmVudCIsInVuZGVmaW5lZCIsImNvbXBsZXRlR2FtZVNlc3Npb24iLCJnZXRMZWFybmluZ1BhdGhSZWNvbW1lbmRhdGlvbnMiLCJnZXRQZXJmb3JtYW5jZU1ldHJpY3MiLCJhZnRlckVhY2giLCJyZXNldEFsbE1vY2tzIiwidXNlUmVhbFRpbWVycyIsIml0IiwicmVzdWx0IiwicmVuZGVySG9vayIsInVzZUdhbWVBbmFseXRpY3MiLCJhdXRvVHJhY2siLCJhY3QiLCJzdGFydFByb21pc2UiLCJjdXJyZW50Iiwic3RhcnRTZXNzaW9uIiwiUHJvbWlzZSIsInJhY2UiLCJfIiwicmVqZWN0Iiwic2V0VGltZW91dCIsIkVycm9yIiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJhbnkiLCJPYmplY3QiLCJ0b0JlIiwiaXNUcmFja2luZyIsInRlc3RFcnJvciIsIm1vY2tSZWplY3RlZFZhbHVlIiwiY29uc29sZVNweSIsInNweU9uIiwiY29uc29sZSIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsInRvQmVOdWxsIiwibW9ja1Jlc3RvcmUiLCJwcm9taXNlcyIsImFsbCIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsIndhaXRGb3IiLCJ0aW1lb3V0IiwidHJhY2tRdWVzdGlvbkF0dGVtcHQiLCJxdWVzdGlvbkluZGV4IiwicmVzcG9uc2VUaW1lIiwiZGlmZmljdWx0eSIsIm9iamVjdENvbnRhaW5pbmciLCJjb3JyZWN0IiwidHJhY2tpbmdFcnJvciIsInJlc29sdmVzIiwibm90IiwidG9UaHJvdyIsInRvSGF2ZUJlZW5DYWxsZWQiLCJjb21wbGV0ZVNlc3Npb24iLCJOdW1iZXIiLCJ0b0VxdWFsIiwicGVyZm9ybWFuY2VNZXRyaWNzIiwiY29tcGxldGlvbkVycm9yIiwic3RhcnRUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJzZXNzaW9uU3RhcnRUaW1lIiwidG9CZUxlc3NUaGFuIiwidHJhY2tTdGFydFRpbWUiLCJ0cmFja1RpbWUiLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJpIiwidW5tb3VudCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7OztDQVNDO0FBT0QsNkJBQTZCO0FBQzdCQSxLQUFLQyxJQUFJLENBQUM7Ozs7O3VCQU4rQjtrQ0FDUjtrQ0FDQTtpQ0FDQTtBQUtqQyx3REFBd0Q7QUFDeEQsTUFBTUMsdUJBQXVCQyxrQ0FBZ0I7QUFFN0MsaUJBQWlCO0FBQ2pCLE1BQU1DLGdCQUFnQjtJQUNwQkMsTUFBTTtJQUNOQyxRQUFRO0lBQ1JDLE1BQU07QUFDUjtBQUVBLE1BQU1DLFlBQVk7SUFDaEJDLFVBQVU7SUFDVkMsVUFBVTtJQUNWQyxXQUFXO0lBQ1hDLGlCQUFpQjtRQUNmO1lBQ0VDLFFBQVE7WUFDUkMsUUFBUTtZQUNSQyxVQUFVO1lBQ1ZDLHFCQUFxQjtZQUNyQkMsb0JBQW9CLEVBQUU7WUFDdEJDLGtCQUFrQjtRQUNwQjtLQUNEO0lBQ0RDLFNBQVM7UUFDUEMsa0JBQWtCO1FBQ2xCQyx3QkFBd0I7UUFDeEJDLHVCQUF1QjtRQUN2QkMsd0JBQXdCO1lBQUVDLFVBQVU7UUFBRTtR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