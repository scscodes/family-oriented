9a1bb2bdec4fd659797c5b1476a5b2e8
/**
 * Subscription Service - Tier-based Feature Gating and Usage Limits
 * Provides centralized subscription tier enforcement across the application
 * 
 * Enhanced with:
 * - Comprehensive feature gating for all app features
 * - Smart upgrade recommendations
 * - Demo mode support with proper tier simulation
 * - Real-time usage tracking and enforcement
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    SubscriptionService: function() {
        return SubscriptionService;
    },
    TIER_CONFIGURATIONS: function() {
        return TIER_CONFIGURATIONS;
    },
    subscriptionService: function() {
        return subscriptionService;
    }
});
const _logger = require("./logger");
const TIER_CONFIGURATIONS = {
    personal: {
        displayName: 'Personal Plan',
        description: 'Perfect for families with up to 5 children',
        basePrice: 9.99,
        features: {
            analytics: true,
            user_management: false,
            premium_themes: false,
            custom_branding: false,
            collections: true,
            scheduling: false,
            bulk_operations: false,
            api_access: false,
            export_data: false,
            advanced_reporting: false
        },
        limits: {
            avatars: 5,
            collections_per_avatar: 10,
            sessions_per_month: 1000,
            data_retention_months: 12
        }
    },
    professional: {
        displayName: 'Professional Plan',
        description: 'For educators and small organizations with up to 30 children',
        basePrice: 19.99,
        features: {
            analytics: true,
            user_management: true,
            premium_themes: true,
            custom_branding: false,
            collections: true,
            scheduling: true,
            bulk_operations: true,
            api_access: false,
            export_data: true,
            advanced_reporting: true
        },
        limits: {
            avatars: 30,
            collections_per_avatar: 25,
            sessions_per_month: 5000,
            data_retention_months: 24
        }
    },
    enterprise: {
        displayName: 'Enterprise Plan',
        description: 'For large organizations with unlimited children and full customization',
        basePrice: 49.99,
        features: {
            analytics: true,
            user_management: true,
            premium_themes: true,
            custom_branding: true,
            collections: true,
            scheduling: true,
            bulk_operations: true,
            api_access: true,
            export_data: true,
            advanced_reporting: true
        },
        limits: {
            avatars: 10000,
            collections_per_avatar: 100,
            sessions_per_month: 50000,
            data_retention_months: 60
        }
    }
};
class SubscriptionService {
    /**
   * Check if a feature is available for the given subscription plan
   * Enhanced with better error handling and logging
   */ static canAccessFeature(subscriptionPlan, feature) {
        // Handle no subscription plan (demo mode or logged out)
        if (!subscriptionPlan) {
            _logger.logger.warn('Feature access check without subscription plan:', feature);
            return {
                allowed: false,
                reason: 'No active subscription plan',
                upgradeRequired: 'personal'
            };
        }
        const tier = subscriptionPlan.tier;
        const tierConfig = TIER_CONFIGURATIONS[tier];
        // Validate tier configuration
        if (!tierConfig) {
            _logger.logger.error('Unknown subscription tier during feature check:', {
                tier,
                feature
            });
            return {
                allowed: false,
                reason: 'Invalid subscription tier configuration'
            };
        }
        // Check feature inclusion from database plan or fallback to tier defaults
        const featuresIncluded = subscriptionPlan.features_included || {};
        const hasFeature = featuresIncluded[feature] ?? tierConfig.features[feature];
        if (hasFeature) {
            _logger.logger.debug('Feature access granted:', {
                tier,
                feature
            });
            return {
                allowed: true
            };
        }
        // Determine minimum tier required for this feature
        const upgradeRequired = this.getMinimumTierForFeature(feature);
        _logger.logger.info('Feature access denied - upgrade required:', {
            currentTier: tier,
            feature,
            upgradeRequired
        });
        return {
            allowed: false,
            reason: `${feature.replace(/_/g, ' ').replace(/\b\w/g, (l)=>l.toUpperCase())} requires ${TIER_CONFIGURATIONS[upgradeRequired].displayName}`,
            upgradeRequired
        };
    }
    /**
   * Check usage against limits
   */ static checkUsageLimit(subscriptionPlan, limitType, currentUsage) {
        if (!subscriptionPlan) {
            return {
                allowed: false,
                reason: 'No active subscription plan',
                upgradeRequired: 'personal'
            };
        }
        const tier = subscriptionPlan.tier;
        const tierConfig = TIER_CONFIGURATIONS[tier];
        if (!tierConfig) {
            return {
                allowed: false,
                reason: 'Invalid subscription tier'
            };
        }
        // Get limit from database plan or fallback to defaults
        const limitKey = limitType === 'avatars' ? 'avatar_limit' : `${limitType}_limit`;
        const limit = subscriptionPlan[limitKey] ?? tierConfig.limits[limitType];
        if (currentUsage < limit) {
            return {
                allowed: true,
                currentUsage,
                limit
            };
        }
        // Usage exceeded - suggest upgrade
        const upgradeRequired = this.getNextTierWithHigherLimit(tier, limitType, currentUsage);
        return {
            allowed: false,
            reason: `${limitType} limit exceeded (${currentUsage}/${limit})`,
            upgradeRequired,
            currentUsage,
            limit
        };
    }
    /**
   * Avatar creation enforcement
   */ static canCreateAvatar(subscriptionPlan, currentAvatarsCount) {
        return this.checkUsageLimit(subscriptionPlan, 'avatars', currentAvatarsCount);
    }
    /**
   * Collection creation enforcement
   */ static canCreateCollection(subscriptionPlan, currentCollectionsCount) {
        return this.checkUsageLimit(subscriptionPlan, 'collections_per_avatar', currentCollectionsCount + 1);
    }
    /**
   * Get all available features for a subscription plan
   */ static getAvailableFeatures(subscriptionPlan) {
        if (!subscriptionPlan) return [];
        const tier = subscriptionPlan.tier;
        const tierConfig = TIER_CONFIGURATIONS[tier];
        const featuresIncluded = subscriptionPlan.features_included || {};
        const availableFeatures = [];
        for (const feature of Object.keys(tierConfig.features)){
            const hasFeature = featuresIncluded[feature] ?? tierConfig.features[feature];
            if (hasFeature) {
                availableFeatures.push(feature);
            }
        }
        return availableFeatures;
    }
    /**
   * Get usage summary for a subscription plan
   */ static getUsageSummary(subscriptionPlan, usageData) {
        const summary = {};
        for (const limitType of Object.keys(TIER_CONFIGURATIONS.personal.limits)){
            const currentUsage = this.getCurrentUsageValue(usageData, limitType);
            summary[limitType] = this.checkUsageLimit(subscriptionPlan, limitType, currentUsage);
        }
        return summary;
    }
    /**
   * Helper: Get minimum tier required for a feature
   */ static getMinimumTierForFeature(feature) {
        const tiers = [
            'personal',
            'professional',
            'enterprise'
        ];
        for (const tier of tiers){
            if (TIER_CONFIGURATIONS[tier].features[feature]) {
                return tier;
            }
        }
        return 'enterprise'; // Fallback to highest tier
    }
    /**
   * Helper: Get next tier with higher limit
   */ static getNextTierWithHigherLimit(currentTier, limitType, requiredUsage) {
        const tiers = [
            'personal',
            'professional',
            'enterprise'
        ];
        const currentIndex = tiers.indexOf(currentTier);
        for(let i = currentIndex + 1; i < tiers.length; i++){
            const tier = tiers[i];
            if (TIER_CONFIGURATIONS[tier].limits[limitType] >= requiredUsage) {
                return tier;
            }
        }
        return 'enterprise'; // Fallback to highest tier
    }
    /**
   * Helper: Extract current usage value from usage data
   */ static getCurrentUsageValue(usageData, limitType) {
        switch(limitType){
            case 'avatars':
                return usageData.avatarsCount;
            case 'collections_per_avatar':
                return usageData.collectionsCount;
            case 'sessions_per_month':
                return usageData.sessionsThisMonth;
            case 'data_retention_months':
                return usageData.dataRetentionMonths;
            default:
                return 0;
        }
    }
    /**
   * Format feature gate result for UI display
   */ static formatFeatureGateMessage(result) {
        if (result.allowed) {
            return 'Feature available';
        }
        if (result.upgradeRequired) {
            const tierName = TIER_CONFIGURATIONS[result.upgradeRequired].displayName;
            return `${result.reason}. Upgrade to ${tierName} to unlock this feature.`;
        }
        return result.reason || 'Feature not available';
    }
    /**
   * Get plan comparison data for upgrade UI
   */ static getPlanComparison() {
        const comparison = {};
        for (const [tier, config] of Object.entries(TIER_CONFIGURATIONS)){
            const enabledFeatures = Object.entries(config.features).filter(([, enabled])=>enabled).map(([featureName])=>featureName);
            const limitsDisplay = Object.entries(config.limits).map(([limit, value])=>`${limit}: ${value === 10000 ? 'Unlimited' : value}`);
            comparison[tier] = {
                displayName: config.displayName,
                description: config.description,
                price: config.basePrice,
                features: enabledFeatures,
                limits: limitsDisplay
            };
        }
        return comparison;
    }
    /**
   * Analyze tier transition impact
   */ static analyzeTierTransition(currentTier, targetTier, currentUsage) {
        const currentConfig = TIER_CONFIGURATIONS[currentTier];
        const targetConfig = TIER_CONFIGURATIONS[targetTier];
        // Safety check for invalid tiers
        if (!currentConfig || !targetConfig) {
            return {
                isUpgrade: false,
                isDowngrade: false,
                featureChanges: {
                    gained: [],
                    lost: []
                },
                usageImpact: {
                    overLimitItems: []
                },
                costImpact: {
                    currentCost: 0,
                    newCost: 0,
                    monthlyDifference: 0,
                    prorationAmount: 0,
                    prorationDescription: 'Invalid tier configuration'
                },
                warnings: [
                    'Invalid tier configuration'
                ],
                canTransition: false
            };
        }
        const tierOrder = {
            personal: 1,
            professional: 2,
            enterprise: 3
        };
        const isUpgrade = tierOrder[targetTier] > tierOrder[currentTier];
        const isDowngrade = tierOrder[targetTier] < tierOrder[currentTier];
        // Analyze feature changes
        const gainedFeatures = [];
        const lostFeatures = [];
        Object.entries(targetConfig.features).forEach(([featureName, enabled])=>{
            const currentlyEnabled = currentConfig.features[featureName];
            if (enabled && !currentlyEnabled) {
                gainedFeatures.push(featureName);
            } else if (!enabled && currentlyEnabled) {
                lostFeatures.push(featureName);
            }
        });
        // Analyze usage impact
        const overLimitItems = [];
        const warnings = [];
        Object.entries(targetConfig.limits).forEach(([limitType, newLimit])=>{
            const currentUsageValue = this.getCurrentUsageValue(currentUsage, limitType);
            if (currentUsageValue > newLimit) {
                const impact = this.getUsageLimitImpactMessage(limitType, currentUsageValue, newLimit);
                overLimitItems.push({
                    type: limitType,
                    current: currentUsageValue,
                    newLimit,
                    impact
                });
                warnings.push(`${limitType}: ${impact}`);
            }
        });
        // Add feature-specific warnings
        if (lostFeatures.length > 0) {
            warnings.push(`You will lose access to: ${lostFeatures.join(', ')}`);
        }
        if (currentTier === 'enterprise' && targetTier !== 'enterprise') {
            warnings.push('You will lose custom branding and advanced enterprise features');
        }
        // Calculate cost impact
        const currentCost = currentConfig.basePrice || 0;
        const newCost = targetConfig.basePrice || 0;
        const monthlyDifference = newCost - currentCost;
        const proration = this.calculateProration(currentCost, newCost);
        const canTransition = overLimitItems.length === 0 || isUpgrade;
        return {
            isUpgrade,
            isDowngrade,
            featureChanges: {
                gained: gainedFeatures,
                lost: lostFeatures
            },
            usageImpact: {
                overLimitItems
            },
            costImpact: {
                currentCost,
                newCost,
                monthlyDifference,
                prorationAmount: proration.prorationAmount,
                prorationDescription: proration.description
            },
            warnings,
            canTransition
        };
    }
    /**
   * Get available tier transitions
   */ static getAvailableTransitions(currentTier) {
        const allTiers = [
            'personal',
            'professional',
            'enterprise'
        ];
        const tierOrder = {
            personal: 1,
            professional: 2,
            enterprise: 3
        };
        const currentOrder = tierOrder[currentTier];
        return {
            upgrades: allTiers.filter((tier)=>tierOrder[tier] > currentOrder),
            downgrades: allTiers.filter((tier)=>tierOrder[tier] < currentOrder)
        };
    }
    /**
   * Calculate proration amount for tier change
   */ static calculateProration(currentMonthlyPrice, newMonthlyPrice, daysPassed = new Date().getDate(), daysInMonth = new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0).getDate()) {
        const remainingDays = daysInMonth - daysPassed;
        const dailyDifference = (newMonthlyPrice - currentMonthlyPrice) / daysInMonth;
        const prorationAmount = Math.round(dailyDifference * remainingDays * 100) / 100;
        const description = prorationAmount > 0 ? `You'll be charged $${Math.abs(prorationAmount).toFixed(2)} for the remaining ${remainingDays} days of this billing cycle.` : prorationAmount < 0 ? `You'll receive a credit of $${Math.abs(prorationAmount).toFixed(2)} for the remaining ${remainingDays} days.` : 'No proration required.';
        return {
            prorationAmount,
            description
        };
    }
    /**
   * Helper: Get usage limit impact message
   */ static getUsageLimitImpactMessage(limitType, currentUsage, newLimit) {
        const excess = currentUsage - newLimit;
        switch(limitType){
            case 'avatars':
                return `${excess} avatar(s) will need to be removed or archived`;
            case 'collections_per_avatar':
                return `Some collections may need to be removed or consolidated`;
            case 'sessions_per_month':
                return `Monthly session limit will be reduced from ${currentUsage} to ${newLimit}`;
            case 'data_retention_months':
                return `Data retention will be reduced from ${currentUsage} to ${newLimit} months`;
            default:
                return `Usage will be limited to ${newLimit} (currently ${currentUsage})`;
        }
    }
    /**
   * Validate if a tier transition is safe
   */ static validateTierTransition(currentTier, targetTier, currentUsage) {
        if (currentTier === targetTier) {
            return {
                valid: false,
                reasons: [
                    'Cannot transition to the same tier'
                ]
            };
        }
        const analysis = this.analyzeTierTransition(currentTier, targetTier, currentUsage);
        if (!analysis.canTransition) {
            return {
                valid: false,
                reasons: analysis.warnings
            };
        }
        return {
            valid: true,
            reasons: []
        };
    }
    /**
   * Enhanced feature enforcement for specific app features
   */ static canAccessDashboard(subscriptionPlan) {
        return this.canAccessFeature(subscriptionPlan, 'analytics');
    }
    static canAccessUserManagement(subscriptionPlan) {
        return this.canAccessFeature(subscriptionPlan, 'user_management');
    }
    static canAccessPremiumThemes(subscriptionPlan) {
        return this.canAccessFeature(subscriptionPlan, 'premium_themes');
    }
    static canAccessAdvancedReporting(subscriptionPlan) {
        return this.canAccessFeature(subscriptionPlan, 'advanced_reporting');
    }
    static canExportData(subscriptionPlan) {
        return this.canAccessFeature(subscriptionPlan, 'export_data');
    }
    /**
   * Bulk operations for feature checking (for UI components)
   */ static checkMultipleFeatures(subscriptionPlan, features) {
        const results = {};
        features.forEach((feature)=>{
            results[feature] = this.canAccessFeature(subscriptionPlan, feature);
        });
        return results;
    }
    /**
   * Get features that are locked for the current tier (for upgrade prompts)
   */ static getLockedFeatures(subscriptionPlan) {
        if (!subscriptionPlan) {
            return Object.keys(TIER_CONFIGURATIONS.personal.features);
        }
        const tier = subscriptionPlan.tier;
        const tierConfig = TIER_CONFIGURATIONS[tier];
        const featuresIncluded = subscriptionPlan.features_included || {};
        const lockedFeatures = [];
        // Check all possible features
        const allFeatures = new Set();
        Object.values(TIER_CONFIGURATIONS).forEach((config)=>{
            Object.keys(config.features).forEach((feature)=>{
                allFeatures.add(feature);
            });
        });
        allFeatures.forEach((feature)=>{
            const hasFeature = featuresIncluded[feature] ?? tierConfig?.features[feature] ?? false;
            if (!hasFeature) {
                lockedFeatures.push(feature);
            }
        });
        return lockedFeatures;
    }
    /**
   * Smart upgrade recommendations based on usage patterns
   */ static getSmartUpgradeRecommendation(subscriptionPlan, usageData, lockedFeaturesAccessed = []) {
        if (!subscriptionPlan) {
            return {
                recommended: true,
                targetTier: 'personal',
                reasons: [
                    'No active subscription'
                ],
                benefits: [
                    'Access to analytics',
                    'Create up to 5 children',
                    'Save collections'
                ],
                urgency: 'high'
            };
        }
        const tier = subscriptionPlan.tier;
        const reasons = [];
        const benefits = [];
        let urgency = 'low';
        let targetTier = tier;
        // Check usage against limits
        const usageSummary = this.getUsageSummary(subscriptionPlan, usageData);
        Object.entries(usageSummary).forEach(([limitType, result])=>{
            if (!result.allowed) {
                reasons.push(`${limitType} limit exceeded`);
                urgency = 'high';
                targetTier = result.upgradeRequired || 'professional';
            } else if (result.currentUsage && result.limit && result.currentUsage / result.limit > 0.8) {
                reasons.push(`Approaching ${limitType} limit`);
                urgency = urgency === 'low' ? 'medium' : urgency;
            }
        });
        // Check feature access patterns
        if (lockedFeaturesAccessed.length > 0) {
            reasons.push(`Attempted to access ${lockedFeaturesAccessed.length} premium feature(s)`);
            urgency = urgency === 'low' ? 'medium' : urgency;
            // Find minimum tier needed for these features
            lockedFeaturesAccessed.forEach((feature)=>{
                const requiredTier = this.getMinimumTierForFeature(feature);
                if (this.getTierPriority(requiredTier) > this.getTierPriority(targetTier)) {
                    targetTier = requiredTier;
                }
            });
        }
        // Generate benefits list
        if (targetTier !== tier) {
            const targetConfig = TIER_CONFIGURATIONS[targetTier];
            const currentConfig = TIER_CONFIGURATIONS[tier];
            // Highlight new features
            Object.entries(targetConfig.features).forEach(([feature, enabled])=>{
                if (enabled && !currentConfig.features[feature]) {
                    benefits.push(feature.replace(/_/g, ' ').replace(/\b\w/g, (l)=>l.toUpperCase()));
                }
            });
            // Highlight limit increases
            Object.entries(targetConfig.limits).forEach(([limitType, newLimit])=>{
                const currentLimit = currentConfig.limits[limitType];
                if (newLimit > currentLimit) {
                    if (newLimit >= 10000) {
                        benefits.push(`Unlimited ${limitType.replace(/_/g, ' ')}`);
                    } else {
                        benefits.push(`${newLimit} ${limitType.replace(/_/g, ' ')} (was ${currentLimit})`);
                    }
                }
            });
        }
        return {
            recommended: targetTier !== tier,
            targetTier,
            reasons,
            benefits,
            urgency
        };
    }
    /**
   * Helper: Get tier priority for comparison
   */ static getTierPriority(tier) {
        const priorities = {
            personal: 1,
            professional: 2,
            enterprise: 3
        };
        return priorities[tier];
    }
}
const subscriptionService = SubscriptionService;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxyZXBvc1xcZmFtaWx5LW9yaWVudGVkXFxzcmNcXHV0aWxzXFxzdWJzY3JpcHRpb25TZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBTdWJzY3JpcHRpb24gU2VydmljZSAtIFRpZXItYmFzZWQgRmVhdHVyZSBHYXRpbmcgYW5kIFVzYWdlIExpbWl0c1xyXG4gKiBQcm92aWRlcyBjZW50cmFsaXplZCBzdWJzY3JpcHRpb24gdGllciBlbmZvcmNlbWVudCBhY3Jvc3MgdGhlIGFwcGxpY2F0aW9uXHJcbiAqIFxyXG4gKiBFbmhhbmNlZCB3aXRoOlxyXG4gKiAtIENvbXByZWhlbnNpdmUgZmVhdHVyZSBnYXRpbmcgZm9yIGFsbCBhcHAgZmVhdHVyZXNcclxuICogLSBTbWFydCB1cGdyYWRlIHJlY29tbWVuZGF0aW9uc1xyXG4gKiAtIERlbW8gbW9kZSBzdXBwb3J0IHdpdGggcHJvcGVyIHRpZXIgc2ltdWxhdGlvblxyXG4gKiAtIFJlYWwtdGltZSB1c2FnZSB0cmFja2luZyBhbmQgZW5mb3JjZW1lbnRcclxuICovXHJcblxyXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL2xvZ2dlcic7XHJcbmltcG9ydCB0eXBlIHsgU3Vic2NyaXB0aW9uUGxhbiB9IGZyb20gJ0AvbGliL3N1cGFiYXNlL2RhdGFiYXNlLnR5cGVzJztcclxuXHJcbi8vIFN1YnNjcmlwdGlvbiB0aWVyIGRlZmluaXRpb25zXHJcbmV4cG9ydCB0eXBlIFN1YnNjcmlwdGlvblRpZXIgPSAncGVyc29uYWwnIHwgJ3Byb2Zlc3Npb25hbCcgfCAnZW50ZXJwcmlzZSc7XHJcblxyXG4vLyBGZWF0dXJlIGRlZmluaXRpb25zIHRoYXQgY2FuIGJlIGdhdGVkIGJ5IHN1YnNjcmlwdGlvbiB0aWVyXHJcbmV4cG9ydCB0eXBlIFN1YnNjcmlwdGlvbkZlYXR1cmUgPSBcclxuICB8ICdhbmFseXRpY3MnIFxyXG4gIHwgJ3VzZXJfbWFuYWdlbWVudCcgXHJcbiAgfCAncHJlbWl1bV90aGVtZXMnIFxyXG4gIHwgJ2N1c3RvbV9icmFuZGluZydcclxuICB8ICdjb2xsZWN0aW9ucydcclxuICB8ICdzY2hlZHVsaW5nJ1xyXG4gIHwgJ2J1bGtfb3BlcmF0aW9ucydcclxuICB8ICdhcGlfYWNjZXNzJ1xyXG4gIHwgJ2V4cG9ydF9kYXRhJ1xyXG4gIHwgJ2FkdmFuY2VkX3JlcG9ydGluZyc7XHJcblxyXG4vLyBVc2FnZSBsaW1pdCB0eXBlc1xyXG5leHBvcnQgdHlwZSBVc2FnZUxpbWl0ID0gXHJcbiAgfCAnYXZhdGFycydcclxuICB8ICdjb2xsZWN0aW9uc19wZXJfYXZhdGFyJ1xyXG4gIHwgJ3Nlc3Npb25zX3Blcl9tb250aCdcclxuICB8ICdkYXRhX3JldGVudGlvbl9tb250aHMnO1xyXG5cclxuLyoqXHJcbiAqIERlZmF1bHQgdGllciBjb25maWd1cmF0aW9uc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFRJRVJfQ09ORklHVVJBVElPTlM6IFJlY29yZDxTdWJzY3JpcHRpb25UaWVyLCB7XHJcbiAgZmVhdHVyZXM6IFJlY29yZDxTdWJzY3JpcHRpb25GZWF0dXJlLCBib29sZWFuPjtcclxuICBsaW1pdHM6IFJlY29yZDxVc2FnZUxpbWl0LCBudW1iZXI+O1xyXG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb246IHN0cmluZztcclxuICBiYXNlUHJpY2U6IG51bWJlcjtcclxufT4gPSB7XHJcbiAgcGVyc29uYWw6IHtcclxuICAgIGRpc3BsYXlOYW1lOiAnUGVyc29uYWwgUGxhbicsXHJcbiAgICBkZXNjcmlwdGlvbjogJ1BlcmZlY3QgZm9yIGZhbWlsaWVzIHdpdGggdXAgdG8gNSBjaGlsZHJlbicsXHJcbiAgICBiYXNlUHJpY2U6IDkuOTksXHJcbiAgICBmZWF0dXJlczoge1xyXG4gICAgICBhbmFseXRpY3M6IHRydWUsXHJcbiAgICAgIHVzZXJfbWFuYWdlbWVudDogZmFsc2UsXHJcbiAgICAgIHByZW1pdW1fdGhlbWVzOiBmYWxzZSxcclxuICAgICAgY3VzdG9tX2JyYW5kaW5nOiBmYWxzZSxcclxuICAgICAgY29sbGVjdGlvbnM6IHRydWUsXHJcbiAgICAgIHNjaGVkdWxpbmc6IGZhbHNlLFxyXG4gICAgICBidWxrX29wZXJhdGlvbnM6IGZhbHNlLFxyXG4gICAgICBhcGlfYWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXhwb3J0X2RhdGE6IGZhbHNlLFxyXG4gICAgICBhZHZhbmNlZF9yZXBvcnRpbmc6IGZhbHNlXHJcbiAgICB9LFxyXG4gICAgbGltaXRzOiB7XHJcbiAgICAgIGF2YXRhcnM6IDUsXHJcbiAgICAgIGNvbGxlY3Rpb25zX3Blcl9hdmF0YXI6IDEwLFxyXG4gICAgICBzZXNzaW9uc19wZXJfbW9udGg6IDEwMDAsXHJcbiAgICAgIGRhdGFfcmV0ZW50aW9uX21vbnRoczogMTJcclxuICAgIH1cclxuICB9LFxyXG4gIHByb2Zlc3Npb25hbDoge1xyXG4gICAgZGlzcGxheU5hbWU6ICdQcm9mZXNzaW9uYWwgUGxhbicsXHJcbiAgICBkZXNjcmlwdGlvbjogJ0ZvciBlZHVjYXRvcnMgYW5kIHNtYWxsIG9yZ2FuaXphdGlvbnMgd2l0aCB1cCB0byAzMCBjaGlsZHJlbicsXHJcbiAgICBiYXNlUHJpY2U6IDE5Ljk5LFxyXG4gICAgZmVhdHVyZXM6IHtcclxuICAgICAgYW5hbHl0aWNzOiB0cnVlLFxyXG4gICAgICB1c2VyX21hbmFnZW1lbnQ6IHRydWUsXHJcbiAgICAgIHByZW1pdW1fdGhlbWVzOiB0cnVlLFxyXG4gICAgICBjdXN0b21fYnJhbmRpbmc6IGZhbHNlLFxyXG4gICAgICBjb2xsZWN0aW9uczogdHJ1ZSxcclxuICAgICAgc2NoZWR1bGluZzogdHJ1ZSxcclxuICAgICAgYnVsa19vcGVyYXRpb25zOiB0cnVlLFxyXG4gICAgICBhcGlfYWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXhwb3J0X2RhdGE6IHRydWUsXHJcbiAgICAgIGFkdmFuY2VkX3JlcG9ydGluZzogdHJ1ZVxyXG4gICAgfSxcclxuICAgIGxpbWl0czoge1xyXG4gICAgICBhdmF0YXJzOiAzMCxcclxuICAgICAgY29sbGVjdGlvbnNfcGVyX2F2YXRhcjogMjUsXHJcbiAgICAgIHNlc3Npb25zX3Blcl9tb250aDogNTAwMCxcclxuICAgICAgZGF0YV9yZXRlbnRpb25fbW9udGhzOiAyNFxyXG4gICAgfVxyXG4gIH0sXHJcbiAgZW50ZXJwcmlzZToge1xyXG4gICAgZGlzcGxheU5hbWU6ICdFbnRlcnByaXNlIFBsYW4nLFxyXG4gICAgZGVzY3JpcHRpb246ICdGb3IgbGFyZ2Ugb3JnYW5pemF0aW9ucyB3aXRoIHVubGltaXRlZCBjaGlsZHJlbiBhbmQgZnVsbCBjdXN0b21pemF0aW9uJyxcclxuICAgIGJhc2VQcmljZTogNDkuOTksXHJcbiAgICBmZWF0dXJlczoge1xyXG4gICAgICBhbmFseXRpY3M6IHRydWUsXHJcbiAgICAgIHVzZXJfbWFuYWdlbWVudDogdHJ1ZSxcclxuICAgICAgcHJlbWl1bV90aGVtZXM6IHRydWUsXHJcbiAgICAgIGN1c3RvbV9icmFuZGluZzogdHJ1ZSxcclxuICAgICAgY29sbGVjdGlvbnM6IHRydWUsXHJcbiAgICAgIHNjaGVkdWxpbmc6IHRydWUsXHJcbiAgICAgIGJ1bGtfb3BlcmF0aW9uczogdHJ1ZSxcclxuICAgICAgYXBpX2FjY2VzczogdHJ1ZSxcclxuICAgICAgZXhwb3J0X2RhdGE6IHRydWUsXHJcbiAgICAgIGFkdmFuY2VkX3JlcG9ydGluZzogdHJ1ZVxyXG4gICAgfSxcclxuICAgIGxpbWl0czoge1xyXG4gICAgICBhdmF0YXJzOiAxMDAwMCwgLy8gRWZmZWN0aXZlbHkgdW5saW1pdGVkXHJcbiAgICAgIGNvbGxlY3Rpb25zX3Blcl9hdmF0YXI6IDEwMCxcclxuICAgICAgc2Vzc2lvbnNfcGVyX21vbnRoOiA1MDAwMCxcclxuICAgICAgZGF0YV9yZXRlbnRpb25fbW9udGhzOiA2MFxyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBVc2FnZSB0cmFja2luZyBhbmQgZW5mb3JjZW1lbnRcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVXNhZ2VEYXRhIHtcclxuICBhdmF0YXJzQ291bnQ6IG51bWJlcjtcclxuICBjb2xsZWN0aW9uc0NvdW50OiBudW1iZXI7XHJcbiAgc2Vzc2lvbnNUaGlzTW9udGg6IG51bWJlcjtcclxuICBkYXRhUmV0ZW50aW9uTW9udGhzOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmVhdHVyZUdhdGVSZXN1bHQge1xyXG4gIGFsbG93ZWQ6IGJvb2xlYW47XHJcbiAgcmVhc29uPzogc3RyaW5nO1xyXG4gIHVwZ3JhZGVSZXF1aXJlZD86IFN1YnNjcmlwdGlvblRpZXI7XHJcbiAgY3VycmVudFVzYWdlPzogbnVtYmVyO1xyXG4gIGxpbWl0PzogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogU3Vic2NyaXB0aW9uIFNlcnZpY2UgQ2xhc3NcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdWJzY3JpcHRpb25TZXJ2aWNlIHtcclxuICBcclxuICAvKipcclxuICAgKiBDaGVjayBpZiBhIGZlYXR1cmUgaXMgYXZhaWxhYmxlIGZvciB0aGUgZ2l2ZW4gc3Vic2NyaXB0aW9uIHBsYW5cclxuICAgKiBFbmhhbmNlZCB3aXRoIGJldHRlciBlcnJvciBoYW5kbGluZyBhbmQgbG9nZ2luZ1xyXG4gICAqL1xyXG4gIHN0YXRpYyBjYW5BY2Nlc3NGZWF0dXJlKFxyXG4gICAgc3Vic2NyaXB0aW9uUGxhbjogU3Vic2NyaXB0aW9uUGxhbiB8IG51bGwsIFxyXG4gICAgZmVhdHVyZTogU3Vic2NyaXB0aW9uRmVhdHVyZVxyXG4gICk6IEZlYXR1cmVHYXRlUmVzdWx0IHtcclxuICAgIC8vIEhhbmRsZSBubyBzdWJzY3JpcHRpb24gcGxhbiAoZGVtbyBtb2RlIG9yIGxvZ2dlZCBvdXQpXHJcbiAgICBpZiAoIXN1YnNjcmlwdGlvblBsYW4pIHtcclxuICAgICAgbG9nZ2VyLndhcm4oJ0ZlYXR1cmUgYWNjZXNzIGNoZWNrIHdpdGhvdXQgc3Vic2NyaXB0aW9uIHBsYW46JywgZmVhdHVyZSk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgYWxsb3dlZDogZmFsc2UsXHJcbiAgICAgICAgcmVhc29uOiAnTm8gYWN0aXZlIHN1YnNjcmlwdGlvbiBwbGFuJyxcclxuICAgICAgICB1cGdyYWRlUmVxdWlyZWQ6ICdwZXJzb25hbCdcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0aWVyID0gc3Vic2NyaXB0aW9uUGxhbi50aWVyIGFzIFN1YnNjcmlwdGlvblRpZXI7XHJcbiAgICBjb25zdCB0aWVyQ29uZmlnID0gVElFUl9DT05GSUdVUkFUSU9OU1t0aWVyXTtcclxuICAgIFxyXG4gICAgLy8gVmFsaWRhdGUgdGllciBjb25maWd1cmF0aW9uXHJcbiAgICBpZiAoIXRpZXJDb25maWcpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdVbmtub3duIHN1YnNjcmlwdGlvbiB0aWVyIGR1cmluZyBmZWF0dXJlIGNoZWNrOicsIHsgdGllciwgZmVhdHVyZSB9KTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBhbGxvd2VkOiBmYWxzZSxcclxuICAgICAgICByZWFzb246ICdJbnZhbGlkIHN1YnNjcmlwdGlvbiB0aWVyIGNvbmZpZ3VyYXRpb24nXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgZmVhdHVyZSBpbmNsdXNpb24gZnJvbSBkYXRhYmFzZSBwbGFuIG9yIGZhbGxiYWNrIHRvIHRpZXIgZGVmYXVsdHNcclxuICAgIGNvbnN0IGZlYXR1cmVzSW5jbHVkZWQgPSBzdWJzY3JpcHRpb25QbGFuLmZlYXR1cmVzX2luY2x1ZGVkIHx8IHt9O1xyXG4gICAgY29uc3QgaGFzRmVhdHVyZSA9IGZlYXR1cmVzSW5jbHVkZWRbZmVhdHVyZV0gPz8gdGllckNvbmZpZy5mZWF0dXJlc1tmZWF0dXJlXTtcclxuXHJcbiAgICBpZiAoaGFzRmVhdHVyZSkge1xyXG4gICAgICBsb2dnZXIuZGVidWcoJ0ZlYXR1cmUgYWNjZXNzIGdyYW50ZWQ6JywgeyB0aWVyLCBmZWF0dXJlIH0pO1xyXG4gICAgICByZXR1cm4geyBhbGxvd2VkOiB0cnVlIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIG1pbmltdW0gdGllciByZXF1aXJlZCBmb3IgdGhpcyBmZWF0dXJlXHJcbiAgICBjb25zdCB1cGdyYWRlUmVxdWlyZWQgPSB0aGlzLmdldE1pbmltdW1UaWVyRm9yRmVhdHVyZShmZWF0dXJlKTtcclxuICAgIFxyXG4gICAgbG9nZ2VyLmluZm8oJ0ZlYXR1cmUgYWNjZXNzIGRlbmllZCAtIHVwZ3JhZGUgcmVxdWlyZWQ6JywgeyBcclxuICAgICAgY3VycmVudFRpZXI6IHRpZXIsIFxyXG4gICAgICBmZWF0dXJlLCBcclxuICAgICAgdXBncmFkZVJlcXVpcmVkIFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYWxsb3dlZDogZmFsc2UsXHJcbiAgICAgIHJlYXNvbjogYCR7ZmVhdHVyZS5yZXBsYWNlKC9fL2csICcgJykucmVwbGFjZSgvXFxiXFx3L2csIGwgPT4gbC50b1VwcGVyQ2FzZSgpKX0gcmVxdWlyZXMgJHtUSUVSX0NPTkZJR1VSQVRJT05TW3VwZ3JhZGVSZXF1aXJlZF0uZGlzcGxheU5hbWV9YCxcclxuICAgICAgdXBncmFkZVJlcXVpcmVkXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgdXNhZ2UgYWdhaW5zdCBsaW1pdHNcclxuICAgKi9cclxuICBzdGF0aWMgY2hlY2tVc2FnZUxpbWl0KFxyXG4gICAgc3Vic2NyaXB0aW9uUGxhbjogU3Vic2NyaXB0aW9uUGxhbiB8IG51bGwsXHJcbiAgICBsaW1pdFR5cGU6IFVzYWdlTGltaXQsXHJcbiAgICBjdXJyZW50VXNhZ2U6IG51bWJlclxyXG4gICk6IEZlYXR1cmVHYXRlUmVzdWx0IHtcclxuICAgIGlmICghc3Vic2NyaXB0aW9uUGxhbikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGFsbG93ZWQ6IGZhbHNlLFxyXG4gICAgICAgIHJlYXNvbjogJ05vIGFjdGl2ZSBzdWJzY3JpcHRpb24gcGxhbicsXHJcbiAgICAgICAgdXBncmFkZVJlcXVpcmVkOiAncGVyc29uYWwnXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdGllciA9IHN1YnNjcmlwdGlvblBsYW4udGllciBhcyBTdWJzY3JpcHRpb25UaWVyO1xyXG4gICAgY29uc3QgdGllckNvbmZpZyA9IFRJRVJfQ09ORklHVVJBVElPTlNbdGllcl07XHJcbiAgICBcclxuICAgIGlmICghdGllckNvbmZpZykge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGFsbG93ZWQ6IGZhbHNlLFxyXG4gICAgICAgIHJlYXNvbjogJ0ludmFsaWQgc3Vic2NyaXB0aW9uIHRpZXInXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IGxpbWl0IGZyb20gZGF0YWJhc2UgcGxhbiBvciBmYWxsYmFjayB0byBkZWZhdWx0c1xyXG4gICAgY29uc3QgbGltaXRLZXkgPSBsaW1pdFR5cGUgPT09ICdhdmF0YXJzJyA/ICdhdmF0YXJfbGltaXQnIDogYCR7bGltaXRUeXBlfV9saW1pdGA7XHJcbiAgICBjb25zdCBsaW1pdCA9IHN1YnNjcmlwdGlvblBsYW5bbGltaXRLZXldID8/IHRpZXJDb25maWcubGltaXRzW2xpbWl0VHlwZV07XHJcblxyXG4gICAgaWYgKGN1cnJlbnRVc2FnZSA8IGxpbWl0KSB7XHJcbiAgICAgIHJldHVybiB7IFxyXG4gICAgICAgIGFsbG93ZWQ6IHRydWUsIFxyXG4gICAgICAgIGN1cnJlbnRVc2FnZSwgXHJcbiAgICAgICAgbGltaXQgXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXNhZ2UgZXhjZWVkZWQgLSBzdWdnZXN0IHVwZ3JhZGVcclxuICAgIGNvbnN0IHVwZ3JhZGVSZXF1aXJlZCA9IHRoaXMuZ2V0TmV4dFRpZXJXaXRoSGlnaGVyTGltaXQodGllciwgbGltaXRUeXBlLCBjdXJyZW50VXNhZ2UpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGFsbG93ZWQ6IGZhbHNlLFxyXG4gICAgICByZWFzb246IGAke2xpbWl0VHlwZX0gbGltaXQgZXhjZWVkZWQgKCR7Y3VycmVudFVzYWdlfS8ke2xpbWl0fSlgLFxyXG4gICAgICB1cGdyYWRlUmVxdWlyZWQsXHJcbiAgICAgIGN1cnJlbnRVc2FnZSxcclxuICAgICAgbGltaXRcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBdmF0YXIgY3JlYXRpb24gZW5mb3JjZW1lbnRcclxuICAgKi9cclxuICBzdGF0aWMgY2FuQ3JlYXRlQXZhdGFyKFxyXG4gICAgc3Vic2NyaXB0aW9uUGxhbjogU3Vic2NyaXB0aW9uUGxhbiB8IG51bGwsXHJcbiAgICBjdXJyZW50QXZhdGFyc0NvdW50OiBudW1iZXJcclxuICApOiBGZWF0dXJlR2F0ZVJlc3VsdCB7XHJcbiAgICByZXR1cm4gdGhpcy5jaGVja1VzYWdlTGltaXQoc3Vic2NyaXB0aW9uUGxhbiwgJ2F2YXRhcnMnLCBjdXJyZW50QXZhdGFyc0NvdW50KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbGxlY3Rpb24gY3JlYXRpb24gZW5mb3JjZW1lbnRcclxuICAgKi9cclxuICBzdGF0aWMgY2FuQ3JlYXRlQ29sbGVjdGlvbihcclxuICAgIHN1YnNjcmlwdGlvblBsYW46IFN1YnNjcmlwdGlvblBsYW4gfCBudWxsLFxyXG4gICAgY3VycmVudENvbGxlY3Rpb25zQ291bnQ6IG51bWJlclxyXG4gICk6IEZlYXR1cmVHYXRlUmVzdWx0IHtcclxuICAgIHJldHVybiB0aGlzLmNoZWNrVXNhZ2VMaW1pdChzdWJzY3JpcHRpb25QbGFuLCAnY29sbGVjdGlvbnNfcGVyX2F2YXRhcicsIGN1cnJlbnRDb2xsZWN0aW9uc0NvdW50ICsgMSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgYWxsIGF2YWlsYWJsZSBmZWF0dXJlcyBmb3IgYSBzdWJzY3JpcHRpb24gcGxhblxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRBdmFpbGFibGVGZWF0dXJlcyhzdWJzY3JpcHRpb25QbGFuOiBTdWJzY3JpcHRpb25QbGFuIHwgbnVsbCk6IFN1YnNjcmlwdGlvbkZlYXR1cmVbXSB7XHJcbiAgICBpZiAoIXN1YnNjcmlwdGlvblBsYW4pIHJldHVybiBbXTtcclxuXHJcbiAgICBjb25zdCB0aWVyID0gc3Vic2NyaXB0aW9uUGxhbi50aWVyIGFzIFN1YnNjcmlwdGlvblRpZXI7XHJcbiAgICBjb25zdCB0aWVyQ29uZmlnID0gVElFUl9DT05GSUdVUkFUSU9OU1t0aWVyXTtcclxuICAgIGNvbnN0IGZlYXR1cmVzSW5jbHVkZWQgPSBzdWJzY3JpcHRpb25QbGFuLmZlYXR1cmVzX2luY2x1ZGVkIHx8IHt9O1xyXG5cclxuICAgIGNvbnN0IGF2YWlsYWJsZUZlYXR1cmVzOiBTdWJzY3JpcHRpb25GZWF0dXJlW10gPSBbXTtcclxuICAgIFxyXG4gICAgZm9yIChjb25zdCBmZWF0dXJlIG9mIE9iamVjdC5rZXlzKHRpZXJDb25maWcuZmVhdHVyZXMpIGFzIFN1YnNjcmlwdGlvbkZlYXR1cmVbXSkge1xyXG4gICAgICBjb25zdCBoYXNGZWF0dXJlID0gZmVhdHVyZXNJbmNsdWRlZFtmZWF0dXJlXSA/PyB0aWVyQ29uZmlnLmZlYXR1cmVzW2ZlYXR1cmVdO1xyXG4gICAgICBpZiAoaGFzRmVhdHVyZSkge1xyXG4gICAgICAgIGF2YWlsYWJsZUZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXZhaWxhYmxlRmVhdHVyZXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdXNhZ2Ugc3VtbWFyeSBmb3IgYSBzdWJzY3JpcHRpb24gcGxhblxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRVc2FnZVN1bW1hcnkoXHJcbiAgICBzdWJzY3JpcHRpb25QbGFuOiBTdWJzY3JpcHRpb25QbGFuIHwgbnVsbCxcclxuICAgIHVzYWdlRGF0YTogVXNhZ2VEYXRhXHJcbiAgKTogUmVjb3JkPFVzYWdlTGltaXQsIEZlYXR1cmVHYXRlUmVzdWx0PiB7XHJcbiAgICBjb25zdCBzdW1tYXJ5OiBSZWNvcmQ8VXNhZ2VMaW1pdCwgRmVhdHVyZUdhdGVSZXN1bHQ+ID0ge30gYXMgUmVjb3JkPFVzYWdlTGltaXQsIEZlYXR1cmVHYXRlUmVzdWx0PjtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGxpbWl0VHlwZSBvZiBPYmplY3Qua2V5cyhUSUVSX0NPTkZJR1VSQVRJT05TLnBlcnNvbmFsLmxpbWl0cykgYXMgVXNhZ2VMaW1pdFtdKSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2FnZSA9IHRoaXMuZ2V0Q3VycmVudFVzYWdlVmFsdWUodXNhZ2VEYXRhLCBsaW1pdFR5cGUpO1xyXG4gICAgICBzdW1tYXJ5W2xpbWl0VHlwZV0gPSB0aGlzLmNoZWNrVXNhZ2VMaW1pdChzdWJzY3JpcHRpb25QbGFuLCBsaW1pdFR5cGUsIGN1cnJlbnRVc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHN1bW1hcnk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIZWxwZXI6IEdldCBtaW5pbXVtIHRpZXIgcmVxdWlyZWQgZm9yIGEgZmVhdHVyZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGdldE1pbmltdW1UaWVyRm9yRmVhdHVyZShmZWF0dXJlOiBTdWJzY3JpcHRpb25GZWF0dXJlKTogU3Vic2NyaXB0aW9uVGllciB7XHJcbiAgICBjb25zdCB0aWVyczogU3Vic2NyaXB0aW9uVGllcltdID0gWydwZXJzb25hbCcsICdwcm9mZXNzaW9uYWwnLCAnZW50ZXJwcmlzZSddO1xyXG4gICAgXHJcbiAgICBmb3IgKGNvbnN0IHRpZXIgb2YgdGllcnMpIHtcclxuICAgICAgaWYgKFRJRVJfQ09ORklHVVJBVElPTlNbdGllcl0uZmVhdHVyZXNbZmVhdHVyZV0pIHtcclxuICAgICAgICByZXR1cm4gdGllcjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gJ2VudGVycHJpc2UnOyAvLyBGYWxsYmFjayB0byBoaWdoZXN0IHRpZXJcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhlbHBlcjogR2V0IG5leHQgdGllciB3aXRoIGhpZ2hlciBsaW1pdFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc3RhdGljIGdldE5leHRUaWVyV2l0aEhpZ2hlckxpbWl0KFxyXG4gICAgY3VycmVudFRpZXI6IFN1YnNjcmlwdGlvblRpZXIsIFxyXG4gICAgbGltaXRUeXBlOiBVc2FnZUxpbWl0LCBcclxuICAgIHJlcXVpcmVkVXNhZ2U6IG51bWJlclxyXG4gICk6IFN1YnNjcmlwdGlvblRpZXIge1xyXG4gICAgY29uc3QgdGllcnM6IFN1YnNjcmlwdGlvblRpZXJbXSA9IFsncGVyc29uYWwnLCAncHJvZmVzc2lvbmFsJywgJ2VudGVycHJpc2UnXTtcclxuICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IHRpZXJzLmluZGV4T2YoY3VycmVudFRpZXIpO1xyXG4gICAgXHJcbiAgICBmb3IgKGxldCBpID0gY3VycmVudEluZGV4ICsgMTsgaSA8IHRpZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHRpZXIgPSB0aWVyc1tpXTtcclxuICAgICAgaWYgKFRJRVJfQ09ORklHVVJBVElPTlNbdGllcl0ubGltaXRzW2xpbWl0VHlwZV0gPj0gcmVxdWlyZWRVc2FnZSkge1xyXG4gICAgICAgIHJldHVybiB0aWVyO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiAnZW50ZXJwcmlzZSc7IC8vIEZhbGxiYWNrIHRvIGhpZ2hlc3QgdGllclxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGVscGVyOiBFeHRyYWN0IGN1cnJlbnQgdXNhZ2UgdmFsdWUgZnJvbSB1c2FnZSBkYXRhXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0Q3VycmVudFVzYWdlVmFsdWUodXNhZ2VEYXRhOiBVc2FnZURhdGEsIGxpbWl0VHlwZTogVXNhZ2VMaW1pdCk6IG51bWJlciB7XHJcbiAgICBzd2l0Y2ggKGxpbWl0VHlwZSkge1xyXG4gICAgICBjYXNlICdhdmF0YXJzJzpcclxuICAgICAgICByZXR1cm4gdXNhZ2VEYXRhLmF2YXRhcnNDb3VudDtcclxuICAgICAgY2FzZSAnY29sbGVjdGlvbnNfcGVyX2F2YXRhcic6XHJcbiAgICAgICAgcmV0dXJuIHVzYWdlRGF0YS5jb2xsZWN0aW9uc0NvdW50O1xyXG4gICAgICBjYXNlICdzZXNzaW9uc19wZXJfbW9udGgnOlxyXG4gICAgICAgIHJldHVybiB1c2FnZURhdGEuc2Vzc2lvbnNUaGlzTW9udGg7XHJcbiAgICAgIGNhc2UgJ2RhdGFfcmV0ZW50aW9uX21vbnRocyc6XHJcbiAgICAgICAgcmV0dXJuIHVzYWdlRGF0YS5kYXRhUmV0ZW50aW9uTW9udGhzO1xyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRm9ybWF0IGZlYXR1cmUgZ2F0ZSByZXN1bHQgZm9yIFVJIGRpc3BsYXlcclxuICAgKi9cclxuICBzdGF0aWMgZm9ybWF0RmVhdHVyZUdhdGVNZXNzYWdlKHJlc3VsdDogRmVhdHVyZUdhdGVSZXN1bHQpOiBzdHJpbmcge1xyXG4gICAgaWYgKHJlc3VsdC5hbGxvd2VkKSB7XHJcbiAgICAgIHJldHVybiAnRmVhdHVyZSBhdmFpbGFibGUnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyZXN1bHQudXBncmFkZVJlcXVpcmVkKSB7XHJcbiAgICAgIGNvbnN0IHRpZXJOYW1lID0gVElFUl9DT05GSUdVUkFUSU9OU1tyZXN1bHQudXBncmFkZVJlcXVpcmVkXS5kaXNwbGF5TmFtZTtcclxuICAgICAgcmV0dXJuIGAke3Jlc3VsdC5yZWFzb259LiBVcGdyYWRlIHRvICR7dGllck5hbWV9IHRvIHVubG9jayB0aGlzIGZlYXR1cmUuYDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0LnJlYXNvbiB8fCAnRmVhdHVyZSBub3QgYXZhaWxhYmxlJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBwbGFuIGNvbXBhcmlzb24gZGF0YSBmb3IgdXBncmFkZSBVSVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRQbGFuQ29tcGFyaXNvbigpOiBSZWNvcmQ8U3Vic2NyaXB0aW9uVGllciwge1xyXG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBmZWF0dXJlczogc3RyaW5nW107XHJcbiAgICBsaW1pdHM6IHN0cmluZ1tdO1xyXG4gICAgcHJpY2U6IG51bWJlcjtcclxuICB9PiB7XHJcbiAgICBjb25zdCBjb21wYXJpc29uOiBSZWNvcmQ8U3Vic2NyaXB0aW9uVGllciwge1xyXG4gICAgICBkaXNwbGF5TmFtZTogc3RyaW5nO1xyXG4gICAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgICBmZWF0dXJlczogc3RyaW5nW107XHJcbiAgICAgIGxpbWl0czogc3RyaW5nW107XHJcbiAgICAgIHByaWNlOiBudW1iZXI7XHJcbiAgICB9PiA9IHt9IGFzIFJlY29yZDxTdWJzY3JpcHRpb25UaWVyLCB7XHJcbiAgICAgIGRpc3BsYXlOYW1lOiBzdHJpbmc7XHJcbiAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICAgIGZlYXR1cmVzOiBzdHJpbmdbXTtcclxuICAgICAgbGltaXRzOiBzdHJpbmdbXTtcclxuICAgICAgcHJpY2U6IG51bWJlcjtcclxuICAgIH0+O1xyXG5cclxuICAgIGZvciAoY29uc3QgW3RpZXIsIGNvbmZpZ10gb2YgT2JqZWN0LmVudHJpZXMoVElFUl9DT05GSUdVUkFUSU9OUykpIHtcclxuICAgICAgY29uc3QgZW5hYmxlZEZlYXR1cmVzID0gT2JqZWN0LmVudHJpZXMoY29uZmlnLmZlYXR1cmVzKVxyXG4gICAgICAgIC5maWx0ZXIoKFssIGVuYWJsZWRdKSA9PiBlbmFibGVkKVxyXG4gICAgICAgIC5tYXAoKFtmZWF0dXJlTmFtZV0pID0+IGZlYXR1cmVOYW1lKTtcclxuXHJcbiAgICAgIGNvbnN0IGxpbWl0c0Rpc3BsYXkgPSBPYmplY3QuZW50cmllcyhjb25maWcubGltaXRzKVxyXG4gICAgICAgIC5tYXAoKFtsaW1pdCwgdmFsdWVdKSA9PiBgJHtsaW1pdH06ICR7dmFsdWUgPT09IDEwMDAwID8gJ1VubGltaXRlZCcgOiB2YWx1ZX1gKTtcclxuXHJcbiAgICAgIGNvbXBhcmlzb25bdGllciBhcyBTdWJzY3JpcHRpb25UaWVyXSA9IHtcclxuICAgICAgICBkaXNwbGF5TmFtZTogY29uZmlnLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBjb25maWcuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgcHJpY2U6IGNvbmZpZy5iYXNlUHJpY2UsXHJcbiAgICAgICAgZmVhdHVyZXM6IGVuYWJsZWRGZWF0dXJlcyxcclxuICAgICAgICBsaW1pdHM6IGxpbWl0c0Rpc3BsYXlcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY29tcGFyaXNvbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFuYWx5emUgdGllciB0cmFuc2l0aW9uIGltcGFjdFxyXG4gICAqL1xyXG4gIHN0YXRpYyBhbmFseXplVGllclRyYW5zaXRpb24oXHJcbiAgICBjdXJyZW50VGllcjogU3Vic2NyaXB0aW9uVGllcixcclxuICAgIHRhcmdldFRpZXI6IFN1YnNjcmlwdGlvblRpZXIsXHJcbiAgICBjdXJyZW50VXNhZ2U6IFVzYWdlRGF0YVxyXG4gICk6IHtcclxuICAgIGlzVXBncmFkZTogYm9vbGVhbjtcclxuICAgIGlzRG93bmdyYWRlOiBib29sZWFuO1xyXG4gICAgZmVhdHVyZUNoYW5nZXM6IHtcclxuICAgICAgZ2FpbmVkOiBTdWJzY3JpcHRpb25GZWF0dXJlW107XHJcbiAgICAgIGxvc3Q6IFN1YnNjcmlwdGlvbkZlYXR1cmVbXTtcclxuICAgIH07XHJcbiAgICB1c2FnZUltcGFjdDoge1xyXG4gICAgICBvdmVyTGltaXRJdGVtczogQXJyYXk8e1xyXG4gICAgICAgIHR5cGU6IFVzYWdlTGltaXQ7XHJcbiAgICAgICAgY3VycmVudDogbnVtYmVyO1xyXG4gICAgICAgIG5ld0xpbWl0OiBudW1iZXI7XHJcbiAgICAgICAgaW1wYWN0OiBzdHJpbmc7XHJcbiAgICAgIH0+O1xyXG4gICAgfTtcclxuICAgIGNvc3RJbXBhY3Q6IHtcclxuICAgICAgY3VycmVudENvc3Q6IG51bWJlcjtcclxuICAgICAgbmV3Q29zdDogbnVtYmVyO1xyXG4gICAgICBtb250aGx5RGlmZmVyZW5jZTogbnVtYmVyO1xyXG4gICAgICBwcm9yYXRpb25BbW91bnQ6IG51bWJlcjtcclxuICAgICAgcHJvcmF0aW9uRGVzY3JpcHRpb246IHN0cmluZztcclxuICAgIH07XHJcbiAgICB3YXJuaW5nczogc3RyaW5nW107XHJcbiAgICBjYW5UcmFuc2l0aW9uOiBib29sZWFuO1xyXG4gIH0ge1xyXG4gICAgY29uc3QgY3VycmVudENvbmZpZyA9IFRJRVJfQ09ORklHVVJBVElPTlNbY3VycmVudFRpZXJdO1xyXG4gICAgY29uc3QgdGFyZ2V0Q29uZmlnID0gVElFUl9DT05GSUdVUkFUSU9OU1t0YXJnZXRUaWVyXTtcclxuICAgIFxyXG4gICAgLy8gU2FmZXR5IGNoZWNrIGZvciBpbnZhbGlkIHRpZXJzXHJcbiAgICBpZiAoIWN1cnJlbnRDb25maWcgfHwgIXRhcmdldENvbmZpZykge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlzVXBncmFkZTogZmFsc2UsXHJcbiAgICAgICAgaXNEb3duZ3JhZGU6IGZhbHNlLFxyXG4gICAgICAgIGZlYXR1cmVDaGFuZ2VzOiB7IGdhaW5lZDogW10sIGxvc3Q6IFtdIH0sXHJcbiAgICAgICAgdXNhZ2VJbXBhY3Q6IHsgb3ZlckxpbWl0SXRlbXM6IFtdIH0sXHJcbiAgICAgICAgY29zdEltcGFjdDoge1xyXG4gICAgICAgICAgY3VycmVudENvc3Q6IDAsXHJcbiAgICAgICAgICBuZXdDb3N0OiAwLFxyXG4gICAgICAgICAgbW9udGhseURpZmZlcmVuY2U6IDAsXHJcbiAgICAgICAgICBwcm9yYXRpb25BbW91bnQ6IDAsXHJcbiAgICAgICAgICBwcm9yYXRpb25EZXNjcmlwdGlvbjogJ0ludmFsaWQgdGllciBjb25maWd1cmF0aW9uJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd2FybmluZ3M6IFsnSW52YWxpZCB0aWVyIGNvbmZpZ3VyYXRpb24nXSxcclxuICAgICAgICBjYW5UcmFuc2l0aW9uOiBmYWxzZVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCB0aWVyT3JkZXIgPSB7IHBlcnNvbmFsOiAxLCBwcm9mZXNzaW9uYWw6IDIsIGVudGVycHJpc2U6IDMgfTtcclxuICAgIFxyXG4gICAgY29uc3QgaXNVcGdyYWRlID0gdGllck9yZGVyW3RhcmdldFRpZXJdID4gdGllck9yZGVyW2N1cnJlbnRUaWVyXTtcclxuICAgIGNvbnN0IGlzRG93bmdyYWRlID0gdGllck9yZGVyW3RhcmdldFRpZXJdIDwgdGllck9yZGVyW2N1cnJlbnRUaWVyXTtcclxuXHJcbiAgICAvLyBBbmFseXplIGZlYXR1cmUgY2hhbmdlc1xyXG4gICAgY29uc3QgZ2FpbmVkRmVhdHVyZXM6IFN1YnNjcmlwdGlvbkZlYXR1cmVbXSA9IFtdO1xyXG4gICAgY29uc3QgbG9zdEZlYXR1cmVzOiBTdWJzY3JpcHRpb25GZWF0dXJlW10gPSBbXTtcclxuXHJcbiAgICBPYmplY3QuZW50cmllcyh0YXJnZXRDb25maWcuZmVhdHVyZXMpLmZvckVhY2goKFtmZWF0dXJlTmFtZSwgZW5hYmxlZF0pID0+IHtcclxuICAgICAgY29uc3QgY3VycmVudGx5RW5hYmxlZCA9IGN1cnJlbnRDb25maWcuZmVhdHVyZXNbZmVhdHVyZU5hbWUgYXMgU3Vic2NyaXB0aW9uRmVhdHVyZV07XHJcbiAgICAgIGlmIChlbmFibGVkICYmICFjdXJyZW50bHlFbmFibGVkKSB7XHJcbiAgICAgICAgZ2FpbmVkRmVhdHVyZXMucHVzaChmZWF0dXJlTmFtZSBhcyBTdWJzY3JpcHRpb25GZWF0dXJlKTtcclxuICAgICAgfSBlbHNlIGlmICghZW5hYmxlZCAmJiBjdXJyZW50bHlFbmFibGVkKSB7XHJcbiAgICAgICAgbG9zdEZlYXR1cmVzLnB1c2goZmVhdHVyZU5hbWUgYXMgU3Vic2NyaXB0aW9uRmVhdHVyZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFuYWx5emUgdXNhZ2UgaW1wYWN0XHJcbiAgICBjb25zdCBvdmVyTGltaXRJdGVtczogQXJyYXk8e1xyXG4gICAgICB0eXBlOiBVc2FnZUxpbWl0O1xyXG4gICAgICBjdXJyZW50OiBudW1iZXI7XHJcbiAgICAgIG5ld0xpbWl0OiBudW1iZXI7XHJcbiAgICAgIGltcGFjdDogc3RyaW5nO1xyXG4gICAgfT4gPSBbXTtcclxuICAgIGNvbnN0IHdhcm5pbmdzID0gW107XHJcblxyXG4gICAgT2JqZWN0LmVudHJpZXModGFyZ2V0Q29uZmlnLmxpbWl0cykuZm9yRWFjaCgoW2xpbWl0VHlwZSwgbmV3TGltaXRdKSA9PiB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2FnZVZhbHVlID0gdGhpcy5nZXRDdXJyZW50VXNhZ2VWYWx1ZShjdXJyZW50VXNhZ2UsIGxpbWl0VHlwZSBhcyBVc2FnZUxpbWl0KTtcclxuICAgICAgXHJcbiAgICAgIGlmIChjdXJyZW50VXNhZ2VWYWx1ZSA+IG5ld0xpbWl0KSB7XHJcbiAgICAgICAgY29uc3QgaW1wYWN0ID0gdGhpcy5nZXRVc2FnZUxpbWl0SW1wYWN0TWVzc2FnZShsaW1pdFR5cGUgYXMgVXNhZ2VMaW1pdCwgY3VycmVudFVzYWdlVmFsdWUsIG5ld0xpbWl0KTtcclxuICAgICAgICBvdmVyTGltaXRJdGVtcy5wdXNoKHtcclxuICAgICAgICAgIHR5cGU6IGxpbWl0VHlwZSBhcyBVc2FnZUxpbWl0LFxyXG4gICAgICAgICAgY3VycmVudDogY3VycmVudFVzYWdlVmFsdWUsXHJcbiAgICAgICAgICBuZXdMaW1pdCxcclxuICAgICAgICAgIGltcGFjdFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHdhcm5pbmdzLnB1c2goYCR7bGltaXRUeXBlfTogJHtpbXBhY3R9YCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFkZCBmZWF0dXJlLXNwZWNpZmljIHdhcm5pbmdzXHJcbiAgICBpZiAobG9zdEZlYXR1cmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgd2FybmluZ3MucHVzaChgWW91IHdpbGwgbG9zZSBhY2Nlc3MgdG86ICR7bG9zdEZlYXR1cmVzLmpvaW4oJywgJyl9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGN1cnJlbnRUaWVyID09PSAnZW50ZXJwcmlzZScgJiYgdGFyZ2V0VGllciAhPT0gJ2VudGVycHJpc2UnKSB7XHJcbiAgICAgIHdhcm5pbmdzLnB1c2goJ1lvdSB3aWxsIGxvc2UgY3VzdG9tIGJyYW5kaW5nIGFuZCBhZHZhbmNlZCBlbnRlcnByaXNlIGZlYXR1cmVzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIGNvc3QgaW1wYWN0XHJcbiAgICBjb25zdCBjdXJyZW50Q29zdCA9IGN1cnJlbnRDb25maWcuYmFzZVByaWNlIHx8IDA7XHJcbiAgICBjb25zdCBuZXdDb3N0ID0gdGFyZ2V0Q29uZmlnLmJhc2VQcmljZSB8fCAwO1xyXG4gICAgY29uc3QgbW9udGhseURpZmZlcmVuY2UgPSBuZXdDb3N0IC0gY3VycmVudENvc3Q7XHJcbiAgICBjb25zdCBwcm9yYXRpb24gPSB0aGlzLmNhbGN1bGF0ZVByb3JhdGlvbihjdXJyZW50Q29zdCwgbmV3Q29zdCk7XHJcblxyXG4gICAgY29uc3QgY2FuVHJhbnNpdGlvbiA9IG92ZXJMaW1pdEl0ZW1zLmxlbmd0aCA9PT0gMCB8fCBpc1VwZ3JhZGU7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNVcGdyYWRlLFxyXG4gICAgICBpc0Rvd25ncmFkZSxcclxuICAgICAgZmVhdHVyZUNoYW5nZXM6IHtcclxuICAgICAgICBnYWluZWQ6IGdhaW5lZEZlYXR1cmVzLFxyXG4gICAgICAgIGxvc3Q6IGxvc3RGZWF0dXJlc1xyXG4gICAgICB9LFxyXG4gICAgICB1c2FnZUltcGFjdDoge1xyXG4gICAgICAgIG92ZXJMaW1pdEl0ZW1zXHJcbiAgICAgIH0sXHJcbiAgICAgIGNvc3RJbXBhY3Q6IHtcclxuICAgICAgICBjdXJyZW50Q29zdCxcclxuICAgICAgICBuZXdDb3N0LFxyXG4gICAgICAgIG1vbnRobHlEaWZmZXJlbmNlLFxyXG4gICAgICAgIHByb3JhdGlvbkFtb3VudDogcHJvcmF0aW9uLnByb3JhdGlvbkFtb3VudCxcclxuICAgICAgICBwcm9yYXRpb25EZXNjcmlwdGlvbjogcHJvcmF0aW9uLmRlc2NyaXB0aW9uXHJcbiAgICAgIH0sXHJcbiAgICAgIHdhcm5pbmdzLFxyXG4gICAgICBjYW5UcmFuc2l0aW9uXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGF2YWlsYWJsZSB0aWVyIHRyYW5zaXRpb25zXHJcbiAgICovXHJcbiAgc3RhdGljIGdldEF2YWlsYWJsZVRyYW5zaXRpb25zKGN1cnJlbnRUaWVyOiBTdWJzY3JpcHRpb25UaWVyKToge1xyXG4gICAgdXBncmFkZXM6IFN1YnNjcmlwdGlvblRpZXJbXTtcclxuICAgIGRvd25ncmFkZXM6IFN1YnNjcmlwdGlvblRpZXJbXTtcclxuICB9IHtcclxuICAgIGNvbnN0IGFsbFRpZXJzOiBTdWJzY3JpcHRpb25UaWVyW10gPSBbJ3BlcnNvbmFsJywgJ3Byb2Zlc3Npb25hbCcsICdlbnRlcnByaXNlJ107XHJcbiAgICBjb25zdCB0aWVyT3JkZXIgPSB7IHBlcnNvbmFsOiAxLCBwcm9mZXNzaW9uYWw6IDIsIGVudGVycHJpc2U6IDMgfTtcclxuICAgIGNvbnN0IGN1cnJlbnRPcmRlciA9IHRpZXJPcmRlcltjdXJyZW50VGllcl07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXBncmFkZXM6IGFsbFRpZXJzLmZpbHRlcih0aWVyID0+IHRpZXJPcmRlclt0aWVyXSA+IGN1cnJlbnRPcmRlciksXHJcbiAgICAgIGRvd25ncmFkZXM6IGFsbFRpZXJzLmZpbHRlcih0aWVyID0+IHRpZXJPcmRlclt0aWVyXSA8IGN1cnJlbnRPcmRlcilcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWxjdWxhdGUgcHJvcmF0aW9uIGFtb3VudCBmb3IgdGllciBjaGFuZ2VcclxuICAgKi9cclxuICBzdGF0aWMgY2FsY3VsYXRlUHJvcmF0aW9uKFxyXG4gICAgY3VycmVudE1vbnRobHlQcmljZTogbnVtYmVyLFxyXG4gICAgbmV3TW9udGhseVByaWNlOiBudW1iZXIsXHJcbiAgICBkYXlzUGFzc2VkOiBudW1iZXIgPSBuZXcgRGF0ZSgpLmdldERhdGUoKSxcclxuICAgIGRheXNJbk1vbnRoOiBudW1iZXIgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksIG5ldyBEYXRlKCkuZ2V0TW9udGgoKSArIDEsIDApLmdldERhdGUoKVxyXG4gICk6IHtcclxuICAgIHByb3JhdGlvbkFtb3VudDogbnVtYmVyO1xyXG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcclxuICB9IHtcclxuICAgIGNvbnN0IHJlbWFpbmluZ0RheXMgPSBkYXlzSW5Nb250aCAtIGRheXNQYXNzZWQ7XHJcbiAgICBjb25zdCBkYWlseURpZmZlcmVuY2UgPSAobmV3TW9udGhseVByaWNlIC0gY3VycmVudE1vbnRobHlQcmljZSkgLyBkYXlzSW5Nb250aDtcclxuICAgIGNvbnN0IHByb3JhdGlvbkFtb3VudCA9IE1hdGgucm91bmQoZGFpbHlEaWZmZXJlbmNlICogcmVtYWluaW5nRGF5cyAqIDEwMCkgLyAxMDA7XHJcblxyXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBwcm9yYXRpb25BbW91bnQgPiAwIFxyXG4gICAgICA/IGBZb3UnbGwgYmUgY2hhcmdlZCAkJHtNYXRoLmFicyhwcm9yYXRpb25BbW91bnQpLnRvRml4ZWQoMil9IGZvciB0aGUgcmVtYWluaW5nICR7cmVtYWluaW5nRGF5c30gZGF5cyBvZiB0aGlzIGJpbGxpbmcgY3ljbGUuYFxyXG4gICAgICA6IHByb3JhdGlvbkFtb3VudCA8IDBcclxuICAgICAgPyBgWW91J2xsIHJlY2VpdmUgYSBjcmVkaXQgb2YgJCR7TWF0aC5hYnMocHJvcmF0aW9uQW1vdW50KS50b0ZpeGVkKDIpfSBmb3IgdGhlIHJlbWFpbmluZyAke3JlbWFpbmluZ0RheXN9IGRheXMuYFxyXG4gICAgICA6ICdObyBwcm9yYXRpb24gcmVxdWlyZWQuJztcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwcm9yYXRpb25BbW91bnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGVscGVyOiBHZXQgdXNhZ2UgbGltaXQgaW1wYWN0IG1lc3NhZ2VcclxuICAgKi9cclxuICBwcml2YXRlIHN0YXRpYyBnZXRVc2FnZUxpbWl0SW1wYWN0TWVzc2FnZShcclxuICAgIGxpbWl0VHlwZTogVXNhZ2VMaW1pdCxcclxuICAgIGN1cnJlbnRVc2FnZTogbnVtYmVyLFxyXG4gICAgbmV3TGltaXQ6IG51bWJlclxyXG4gICk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBleGNlc3MgPSBjdXJyZW50VXNhZ2UgLSBuZXdMaW1pdDtcclxuICAgIFxyXG4gICAgc3dpdGNoIChsaW1pdFR5cGUpIHtcclxuICAgICAgY2FzZSAnYXZhdGFycyc6XHJcbiAgICAgICAgcmV0dXJuIGAke2V4Y2Vzc30gYXZhdGFyKHMpIHdpbGwgbmVlZCB0byBiZSByZW1vdmVkIG9yIGFyY2hpdmVkYDtcclxuICAgICAgY2FzZSAnY29sbGVjdGlvbnNfcGVyX2F2YXRhcic6XHJcbiAgICAgICAgcmV0dXJuIGBTb21lIGNvbGxlY3Rpb25zIG1heSBuZWVkIHRvIGJlIHJlbW92ZWQgb3IgY29uc29saWRhdGVkYDtcclxuICAgICAgY2FzZSAnc2Vzc2lvbnNfcGVyX21vbnRoJzpcclxuICAgICAgICByZXR1cm4gYE1vbnRobHkgc2Vzc2lvbiBsaW1pdCB3aWxsIGJlIHJlZHVjZWQgZnJvbSAke2N1cnJlbnRVc2FnZX0gdG8gJHtuZXdMaW1pdH1gO1xyXG4gICAgICBjYXNlICdkYXRhX3JldGVudGlvbl9tb250aHMnOlxyXG4gICAgICAgIHJldHVybiBgRGF0YSByZXRlbnRpb24gd2lsbCBiZSByZWR1Y2VkIGZyb20gJHtjdXJyZW50VXNhZ2V9IHRvICR7bmV3TGltaXR9IG1vbnRoc2A7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIGBVc2FnZSB3aWxsIGJlIGxpbWl0ZWQgdG8gJHtuZXdMaW1pdH0gKGN1cnJlbnRseSAke2N1cnJlbnRVc2FnZX0pYDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFZhbGlkYXRlIGlmIGEgdGllciB0cmFuc2l0aW9uIGlzIHNhZmVcclxuICAgKi9cclxuICBzdGF0aWMgdmFsaWRhdGVUaWVyVHJhbnNpdGlvbihcclxuICAgIGN1cnJlbnRUaWVyOiBTdWJzY3JpcHRpb25UaWVyLFxyXG4gICAgdGFyZ2V0VGllcjogU3Vic2NyaXB0aW9uVGllcixcclxuICAgIGN1cnJlbnRVc2FnZTogVXNhZ2VEYXRhXHJcbiAgKToge1xyXG4gICAgdmFsaWQ6IGJvb2xlYW47XHJcbiAgICByZWFzb25zOiBzdHJpbmdbXTtcclxuICB9IHtcclxuICAgIGlmIChjdXJyZW50VGllciA9PT0gdGFyZ2V0VGllcikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgICByZWFzb25zOiBbJ0Nhbm5vdCB0cmFuc2l0aW9uIHRvIHRoZSBzYW1lIHRpZXInXVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGFuYWx5c2lzID0gdGhpcy5hbmFseXplVGllclRyYW5zaXRpb24oY3VycmVudFRpZXIsIHRhcmdldFRpZXIsIGN1cnJlbnRVc2FnZSk7XHJcbiAgICBcclxuICAgIGlmICghYW5hbHlzaXMuY2FuVHJhbnNpdGlvbikge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHZhbGlkOiBmYWxzZSxcclxuICAgICAgICByZWFzb25zOiBhbmFseXNpcy53YXJuaW5nc1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkOiB0cnVlLFxyXG4gICAgICByZWFzb25zOiBbXVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVuaGFuY2VkIGZlYXR1cmUgZW5mb3JjZW1lbnQgZm9yIHNwZWNpZmljIGFwcCBmZWF0dXJlc1xyXG4gICAqL1xyXG4gIHN0YXRpYyBjYW5BY2Nlc3NEYXNoYm9hcmQoc3Vic2NyaXB0aW9uUGxhbjogU3Vic2NyaXB0aW9uUGxhbiB8IG51bGwpOiBGZWF0dXJlR2F0ZVJlc3VsdCB7XHJcbiAgICByZXR1cm4gdGhpcy5jYW5BY2Nlc3NGZWF0dXJlKHN1YnNjcmlwdGlvblBsYW4sICdhbmFseXRpY3MnKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjYW5BY2Nlc3NVc2VyTWFuYWdlbWVudChzdWJzY3JpcHRpb25QbGFuOiBTdWJzY3JpcHRpb25QbGFuIHwgbnVsbCk6IEZlYXR1cmVHYXRlUmVzdWx0IHtcclxuICAgIHJldHVybiB0aGlzLmNhbkFjY2Vzc0ZlYXR1cmUoc3Vic2NyaXB0aW9uUGxhbiwgJ3VzZXJfbWFuYWdlbWVudCcpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNhbkFjY2Vzc1ByZW1pdW1UaGVtZXMoc3Vic2NyaXB0aW9uUGxhbjogU3Vic2NyaXB0aW9uUGxhbiB8IG51bGwpOiBGZWF0dXJlR2F0ZVJlc3VsdCB7XHJcbiAgICByZXR1cm4gdGhpcy5jYW5BY2Nlc3NGZWF0dXJlKHN1YnNjcmlwdGlvblBsYW4sICdwcmVtaXVtX3RoZW1lcycpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNhbkFjY2Vzc0FkdmFuY2VkUmVwb3J0aW5nKHN1YnNjcmlwdGlvblBsYW46IFN1YnNjcmlwdGlvblBsYW4gfCBudWxsKTogRmVhdHVyZUdhdGVSZXN1bHQge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FuQWNjZXNzRmVhdHVyZShzdWJzY3JpcHRpb25QbGFuLCAnYWR2YW5jZWRfcmVwb3J0aW5nJyk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY2FuRXhwb3J0RGF0YShzdWJzY3JpcHRpb25QbGFuOiBTdWJzY3JpcHRpb25QbGFuIHwgbnVsbCk6IEZlYXR1cmVHYXRlUmVzdWx0IHtcclxuICAgIHJldHVybiB0aGlzLmNhbkFjY2Vzc0ZlYXR1cmUoc3Vic2NyaXB0aW9uUGxhbiwgJ2V4cG9ydF9kYXRhJyk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCdWxrIG9wZXJhdGlvbnMgZm9yIGZlYXR1cmUgY2hlY2tpbmcgKGZvciBVSSBjb21wb25lbnRzKVxyXG4gICAqL1xyXG4gIHN0YXRpYyBjaGVja011bHRpcGxlRmVhdHVyZXMoXHJcbiAgICBzdWJzY3JpcHRpb25QbGFuOiBTdWJzY3JpcHRpb25QbGFuIHwgbnVsbCxcclxuICAgIGZlYXR1cmVzOiBTdWJzY3JpcHRpb25GZWF0dXJlW11cclxuICApOiBSZWNvcmQ8U3Vic2NyaXB0aW9uRmVhdHVyZSwgRmVhdHVyZUdhdGVSZXN1bHQ+IHtcclxuICAgIGNvbnN0IHJlc3VsdHM6IFJlY29yZDxzdHJpbmcsIEZlYXR1cmVHYXRlUmVzdWx0PiA9IHt9O1xyXG4gICAgXHJcbiAgICBmZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xyXG4gICAgICByZXN1bHRzW2ZlYXR1cmVdID0gdGhpcy5jYW5BY2Nlc3NGZWF0dXJlKHN1YnNjcmlwdGlvblBsYW4sIGZlYXR1cmUpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJldHVybiByZXN1bHRzIGFzIFJlY29yZDxTdWJzY3JpcHRpb25GZWF0dXJlLCBGZWF0dXJlR2F0ZVJlc3VsdD47XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgZmVhdHVyZXMgdGhhdCBhcmUgbG9ja2VkIGZvciB0aGUgY3VycmVudCB0aWVyIChmb3IgdXBncmFkZSBwcm9tcHRzKVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRMb2NrZWRGZWF0dXJlcyhzdWJzY3JpcHRpb25QbGFuOiBTdWJzY3JpcHRpb25QbGFuIHwgbnVsbCk6IFN1YnNjcmlwdGlvbkZlYXR1cmVbXSB7XHJcbiAgICBpZiAoIXN1YnNjcmlwdGlvblBsYW4pIHtcclxuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKFRJRVJfQ09ORklHVVJBVElPTlMucGVyc29uYWwuZmVhdHVyZXMpIGFzIFN1YnNjcmlwdGlvbkZlYXR1cmVbXTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0aWVyID0gc3Vic2NyaXB0aW9uUGxhbi50aWVyIGFzIFN1YnNjcmlwdGlvblRpZXI7XHJcbiAgICBjb25zdCB0aWVyQ29uZmlnID0gVElFUl9DT05GSUdVUkFUSU9OU1t0aWVyXTtcclxuICAgIGNvbnN0IGZlYXR1cmVzSW5jbHVkZWQgPSBzdWJzY3JpcHRpb25QbGFuLmZlYXR1cmVzX2luY2x1ZGVkIHx8IHt9O1xyXG4gICAgXHJcbiAgICBjb25zdCBsb2NrZWRGZWF0dXJlczogU3Vic2NyaXB0aW9uRmVhdHVyZVtdID0gW107XHJcbiAgICBcclxuICAgIC8vIENoZWNrIGFsbCBwb3NzaWJsZSBmZWF0dXJlc1xyXG4gICAgY29uc3QgYWxsRmVhdHVyZXMgPSBuZXcgU2V0PFN1YnNjcmlwdGlvbkZlYXR1cmU+KCk7XHJcbiAgICBPYmplY3QudmFsdWVzKFRJRVJfQ09ORklHVVJBVElPTlMpLmZvckVhY2goY29uZmlnID0+IHtcclxuICAgICAgT2JqZWN0LmtleXMoY29uZmlnLmZlYXR1cmVzKS5mb3JFYWNoKGZlYXR1cmUgPT4ge1xyXG4gICAgICAgIGFsbEZlYXR1cmVzLmFkZChmZWF0dXJlIGFzIFN1YnNjcmlwdGlvbkZlYXR1cmUpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBhbGxGZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xyXG4gICAgICBjb25zdCBoYXNGZWF0dXJlID0gZmVhdHVyZXNJbmNsdWRlZFtmZWF0dXJlXSA/PyB0aWVyQ29uZmlnPy5mZWF0dXJlc1tmZWF0dXJlXSA/PyBmYWxzZTtcclxuICAgICAgaWYgKCFoYXNGZWF0dXJlKSB7XHJcbiAgICAgICAgbG9ja2VkRmVhdHVyZXMucHVzaChmZWF0dXJlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJldHVybiBsb2NrZWRGZWF0dXJlcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNtYXJ0IHVwZ3JhZGUgcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIHVzYWdlIHBhdHRlcm5zXHJcbiAgICovXHJcbiAgc3RhdGljIGdldFNtYXJ0VXBncmFkZVJlY29tbWVuZGF0aW9uKFxyXG4gICAgc3Vic2NyaXB0aW9uUGxhbjogU3Vic2NyaXB0aW9uUGxhbiB8IG51bGwsXHJcbiAgICB1c2FnZURhdGE6IFVzYWdlRGF0YSxcclxuICAgIGxvY2tlZEZlYXR1cmVzQWNjZXNzZWQ6IFN1YnNjcmlwdGlvbkZlYXR1cmVbXSA9IFtdXHJcbiAgKToge1xyXG4gICAgcmVjb21tZW5kZWQ6IGJvb2xlYW47XHJcbiAgICB0YXJnZXRUaWVyOiBTdWJzY3JpcHRpb25UaWVyO1xyXG4gICAgcmVhc29uczogc3RyaW5nW107XHJcbiAgICBiZW5lZml0czogc3RyaW5nW107XHJcbiAgICB1cmdlbmN5OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xyXG4gIH0ge1xyXG4gICAgaWYgKCFzdWJzY3JpcHRpb25QbGFuKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVjb21tZW5kZWQ6IHRydWUsXHJcbiAgICAgICAgdGFyZ2V0VGllcjogJ3BlcnNvbmFsJyxcclxuICAgICAgICByZWFzb25zOiBbJ05vIGFjdGl2ZSBzdWJzY3JpcHRpb24nXSxcclxuICAgICAgICBiZW5lZml0czogWydBY2Nlc3MgdG8gYW5hbHl0aWNzJywgJ0NyZWF0ZSB1cCB0byA1IGNoaWxkcmVuJywgJ1NhdmUgY29sbGVjdGlvbnMnXSxcclxuICAgICAgICB1cmdlbmN5OiAnaGlnaCdcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0aWVyID0gc3Vic2NyaXB0aW9uUGxhbi50aWVyIGFzIFN1YnNjcmlwdGlvblRpZXI7XHJcbiAgICBjb25zdCByZWFzb25zOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgY29uc3QgYmVuZWZpdHM6IHN0cmluZ1tdID0gW107XHJcbiAgICBsZXQgdXJnZW5jeTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyA9ICdsb3cnO1xyXG4gICAgbGV0IHRhcmdldFRpZXI6IFN1YnNjcmlwdGlvblRpZXIgPSB0aWVyO1xyXG5cclxuICAgIC8vIENoZWNrIHVzYWdlIGFnYWluc3QgbGltaXRzXHJcbiAgICBjb25zdCB1c2FnZVN1bW1hcnkgPSB0aGlzLmdldFVzYWdlU3VtbWFyeShzdWJzY3JpcHRpb25QbGFuLCB1c2FnZURhdGEpO1xyXG4gICAgXHJcbiAgICBPYmplY3QuZW50cmllcyh1c2FnZVN1bW1hcnkpLmZvckVhY2goKFtsaW1pdFR5cGUsIHJlc3VsdF0pID0+IHtcclxuICAgICAgaWYgKCFyZXN1bHQuYWxsb3dlZCkge1xyXG4gICAgICAgIHJlYXNvbnMucHVzaChgJHtsaW1pdFR5cGV9IGxpbWl0IGV4Y2VlZGVkYCk7XHJcbiAgICAgICAgdXJnZW5jeSA9ICdoaWdoJztcclxuICAgICAgICB0YXJnZXRUaWVyID0gcmVzdWx0LnVwZ3JhZGVSZXF1aXJlZCB8fCAncHJvZmVzc2lvbmFsJztcclxuICAgICAgfSBlbHNlIGlmIChyZXN1bHQuY3VycmVudFVzYWdlICYmIHJlc3VsdC5saW1pdCAmJiAocmVzdWx0LmN1cnJlbnRVc2FnZSAvIHJlc3VsdC5saW1pdCkgPiAwLjgpIHtcclxuICAgICAgICByZWFzb25zLnB1c2goYEFwcHJvYWNoaW5nICR7bGltaXRUeXBlfSBsaW1pdGApO1xyXG4gICAgICAgIHVyZ2VuY3kgPSB1cmdlbmN5ID09PSAnbG93JyA/ICdtZWRpdW0nIDogdXJnZW5jeTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2hlY2sgZmVhdHVyZSBhY2Nlc3MgcGF0dGVybnNcclxuICAgIGlmIChsb2NrZWRGZWF0dXJlc0FjY2Vzc2VkLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmVhc29ucy5wdXNoKGBBdHRlbXB0ZWQgdG8gYWNjZXNzICR7bG9ja2VkRmVhdHVyZXNBY2Nlc3NlZC5sZW5ndGh9IHByZW1pdW0gZmVhdHVyZShzKWApO1xyXG4gICAgICB1cmdlbmN5ID0gdXJnZW5jeSA9PT0gJ2xvdycgPyAnbWVkaXVtJyA6IHVyZ2VuY3k7XHJcbiAgICAgIFxyXG4gICAgICAvLyBGaW5kIG1pbmltdW0gdGllciBuZWVkZWQgZm9yIHRoZXNlIGZlYXR1cmVzXHJcbiAgICAgIGxvY2tlZEZlYXR1cmVzQWNjZXNzZWQuZm9yRWFjaChmZWF0dXJlID0+IHtcclxuICAgICAgICBjb25zdCByZXF1aXJlZFRpZXIgPSB0aGlzLmdldE1pbmltdW1UaWVyRm9yRmVhdHVyZShmZWF0dXJlKTtcclxuICAgICAgICBpZiAodGhpcy5nZXRUaWVyUHJpb3JpdHkocmVxdWlyZWRUaWVyKSA+IHRoaXMuZ2V0VGllclByaW9yaXR5KHRhcmdldFRpZXIpKSB7XHJcbiAgICAgICAgICB0YXJnZXRUaWVyID0gcmVxdWlyZWRUaWVyO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgYmVuZWZpdHMgbGlzdFxyXG4gICAgaWYgKHRhcmdldFRpZXIgIT09IHRpZXIpIHtcclxuICAgICAgY29uc3QgdGFyZ2V0Q29uZmlnID0gVElFUl9DT05GSUdVUkFUSU9OU1t0YXJnZXRUaWVyXTtcclxuICAgICAgY29uc3QgY3VycmVudENvbmZpZyA9IFRJRVJfQ09ORklHVVJBVElPTlNbdGllcl07XHJcbiAgICAgIFxyXG4gICAgICAvLyBIaWdobGlnaHQgbmV3IGZlYXR1cmVzXHJcbiAgICAgIE9iamVjdC5lbnRyaWVzKHRhcmdldENvbmZpZy5mZWF0dXJlcykuZm9yRWFjaCgoW2ZlYXR1cmUsIGVuYWJsZWRdKSA9PiB7XHJcbiAgICAgICAgaWYgKGVuYWJsZWQgJiYgIWN1cnJlbnRDb25maWcuZmVhdHVyZXNbZmVhdHVyZSBhcyBTdWJzY3JpcHRpb25GZWF0dXJlXSkge1xyXG4gICAgICAgICAgYmVuZWZpdHMucHVzaChmZWF0dXJlLnJlcGxhY2UoL18vZywgJyAnKS5yZXBsYWNlKC9cXGJcXHcvZywgbCA9PiBsLnRvVXBwZXJDYXNlKCkpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgLy8gSGlnaGxpZ2h0IGxpbWl0IGluY3JlYXNlc1xyXG4gICAgICBPYmplY3QuZW50cmllcyh0YXJnZXRDb25maWcubGltaXRzKS5mb3JFYWNoKChbbGltaXRUeXBlLCBuZXdMaW1pdF0pID0+IHtcclxuICAgICAgICBjb25zdCBjdXJyZW50TGltaXQgPSBjdXJyZW50Q29uZmlnLmxpbWl0c1tsaW1pdFR5cGUgYXMgVXNhZ2VMaW1pdF07XHJcbiAgICAgICAgaWYgKG5ld0xpbWl0ID4gY3VycmVudExpbWl0KSB7XHJcbiAgICAgICAgICBpZiAobmV3TGltaXQgPj0gMTAwMDApIHtcclxuICAgICAgICAgICAgYmVuZWZpdHMucHVzaChgVW5saW1pdGVkICR7bGltaXRUeXBlLnJlcGxhY2UoL18vZywgJyAnKX1gKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJlbmVmaXRzLnB1c2goYCR7bmV3TGltaXR9ICR7bGltaXRUeXBlLnJlcGxhY2UoL18vZywgJyAnKX0gKHdhcyAke2N1cnJlbnRMaW1pdH0pYCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZWNvbW1lbmRlZDogdGFyZ2V0VGllciAhPT0gdGllcixcclxuICAgICAgdGFyZ2V0VGllcixcclxuICAgICAgcmVhc29ucyxcclxuICAgICAgYmVuZWZpdHMsXHJcbiAgICAgIHVyZ2VuY3lcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIZWxwZXI6IEdldCB0aWVyIHByaW9yaXR5IGZvciBjb21wYXJpc29uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0VGllclByaW9yaXR5KHRpZXI6IFN1YnNjcmlwdGlvblRpZXIpOiBudW1iZXIge1xyXG4gICAgY29uc3QgcHJpb3JpdGllcyA9IHsgcGVyc29uYWw6IDEsIHByb2Zlc3Npb25hbDogMiwgZW50ZXJwcmlzZTogMyB9O1xyXG4gICAgcmV0dXJuIHByaW9yaXRpZXNbdGllcl07XHJcbiAgfVxyXG59XHJcblxyXG4vLyBFeHBvcnQgZm9yIGNvbnZlbmllbmNlXHJcbmV4cG9ydCBjb25zdCBzdWJzY3JpcHRpb25TZXJ2aWNlID0gU3Vic2NyaXB0aW9uU2VydmljZTsgIl0sIm5hbWVzIjpbIlN1YnNjcmlwdGlvblNlcnZpY2UiLCJUSUVSX0NPTkZJR1VSQVRJT05TIiwic3Vic2NyaXB0aW9uU2VydmljZSIsInBlcnNvbmFsIiwiZGlzcGxheU5hbWUiLCJkZXNjcmlwdGlvbiIsImJhc2VQcmljZSIsImZlYXR1cmVzIiwiYW5hbHl0aWNzIiwidXNlcl9tYW5hZ2VtZW50IiwicHJlbWl1bV90aGVtZXMiLCJjdXN0b21fYnJhbmRpbmciLCJjb2xsZWN0aW9ucyIsInNjaGVkdWxpbmciLCJidWxrX29wZXJhdGlvbnMiLCJhcGlfYWNjZXNzIiwiZXhwb3J0X2RhdGEiLCJhZHZhbmNlZF9yZXBvcnRpbmciLCJsaW1pdHMiLCJhdmF0YXJzIiwiY29sbGVjdGlvbnNfcGVyX2F2YXRhciIsInNlc3Npb25zX3Blcl9tb250aCIsImRhdGFfcmV0ZW50aW9uX21vbnRocyIsInByb2Zlc3Npb25hbCIsImVudGVycHJpc2UiLCJjYW5BY2Nlc3NGZWF0dXJlIiwic3Vic2NyaXB0aW9uUGxhbiIsImZlYXR1cmUiLCJsb2dnZXIiLCJ3YXJuIiwiYWxsb3dlZCIsInJlYXNvbiIsInVwZ3JhZGVSZXF1aXJlZCIsInRpZXIiLCJ0aWVyQ29uZmlnIiwiZXJyb3IiLCJmZWF0dXJlc0luY2x1ZGVkIiwiZmVhdHVyZXNfaW5jbHVkZWQiLCJoYXNGZWF0dXJlIiwiZGVidWciLCJnZXRNaW5pbXVtVGllckZvckZlYXR1cmUiLCJpbmZvIiwiY3VycmVudFRpZXIiLCJyZXBsYWNlIiwibCIsInRvVXBwZXJDYXNlIiwiY2hlY2tVc2FnZUxpbWl0IiwibGltaXRUeXBlIiwiY3VycmVudFVzYWdlIiwibGltaXRLZXkiLCJsaW1pdCIsImdldE5leHRUaWVyV2l0aEhpZ2hlckxpbWl0IiwiY2FuQ3JlYXRlQXZhdGFyIiwiY3VycmVudEF2YXRhcnNDb3VudCIsImNhbkNyZWF0ZUNvbGxlY3Rpb24iLCJjdXJyZW50Q29sbGVjdGlvbnNDb3VudCIsImdldEF2YWlsYWJsZUZlYXR1cmVzIiwiYXZhaWxhYmxlRmVhdHVyZXMiLCJPYmplY3QiLCJrZXlzIiwicHVzaCIsImdldFVzYWdlU3VtbWFyeSIsInVzYWdlRGF0YSIsInN1bW1hcnkiLCJnZXRDdXJyZW50VXNhZ2VWYWx1ZSIsInRpZXJzIiwicmVxdWlyZWRVc2FnZSIsImN1cnJlbnRJbmRleCIsImluZGV4T2YiLCJpIiwibGVuZ3RoIiwiYXZhdGFyc0NvdW50IiwiY29sbGVjdGlvbnNDb3VudCIsInNlc3Npb25zVGhpc01vbnRoIiwiZGF0YVJldGVudGlvbk1vbnRocyIsImZvcm1hdEZlYXR1cmVHYXRlTWVzc2FnZSIsInJlc3VsdCIsInRpZXJOYW1lIiwiZ2V0UGxhbkNvbXBhcmlzb24iLCJjb21wYXJpc29uIiwiY29uZmlnIiwiZW50cmllcyIsImVuYWJsZWRGZWF0dXJlcyIsImZpbHRlciIsImVuYWJsZWQiLCJtYXAiLCJmZWF0dXJlTmFtZSIsImxpbWl0c0Rpc3BsYXkiLCJ2YWx1ZSIsInByaWNlIiwiYW5hbHl6ZVRpZXJUcmFuc2l0aW9uIiwidGFyZ2V0VGllciIsImN1cnJlbnRDb25maWciLCJ0YXJnZXRDb25maWciLCJpc1VwZ3JhZGUiLCJpc0Rvd25ncmFkZSIsImZlYXR1cmVDaGFuZ2VzIiwiZ2FpbmVkIiwibG9zdCIsInVzYWdlSW1wYWN0Iiwib3ZlckxpbWl0SXRlbXMiLCJjb3N0SW1wYWN0IiwiY3VycmVudENvc3QiLCJuZXdDb3N0IiwibW9udGhseURpZmZlcmVuY2UiLCJwcm9yYXRpb25BbW91bnQiLCJwcm9yYXRpb25EZXNjcmlwdGlvbiIsIndhcm5pbmdzIiwiY2FuVHJhbnNpdGlvbiIsInRpZXJPcmRlciIsImdhaW5lZEZlYXR1cmVzIiwibG9zdEZlYXR1cmVzIiwiZm9yRWFjaCIsImN1cnJlbnRseUVuYWJsZWQiLCJuZXdMaW1pdCIsImN1cnJlbnRVc2FnZVZhbHVlIiwiaW1wYWN0IiwiZ2V0VXNhZ2VMaW1pdEltcGFjdE1lc3NhZ2UiLCJ0eXBlIiwiY3VycmVudCIsImpvaW4iLCJwcm9yYXRpb24iLCJjYWxjdWxhdGVQcm9yYXRpb24iLCJnZXRBdmFpbGFibGVUcmFuc2l0aW9ucyIsImFsbFRpZXJzIiwiY3VycmVudE9yZGVyIiwidXBncmFkZXMiLCJkb3duZ3JhZGVzIiwiY3VycmVudE1vbnRobHlQcmljZSIsIm5ld01vbnRobHlQcmljZSIsImRheXNQYXNzZWQiLCJEYXRlIiwiZ2V0RGF0ZSIsImRheXNJbk1vbnRoIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsInJlbWFpbmluZ0RheXMiLCJkYWlseURpZmZlcmVuY2UiLCJNYXRoIiwicm91bmQiLCJhYnMiLCJ0b0ZpeGVkIiwiZXhjZXNzIiwidmFsaWRhdGVUaWVyVHJhbnNpdGlvbiIsInZhbGlkIiwicmVhc29ucyIsImFuYWx5c2lzIiwiY2FuQWNjZXNzRGFzaGJvYXJkIiwiY2FuQWNjZXNzVXNlck1hbmFnZW1lbnQiLCJjYW5BY2Nlc3NQcmVtaXVtVGhlbWVzIiwiY2FuQWNjZXNzQWR2YW5jZWRSZXBvcnRpbmciLCJjYW5FeHBvcnREYXRhIiwiY2hlY2tNdWx0aXBsZUZlYXR1cmVzIiwicmVzdWx0cyIsImdldExvY2tlZEZlYXR1cmVzIiwibG9ja2VkRmVhdHVyZXMiLCJhbGxGZWF0dXJlcyIsIlNldCIsInZhbHVlcyIsImFkZCIsImdldFNtYXJ0VXBncmFkZVJlY29tbWVuZGF0aW9uIiwibG9ja2VkRmVhdHVyZXNBY2Nlc3NlZCIsInJlY29tbWVuZGVkIiwiYmVuZWZpdHMiLCJ1cmdlbmN5IiwidXNhZ2VTdW1tYXJ5IiwicmVxdWlyZWRUaWVyIiwiZ2V0VGllclByaW9yaXR5IiwiY3VycmVudExpbWl0IiwicHJpb3JpdGllcyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7OztDQVNDOzs7Ozs7Ozs7OztJQWtJWUEsbUJBQW1CO2VBQW5CQTs7SUFuR0FDLG1CQUFtQjtlQUFuQkE7O0lBcXhCQUMsbUJBQW1CO2VBQW5CQTs7O3dCQWx6QlU7QUE2QmhCLE1BQU1ELHNCQU1SO0lBQ0hFLFVBQVU7UUFDUkMsYUFBYTtRQUNiQyxhQUFhO1FBQ2JDLFdBQVc7UUFDWEMsVUFBVTtZQUNSQyxXQUFXO1lBQ1hDLGlCQUFpQjtZQUNqQkMsZ0JBQWdCO1lBQ2hCQyxpQkFBaUI7WUFDakJDLGFBQWE7WUFDYkMsWUFBWTtZQUNaQyxpQkFBaUI7WUFDakJDLFlBQVk7WUFDWkMsYUFBYTtZQUNiQyxvQkFBb0I7UUFDdEI7UUFDQUMsUUFBUTtZQUNOQyxTQUFTO1lBQ1RDLHdCQUF3QjtZQUN4QkMsb0JBQW9CO1lBQ3BCQyx1QkFBdUI7UUFDekI7SUFDRjtJQUNBQyxjQUFjO1FBQ1puQixhQUFhO1FBQ2JDLGFBQWE7UUFDYkMsV0FBVztRQUNYQyxVQUFVO1lBQ1JDLFdBQVc7WUFDWEMsaUJBQWlCO1lBQ2pCQyxnQkFBZ0I7WUFDaEJDLGlCQUFpQjtZQUNqQkMsYUFBYTtZQUNiQyxZQUFZO1lBQ1pDLGlCQUFpQjtZQUNqQkMsWUFBWTtZQUNaQyxhQUFhO1lBQ2JDLG9CQUFvQjtRQUN0QjtRQUNBQyxRQUFRO1lBQ05DLFNBQVM7WUFDVEMsd0JBQXdCO1lBQ3hCQyxvQkFBb0I7WUFDcEJDLHVCQUF1QjtRQUN6QjtJQUNGO0lBQ0FFLFlBQVk7UUFDVnBCLGFBQWE7UUFDYkMsYUFBYTtRQUNiQyxXQUFXO1FBQ1hDLFVBQVU7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