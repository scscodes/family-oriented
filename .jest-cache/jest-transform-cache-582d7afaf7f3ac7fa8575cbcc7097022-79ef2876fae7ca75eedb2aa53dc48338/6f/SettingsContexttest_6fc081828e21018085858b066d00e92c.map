{"version":3,"sources":["C:\\repos\\family-oriented\\src\\context\\__tests__\\SettingsContext.test.tsx"],"sourcesContent":["/**\r\n * Enhanced SettingsContext Tests\r\n * Updated to use new testing standards with improved safety measures\r\n */\r\n\r\nimport { renderHook, act } from '@testing-library/react';\r\nimport { SettingsProvider, useSettings } from '../SettingsContext';\r\n\r\nconst wrapper = ({ children }: { children: React.ReactNode }) => (\r\n  <SettingsProvider>{children}</SettingsProvider>\r\n);\r\n\r\ndescribe('SettingsContext - Enhanced Tests', () => {\r\n  beforeEach(() => {\r\n    // Clear all localStorage mock calls\r\n    (localStorage.clear as jest.Mock).mockClear();\r\n    (localStorage.getItem as jest.Mock).mockClear();\r\n    (localStorage.setItem as jest.Mock).mockClear();\r\n    \r\n    // Reset to default behavior\r\n    (localStorage.getItem as jest.Mock).mockReturnValue(null);\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.resetAllMocks();\r\n  });\r\n\r\n  it('provides default settings when none saved', () => {\r\n    const { result } = renderHook(() => useSettings(), { wrapper });\r\n    expect(result.current.settings.questionsPerSession).toBe(10);\r\n    expect(result.current.settings.numberRange.min).toBe(1);\r\n  });\r\n\r\n  it('loads settings from localStorage', () => {\r\n    (localStorage.getItem as jest.Mock).mockReturnValue(\r\n      JSON.stringify({ questionsPerSession: 5 })\r\n    );\r\n    const { result } = renderHook(() => useSettings(), { wrapper });\r\n    expect(result.current.settings.questionsPerSession).toBe(5);\r\n  });\r\n\r\n  it('updates and resets settings properly', () => {\r\n    const { result } = renderHook(() => useSettings(), { wrapper });\r\n    act(() => {\r\n      result.current.updateSettings({\r\n        questionsPerSession: 8,\r\n        mathOperations: { addition: false, subtraction: true },\r\n      });\r\n    });\r\n    expect(result.current.settings.questionsPerSession).toBe(8);\r\n    expect(result.current.settings.mathOperations.addition).toBe(false);\r\n    // unchanged property\r\n    expect(result.current.settings.mathOperations.subtraction).toBe(true);\r\n\r\n    act(() => {\r\n      result.current.updateNumberRange(2, 5);\r\n    });\r\n    expect(result.current.settings.numberRange).toEqual({ min: 2, max: 5 });\r\n\r\n    act(() => {\r\n      result.current.resetSettings();\r\n    });\r\n    expect(result.current.settings.questionsPerSession).toBe(10);\r\n    expect(result.current.settings.numberRange.min).toBe(1);\r\n  });\r\n});\r\n"],"names":["wrapper","children","SettingsProvider","describe","beforeEach","localStorage","clear","mockClear","getItem","setItem","mockReturnValue","afterEach","jest","resetAllMocks","it","result","renderHook","useSettings","expect","current","settings","questionsPerSession","toBe","numberRange","min","JSON","stringify","act","updateSettings","mathOperations","addition","subtraction","updateNumberRange","toEqual","max","resetSettings"],"mappings":"AAAA;;;CAGC;;;;;uBAE+B;iCACc;AAE9C,MAAMA,UAAU,CAAC,EAAEC,QAAQ,EAAiC,iBAC1D,qBAACC,iCAAgB;kBAAED;;AAGrBE,SAAS,oCAAoC;IAC3CC,WAAW;QACT,oCAAoC;QACnCC,aAAaC,KAAK,CAAeC,SAAS;QAC1CF,aAAaG,OAAO,CAAeD,SAAS;QAC5CF,aAAaI,OAAO,CAAeF,SAAS;QAE7C,4BAA4B;QAC3BF,aAAaG,OAAO,CAAeE,eAAe,CAAC;IACtD;IAEAC,UAAU;QACRC,KAAKC,aAAa;IACpB;IAEAC,GAAG,6CAA6C;QAC9C,MAAM,EAAEC,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,4BAAW,KAAI;YAAEjB;QAAQ;QAC7DkB,OAAOH,OAAOI,OAAO,CAACC,QAAQ,CAACC,mBAAmB,EAAEC,IAAI,CAAC;QACzDJ,OAAOH,OAAOI,OAAO,CAACC,QAAQ,CAACG,WAAW,CAACC,GAAG,EAAEF,IAAI,CAAC;IACvD;IAEAR,GAAG,oCAAoC;QACpCT,aAAaG,OAAO,CAAeE,eAAe,CACjDe,KAAKC,SAAS,CAAC;YAAEL,qBAAqB;QAAE;QAE1C,MAAM,EAAEN,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,4BAAW,KAAI;YAAEjB;QAAQ;QAC7DkB,OAAOH,OAAOI,OAAO,CAACC,QAAQ,CAACC,mBAAmB,EAAEC,IAAI,CAAC;IAC3D;IAEAR,GAAG,wCAAwC;QACzC,MAAM,EAAEC,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,4BAAW,KAAI;YAAEjB;QAAQ;QAC7D2B,IAAAA,UAAG,EAAC;YACFZ,OAAOI,OAAO,CAACS,cAAc,CAAC;gBAC5BP,qBAAqB;gBACrBQ,gBAAgB;oBAAEC,UAAU;oBAAOC,aAAa;gBAAK;YACvD;QACF;QACAb,OAAOH,OAAOI,OAAO,CAACC,QAAQ,CAACC,mBAAmB,EAAEC,IAAI,CAAC;QACzDJ,OAAOH,OAAOI,OAAO,CAACC,QAAQ,CAACS,cAAc,CAACC,QAAQ,EAAER,IAAI,CAAC;QAC7D,qBAAqB;QACrBJ,OAAOH,OAAOI,OAAO,CAACC,QAAQ,CAACS,cAAc,CAACE,WAAW,EAAET,IAAI,CAAC;QAEhEK,IAAAA,UAAG,EAAC;YACFZ,OAAOI,OAAO,CAACa,iBAAiB,CAAC,GAAG;QACtC;QACAd,OAAOH,OAAOI,OAAO,CAACC,QAAQ,CAACG,WAAW,EAAEU,OAAO,CAAC;YAAET,KAAK;YAAGU,KAAK;QAAE;QAErEP,IAAAA,UAAG,EAAC;YACFZ,OAAOI,OAAO,CAACgB,aAAa;QAC9B;QACAjB,OAAOH,OAAOI,OAAO,CAACC,QAAQ,CAACC,mBAAmB,EAAEC,IAAI,CAAC;QACzDJ,OAAOH,OAAOI,OAAO,CAACC,QAAQ,CAACG,WAAW,CAACC,GAAG,EAAEF,IAAI,CAAC;IACvD;AACF"}